Script Name: Chande Kroll Stop
Author: LBDZJZLQX_QiMenCrypto
Description: ä»Šå¤©å’Œå¤§å®¶åˆ†äº«Chande Kroll Stop å›æµ‹ï¼Œ ä¿¡å·é‡‡ç”¨äº†ä¸Šé™çº¿å’Œä¸‹é™çº¿å…±é€šåå‘è¶‹åŠ¿è€Œå†³å®šä¹°å–ä¿¡å·ï¼Œå¦‚æœæœ‰æ–°çš„æ„æ€èƒ½æé«˜ä¹°å–ä¿¡å·æ¬¢è¿åœ¨ç•™è¨€åŒºå‘è¡¨ä½ çš„å»ºè®®ï¼Œç¥ä½ äº¤æ˜“å¼€å¿ƒï¼
PineScript code:

Pine Scriptâ„¢ strategy
Chande Kroll Stop
Copy code
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
//@version=4
//
//study(title="ChandeÂ KrollÂ Stop",Â shorttitle="CKÂ Stop",Â overlay=true)
strategy(title="ChandeÂ KrollÂ Stop",Â shorttitle="ChandeÂ KrollÂ Stopå›æ¸¬",Â overlay=true,Â initial_capital=100000,Â calc_on_every_tick=true,default_qty_type=strategy.percent_of_equity,Â default_qty_value=10)
br_redÂ =Â #e91e63,RedÂ =Â #f41818,n_greenÂ =Â #91dc16,dk_greenÂ =Â #004d40,lt_greenÂ =Â #16dc78,lt_blueÂ =Â #0dbdd8,dk_blueÂ =Â #0a3577,BlueÂ =Â #034fed,br_orangeÂ =Â #f57c00,dk_orangeÂ =Â #e65100,dk_grayÂ =Â #434651,dk_pinkÂ =Â #7c1df0,lt_pinkÂ =Â #e743f5,PurpleÂ =Â #5b32f3,lt_purpleÂ =Â #6b5797
hiPÂ =Â input(9,Â "",inline="h")
hixÂ =Â input(1,""Â ,inline="h",Â step=0.1)
hiQÂ =Â input(7,""Â ,inline="h")
loPÂ =Â input(9,""Â ,inline="h1")
loxÂ =Â input(1,""Â ,inline="h1",Â step=0.1)
loQÂ =Â input(5,""Â ,inline="h1")
Xr=input(false,"åå‘æ“ä½œ:è²·/è³£",inline="T"),
first_high_stopÂ =Â highest(high,Â hiP)Â -Â hixÂ *Â atr(hiP)
first_low_stopÂ =Â lowest(high,Â loP)Â +Â loxÂ *Â atr(loP)
stop_shortÂ =Â highest(first_high_stop,Â hiQ)
stop_longÂ =Â lowest(first_low_stop,Â loQ)
cklowÂ =Â stop_short
ckhighÂ =Â stop_long
XdnÂ =Â cklowÂ <Â cklow[1]Â andÂ ckhighÂ <Â ckhigh[1]
XupÂ =Â cklowÂ >Â cklow[1]Â andÂ ckhighÂ >Â ckhigh[1]
longcolÂ =Â XupÂ ?Â lt_greenÂ :Â XdnÂ ?Â br_redÂ :Â #2a2e39
shortcolÂ =Â Xup?Â lt_greenÂ :Â XdnÂ ?Â br_redÂ :Â #2a2e39
plot(stop_long,Â color=longcol)
plot(stop_short,Â color=shortcol)
plotshape(XupÂ andÂ notÂ Xup[1]Â ,Â title="CKÂ StopÂ Buy",Â text='CK',Â style=shape.triangleup,Â size=size.tiny,Â location=location.belowbar,Â color=lt_green,Â textcolor=lt_green,display=display.none)
plotshape(XdnÂ andÂ notÂ Xdn[1],Â title="CKÂ StopÂ Sell",Â text='CK',Â style=shape.triangledown,Â size=size.tiny,Â location=location.abovebar,Â color=br_red,Â textcolor=br_red,display=display.none)
//Â Â Â Â Â Â Â ,Â default_qty_type=strategy.percent_of_equity,Â default_qty_value=10,Â calc_on_every_tick=true)
tl=input(true,"Sig",inline="T"),Â sbg=input(true,"Bgtrend",inline="T"),Â vbuild="FIREHORSEÂ XRPUSDT"
XpÂ =Â 0.0,Â Xp:=Xdn?Â -1Â :Â Xup?Â 1Â :Â Xp[1],Â XdfÂ =Â Xr?Â XupÂ andÂ Xp[1]Â ==Â -1Â :Â XdnÂ andÂ Xp[1]Â ==Â 1Â ,XufÂ =Â Xr?Â Â XdnÂ andÂ Xp[1]Â ==Â 1:Â XupÂ andÂ Xp[1]Â ==Â -1Â 
FY=input(2021,"å¹´",inline="btf"),FM=input(9,"æœˆ",inline="btf"),FD=input(01,"æ—¥",inline="btf"),
TYÂ =Â input(2022,"å¹´",inline="to"),TM=input(01,"æœˆ",inline="to"),TDy=input(01,"æ—¥",inline="to"),Â 
testTFÂ =Â time>=timestamp(FY,FM,FD,00,00)Â andÂ timeÂ <=Â timestamp(TY,TM,TDy,23,59)?Â Â true:false
plotchar(tl?Â Xuf:na,vbuild+"Â ç”Ÿé–€","â–³",location.bottom,Â #14e540,10,0,"Â "Â ,#14e540,1,size.tiny)//Â ï¸½Â Â ï¸¾
plotchar(tl?Â Xdf:na,vbuild+"Â å‚·é–€","â–½",location.top,Â Â #9b0842,10,0,"Â ",Â #9b0842,1,size.tiny)Â Â 
bgcolor(sbgÂ ?Â Xp==1Â ?Â #0d47a1Â :na:Â na,Â transp=90),
alertcondition(Xuf,vbuild+Â "Buy",Â "LongÂ ğŸ’¹Â \n"+vbuild),Â Â alertcondition(Xdf,Â vbuild+Â "Â Sell","ShortÂ ğŸˆ¹\n"+vbuild)
ifÂ Xuf
Â Â Â Â alert("LongÂ "Â +Â tostring(close)+"\nLongÂ "+input("MyÂ LongÂ Â Msg","LongÂ AlertÂ Msg")+vbuild,Â alert.freq_once_per_bar)Â 
ifÂ Xdf
Â Â Â Â alert("ShortÂ "Â +Â tostring(close)+"\nShort"+input("MyÂ ShortÂ Msg","ShortÂ AlertÂ Msg")+vbuild,Â alert.freq_once_per_bar)Â 
ifÂ testTF
Â Â Â Â strategy.entry("LongÂ ",Â strategy.long,Â Â comment="Â LongÂ ",when=Xuf),Â strategy.entry("Short",Â strategy.short,Â comment="Â Short",when=XdfÂ )
Expand (59 lines)