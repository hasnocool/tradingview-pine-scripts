Script Name: MACD 5 iN 1 [Pro-Tool]
Author: HamidBox
Description: introducing MACD Which has different indicators inside,
And not only that, five different strategies have also been included in this indicator.

Strategy â„–1:ðŸ‘‰ MACD Crossover Signal Line
Strategy â„–2:ðŸ‘‰ MACD Crossover + MACD Overbought Section (for ignore false Crossover signals)
Strategy â„–3:ðŸ‘‰ MACD Crossover + Market Close should b greater tha MOVING AVERAGE
Strategy...
PineScript code:

Pine Scriptâ„¢ strategy
MACD 5 iN 1 [Pro-Tool]
Copy code
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
//Â ThisÂ sourceÂ codeÂ isÂ subjectÂ toÂ theÂ termsÂ ofÂ theÂ MozillaÂ PublicÂ LicenseÂ 2.0Â atÂ https://mozilla.org/MPL/2.0/
//Â Â©Â HamidBox
//@version=4
strategy("MACDÂ [5-in-1]Â V2",Â default_qty_type=strategy.cash,Â default_qty_value=100,Â initial_capital=100,Â currency='USD',Â commission_value=0.1)
matype_zone(src,Â len,Â type)Â =>
Â Â Â Â typeÂ ==Â "EMA"Â ?Â ema(src,Â len)Â :
Â Â Â Â Â typeÂ ==Â "SMA"Â ?Â sma(src,Â len)Â :
Â Â Â Â Â typeÂ ==Â "RMA"Â ?Â rma(src,Â len)Â :Â 
Â Â Â Â Â typeÂ ==Â "WMA"Â ?Â wma(src,Â len)Â :Â 
Â Â Â Â Â typeÂ ==Â "VWMA"Â ?Â vwma(src,Â len)Â :
Â Â Â Â Â na
matype_signal(src,Â len,Â type)Â =>
Â Â Â Â typeÂ ==Â "EMA"Â ?Â ema(src,Â len)Â :
Â Â Â Â Â typeÂ ==Â "SMA"Â ?Â sma(src,Â len)Â :
Â Â Â Â Â typeÂ ==Â "RMA"Â ?Â rma(src,Â len)Â :Â 
Â Â Â Â Â typeÂ ==Â "WMA"Â ?Â wma(src,Â len)Â :Â 
Â Â Â Â Â typeÂ ==Â "VWMA"Â ?Â vwma(src,Â len)Â :
Â Â Â Â Â na
//Â MACDÂ INPUTSÂ ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
macd_FastLengthÂ Â Â Â Â =Â input(title="MACDÂ Fast",Â defval=12,Â minval=1,Â type=input.integer,Â inline="fastslow")Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ///
macd_SlowLengthÂ Â Â Â Â =Â input(title="MACDÂ Slowâ€„",Â defval=26,Â minval=1,Â type=input.integer,Â inline="fastslow")Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ///
macd_signalLenÂ Â Â Â Â Â =Â input(title="SignalÂ Line",Â defval=9,Â minval=1,Â type=input.integer,Â inline="signalsrc")Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ///
macd_SourceÂ Â Â Â Â Â Â Â Â =Â input(title="Sourceâ€„â€„â€„â€„â€„â€„",Â defval=close,Â type=input.source,Â inline="signalsrc")Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ///
MACD_LineÂ Â Â Â Â Â Â Â Â Â Â =Â input(title="Oscilattorâ€„",Â defval="EMA",Â type=input.string,Â options=["EMA"Â ,Â "SMA"],Â inline="matype")Â Â Â Â Â ///
SignalLineÂ Â Â Â Â Â Â Â Â Â =Â input(title="Signalâ€„â€„â€„â€„â€„â€„â€„",Â defval="EMA",Â type=input.string,Â options=["EMA"Â ,Â "SMA"],Â inline="matype")Â Â Â ///
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ///
//Â MACDÂ SETUPÂ /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
macd_FastÂ Â Â Â Â Â Â Â Â Â Â =Â MACD_LineÂ ==Â "SMA"Â ?Â sma(macd_SourceÂ ,Â macd_FastLength)Â :Â ema(macd_SourceÂ ,Â macd_FastLength)Â Â Â Â Â Â ///
macd_SlowÂ Â Â Â Â Â Â Â Â Â Â =Â MACD_LineÂ ==Â "SMA"Â ?Â sma(macd_SourceÂ ,Â macd_SlowLength)Â :Â ema(macd_SourceÂ ,Â macd_SlowLength)Â Â Â Â Â Â ///
MACDÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â macd_FastÂ -Â macd_SlowÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ///
SignalÂ Â Â Â Â Â Â Â Â Â Â Â Â Â =Â SignalLineÂ ==Â "SMA"Â ?Â sma(MACD,Â macd_signalLen)Â :Â ema(MACD,Â macd_signalLen)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ///
histogramÂ Â Â Â Â Â Â Â Â Â Â =Â MACDÂ -Â SignalÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ///
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Â MACDÂ CONDITIONSÂ SECTIONÂ /////////////////////////////////////////////////////
macd_grtr_signalÂ Â Â Â =Â MACDÂ >Â SignalÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
macd_less_signalÂ Â Â Â =Â MACDÂ <Â SignalÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
macd_crsovr_signalÂ Â =Â crossover(MACDÂ ,Â Signal)Â ?Â MACDÂ :Â naÂ Â Â Â Â Â //Â FORÂ MACDÂ CROSSÂ DOTÂ PLOTINGÂ //
macd_crsndr_signalÂ Â =Â crossunder(MACDÂ ,Â Signal)Â ?Â MACDÂ :Â naÂ Â Â Â Â //Â FORÂ MACDÂ CROSSÂ DOTÂ PLOTINGÂ //Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 
macd_crsovrÂ Â Â Â Â Â Â Â Â =Â crossover(MACDÂ ,Â Signal)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
macd_crsndrÂ Â Â Â Â Â Â Â Â =Â crossunder(MACDÂ ,Â Signal)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
////////////////////////////////////////////////////////////////////////////////
//Â ChooseÂ yourÂ DesireÂ SignalÂ ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
MACD_crs_signalÂ Â Â Â Â =Â input(false,Â "StgyÂ â„–1:ðŸ‘‰Â MACDÂ CrossOver",Â group="CHOOSEÂ YOURÂ DESIREÂ SIGNAL",Â tooltip="ðŸš¦ðŸš¦ðŸš¦Â ConditionÂ ðŸš¦ðŸš¦ðŸš¦\nBUY:Â MACDÂ CrossOverÂ SignalÂ Line\nSELL:Â MACDÂ CrossUnderÂ SignalÂ Line\nDefaultÂ Signal")
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
MACD_OBÂ Â Â Â Â Â Â Â Â Â Â Â Â =Â input(false,Â "StgyÂ â„–2:ðŸ‘‰Â MACDÂ +Â OverBoughtâ€„",Â inline="obs",Â group="CHOOSEÂ YOURÂ DESIREÂ SIGNAL",Â tooltip="MACDÂ alsoÂ workÂ asÂ OverBoughtÂ &Â OverSoldÂ system,Â sameÂ likeÂ RSIÂ orÂ otherÂ indicatorsÂ whoÂ haveÂ OB/OSÂ system,Â soÂ iÂ addedÂ OB-LevelÂ inÂ MACD,\nsoÂ simpleÂ ruleÂ is:Â ifÂ MACDÂ LinesÂ isÂ AboveÂ OB-Level,Â weÂ willÂ notÂ takeÂ anyÂ trade,Â weÂ onlyÂ followÂ MACDÂ signalsÂ whenÂ MACD-LinesÂ willÂ BelowÂ OB-Level")
MACD_OB_LVLÂ Â Â Â Â Â Â Â Â =Â input(title="",Â defval=0.0,Â type=input.float,Â inline="obs",Â group="CHOOSEÂ YOURÂ DESIREÂ SIGNAL",Â tooltip="MACDÂ alsoÂ workÂ asÂ OverBoughtÂ &Â OverSoldÂ system,Â sameÂ likeÂ RSIÂ orÂ otherÂ indicatorsÂ whoÂ haveÂ OB/OSÂ system,Â soÂ iÂ addedÂ OB-LevelÂ inÂ MACD,\nsoÂ simpleÂ ruleÂ is:Â ifÂ MACDÂ LinesÂ isÂ AboveÂ OB-Level,Â weÂ willÂ notÂ takeÂ anyÂ trade,Â weÂ onlyÂ followÂ MACDÂ signalsÂ whenÂ MACD-LinesÂ willÂ BelowÂ OB-Level")Â 
hline(MACD_OB_LVL,Â color=color.red,Â title="MACDÂ OB",Â linestyle=hline.style_dashed)
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
MACD_closeÂ Â Â Â Â Â Â Â Â Â =Â input(false,Â "StgyÂ â„–3:ðŸ‘‰Â MACDÂ +Â Closeâ€„â€„â€„â€„â€„â€„â€„â€„â€„",Â inline="MAsignal",Â group="CHOOSEÂ YOURÂ DESIREÂ SIGNAL",Â tooltip="ðŸš¦ðŸš¦ðŸš¦Â ConditionÂ ðŸš¦ðŸš¦ðŸš¦\n\nBUYÂ RULES\n1st:Â MACDÂ CrossOverÂ SignalÂ Line\n2nd:Â CloseÂ (Greater)Â ThanÂ MovingÂ Average\n\nSELLÂ RULES\n1st:Â MACDÂ CrossUnderÂ SignalÂ Line\n2nd:Â CloseÂ (Less)Â ThanÂ MovingÂ Average\n\nExplanation:Â WhenÂ (MACDÂ CrossÂ SignalÂ Line)Â andÂ alsoÂ MarketÂ currentÂ CandleÂ CloseÂ orÂ previousÂ 1st-4thÂ anyÂ CandleÂ willÂ haveÂ closeÂ greaterÂ thanÂ MovingÂ AverageÂ (YouÂ Choose:Â EMAÂ orÂ SMAÂ etc...)\nðŸš¦NOTE:Â inÂ thisÂ ConditionÂ onlyÂ SingalÂ MovingÂ AverageÂ workÂ =>Â (SlowÂ MA),")
MA_signal_lenÂ Â Â Â Â Â Â =Â input(title="",Â defval=21,Â type=input.integer,Â inline="MAsignal",Â group="CHOOSEÂ YOURÂ DESIREÂ SIGNAL")Â Â Â Â //Â Â Â Â Â Â //Â 
MA_signal_typeÂ Â Â Â Â Â =Â input(title="",Â defval="EMA",Â options=["SMA"Â ,Â "EMA"Â ,Â "RMA",Â "WMA"Â ,Â "VWMA"Â ,Â "DEMA",Â "TEMA"],Â inline="MAsignal",Â group="CHOOSEÂ YOURÂ DESIREÂ SIGNAL",Â tooltip="ðŸš¦ðŸš¦ðŸš¦Â ConditionÂ ðŸš¦ðŸš¦ðŸš¦\n\nBUYÂ RULES\n1st:Â MACDÂ CrossOverÂ SignalÂ Line\n2nd:Â CloseÂ (Greater)Â ThanÂ MovingÂ Average\n\nSELLÂ RULES\n1st:Â MACDÂ CrossUnderÂ SignalÂ Line\n2nd:Â CloseÂ (Less)Â ThanÂ MovingÂ Average\n\nExplanation:Â WhenÂ (MACDÂ CrossÂ SignalÂ Line)Â andÂ alsoÂ MarketÂ currentÂ CandleÂ CloseÂ willÂ haveÂ closeÂ greaterÂ thanÂ MovingÂ AverageÂ (YouÂ Choose:Â EMAÂ orÂ SMAÂ etc...)")Â Â Â Â Â //Â Â Â Â Â Â //
demaÂ =Â ifÂ MA_signal_typeÂ ==Â "DEMA"
Â Â Â Â emaÂ =Â ema(closeÂ ,Â MA_signal_len)
Â Â Â Â 2Â *Â emaÂ -Â ema(emaÂ ,Â MA_signal_len)
temaÂ =Â ifÂ MA_signal_typeÂ ==Â "TEMA"
Â Â Â Â emaÂ =Â ema(closeÂ ,Â MA_signal_len)
Â Â Â Â 3Â *Â (emaÂ -Â ema(ema,Â MA_signal_len))Â +Â ema(ema(ema,Â MA_signal_len),Â MA_signal_len)
MA_signalÂ Â Â Â Â Â Â Â Â Â Â =Â matype_zone(close,Â MA_signal_len,Â MA_signal_type)
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
MACD_ZONEÂ Â Â Â Â Â Â Â Â Â Â =Â input(false,Â "StgyÂ â„–4:ðŸ‘‰Â MACDÂ +Â MA-ZONEâ€„â€„â€„â€„",Â inline="MAZONE",Â group="CHOOSEÂ YOURÂ DESIREÂ SIGNAL",Â tooltip="ðŸš¦ðŸš¦ðŸš¦Â ConditionÂ ðŸš¦ðŸš¦ðŸš¦\n\nBUYÂ RULES:\n1st:Â MACDÂ CrossOverÂ SignalÂ Line\n2nd:Â CloseÂ (Greater)Â thanÂ (MA-ZONE)\n\nSELLÂ RULES:\n1st:Â MACDÂ CrossUnderÂ SignalÂ Line\n2nd:Â CloseÂ (Less)Â thanÂ (MA-ZONE)")
MA_zone_lenÂ Â Â Â Â Â Â Â Â =Â input(title="",Â defval=21,Â type=input.integer,Â inline="MAZONE",Â group="CHOOSEÂ YOURÂ DESIREÂ SIGNAL")
MA_zone_typeÂ Â Â Â Â Â Â Â =Â input(title="",Â defval="EMA",Â options=["SMA"Â ,Â "EMA"Â ,Â "RMA",Â "WMA"Â ,Â "VWMA"Â ,Â "DEMA",Â "TEMA"],Â inline="MAZONE",Â group="CHOOSEÂ YOURÂ DESIREÂ SIGNAL",Â tooltip="ðŸš¦ðŸš¦ðŸš¦Â ConditionÂ ðŸš¦ðŸš¦ðŸš¦\n\nBUYÂ RULES:\n1st:Â MACDÂ CrossOverÂ SignalÂ Line\n2nd:Â CloseÂ (Greater)Â thanÂ (MA-ZONE)\n\nSELLÂ RULES:\n1st:Â MACDÂ CrossUnderÂ SignalÂ Line\n2nd:Â CloseÂ (Less)Â thanÂ (MA-ZONE)")
dema2Â =Â ifÂ MA_zone_typeÂ ==Â "DEMA"
Â Â Â Â emaÂ =Â ema(closeÂ ,Â MA_zone_len)
Â Â Â Â 2Â *Â emaÂ -Â ema(emaÂ ,Â MA_zone_len)
tema2Â =Â ifÂ MA_zone_typeÂ ==Â "TEMA"
Â Â Â Â emaÂ =Â ema(closeÂ ,Â MA_zone_len)
Â Â Â Â 3Â *Â (emaÂ -Â ema(ema,Â MA_zone_len))Â +Â ema(ema(ema,Â MA_zone_len),Â MA_zone_len)
MA_zone_srcHiÂ Â Â Â Â Â Â =Â matype_signal(high,Â MA_zone_len,Â MA_zone_type)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â Â Â Â Â Â //
MA_zone_srcLOÂ Â Â Â Â Â Â =Â matype_signal(low,Â MA_zone_len,Â MA_zone_type)
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
MACD_wid_rsiOBÂ Â Â Â Â Â =Â input(false,Â "StgyÂ â„–5:ðŸ‘‰Â MACDÂ +Â RSI-OB",Â group="CHOOSEÂ YOURÂ DESIREÂ SIGNAL")
rsilenÂ Â Â Â Â Â Â Â Â Â Â Â Â Â =Â input(title="Length",Â defval=14,Â type=input.integer,Â inline="rsi",Â group="CHOOSEÂ YOURÂ DESIREÂ SIGNAL")
rsi_ent_valueÂ Â Â Â Â Â Â =Â input(title="Entry",Â defval=50,Â type=input.integer,Â minval=1,Â inline="rsi",Â group="CHOOSEÂ YOURÂ DESIREÂ SIGNAL",Â tooltip="ðŸš¦ðŸš¦ðŸš¦Â ConditionÂ ðŸš¦ðŸš¦ðŸš¦\n\nBUYÂ Rule\nMACDÂ CrossoverÂ Signal\nRSIÂ GreaterÂ thenÂ EntryÂ LevelÂ (YouÂ Choose)\n\nðŸš¦ðŸš¦ðŸš¦Â ExplanationÂ ðŸš¦ðŸš¦ðŸš¦\nWeÂ haveÂ RSIÂ withÂ 2Â Levels,\n1st:Â EntryÂ Level\n2nd:Â No-EntryÂ Level\n\nEntryÂ level:\nforÂ neverÂ wantÂ toÂ BUYÂ tradeÂ whenÂ RSIÂ isÂ BelowÂ ourÂ specificÂ Level,Â likeÂ youÂ wantÂ openÂ TradeÂ whenÂ RSIÂ aboveÂ 50Â levelÂ orÂ 30Â levelÂ etc...Â \n\nNo-EntryÂ Level:\nthisÂ isÂ sameÂ asÂ (EntryÂ Level)Â Condition,Â asÂ weÂ knowÂ RSI-70Â levelÂ useÂ forÂ OverBought,Â andÂ itsÂ meanÂ marketÂ willÂ goÂ downÂ afterÂ RSI-OBÂ level,Â andÂ thatsÂ whyÂ weÂ canÂ setÂ overboughtÂ levelÂ forÂ NO-ENTRYÂ whenÂ MarketÂ isÂ onÂ OverBoughtÂ area.")
rsi_ob_valueÂ Â Â Â Â Â Â Â =Â input(title="No-Entry",Â defval=70,Â minval=1,Â type=input.integer,Â inline="rsi",Â group="CHOOSEÂ YOURÂ DESIREÂ SIGNAL")Â Â Â 
RSIÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â rsi(closeÂ ,Â rsilen)
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
startTimeÂ Â Â Â Â Â Â Â Â Â Â =Â Â Â Â Â Â Â input(title="StartÂ Timeâ€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„",Â typeÂ =Â input.time,Â defvalÂ =Â timestamp("01Â JanÂ 2021Â 00:00Â +0000"),Â inline="BacktestingÂ TimeÂ Period")
endTimeÂ Â Â Â Â Â Â Â Â Â Â Â Â =Â Â Â Â Â Â Â input(title="EndÂ Timeâ€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„",Â typeÂ =Â input.time,Â defvalÂ =Â timestamp("01Â JanÂ 2022Â 00:00Â +0000"))
inDateRangeÂ Â Â Â Â Â Â Â Â =Â Â Â Â Â Â Â (timeÂ >=Â startTime)Â andÂ (timeÂ <Â endTime)
bot_idÂ =Â input(title="BOTÂ IDâ€„â€„â€„â€„â€„â€„â€„",Â defval='',Â inline="bot",Â group="BOTÂ SECTION")
email_tokenÂ =Â input(title="â€„â€„Token",Â defval='',Â inline="bot",Â group="BOTÂ SECTION")
enter_msgÂ =Â '{Â "message_type":Â "bot",Â "bot_id":'+Â bot_idÂ +Â ',Â "email_token":Â "'+Â email_tokenÂ +Â '",Â "delay_seconds":Â 0Â }'
exit_msgÂ =Â '{Â "message_type":Â "bot",Â "bot_id":'+Â bot_idÂ +Â ',Â "email_token":Â "'+Â email_tokenÂ +Â '",Â "delay_seconds":Â 0Â ,Â "action":Â "close_at_market_price_all"}'
//Â COPYÂ PASTEÂ THISÂ MSGÂ TOÂ TRADINGVIEW
//Â {{strategy.order.alert_message}}
//Â StgyÂ â„–1:ðŸ‘‰Â MACDÂ CrossÂ SignalÂ CONDITIONÂ //////////////////////////////////////
//Â ENTRYÂ EXITÂ SECTIONÂ //////////////////////////////////////////////////////////
//Â ((Â MACDÂ +Â CLOSEÂ ))Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
ifÂ macd_crsovrÂ andÂ MACD_crs_signalÂ andÂ inDateRangeÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
Â Â Â Â strategy.entry("BUY1",Â strategy.long,Â comment="S#1",Â alert_message=enter_msg)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
ifÂ macd_crsndrÂ andÂ MACD_crs_signalÂ andÂ inDateRangeÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
Â Â Â Â strategy.close("BUY1",Â comment="x",Â alert_message=exit_msg)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
////////////////////////////////////////////////////////////////////////////////
//Â //Â StgyÂ â„–1Â PlotingÂ 
//Â plotshape(MACD_crs_signalÂ ?Â macd_crsovrÂ :Â na,Â title="StgyÂ Sign",Â color=color.blue,Â style=shape.labelup,Â text="MACD",Â textcolor=color.white,Â location=location.bottom)
//Â plotshape(MACD_crs_signalÂ ?Â macd_crsndrÂ :Â na,Â title="StgyÂ Sign",Â color=color.maroon,Â style=shape.labeldown,Â text="MACD-x",Â textcolor=color.white,Â location=location.top)
//Â ////////////////////////////////////////////////////////////////////////////////
//Â StgyÂ â„–2:ðŸ‘‰Â MACDÂ +Â OverBoughtÂ CONDITIONÂ //////////////////////////////////////
only_Trade_whenÂ Â Â Â Â =Â MACDÂ <Â MACD_OB_LVLÂ andÂ SignalÂ <Â MACD_OB_LVLÂ Â Â Â Â Â Â Â Â Â Â ////
macd_ob_buyÂ Â Â Â Â Â Â Â Â =Â macd_crsovrÂ andÂ only_Trade_whenÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
macd_ob_sellÂ Â Â Â Â Â Â Â =Â macd_crsndrÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
////////////////////////////////////////////////////////////////////////////////
//Â ENTRYÂ EXITÂ SECTIONÂ //////////////////////////////////////////////////////////
//Â ((Â MACDÂ +Â ZONEÂ ))Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
ifÂ macd_ob_buyÂ andÂ MACD_OBÂ andÂ inDateRangeÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
Â Â Â Â strategy.entry("BUY2",Â strategy.long,Â comment="S#2",Â alert_message=enter_msg)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
ifÂ macd_ob_sellÂ andÂ MACD_OBÂ andÂ inDateRangeÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
Â Â Â Â strategy.close("BUY2",Â comment="x",Â alert_message=exit_msg)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
////////////////////////////////////////////////////////////////////////////////
//Â plotshape(MACD_OBÂ ?Â macd_ob_buyÂ :Â na,Â title="StgyÂ Sign",Â color=color.blue,Â style=shape.labelup,Â text="M+OB",Â textcolor=color.white,Â location=location.bottom)
//Â plotshape(MACD_OBÂ ?Â macd_ob_sellÂ :Â na,Â title="StgyÂ Sign",Â color=color.maroon,Â style=shape.labeldown,Â text="M+OB-x",Â textcolor=color.white,Â location=location.top)
//Â ////////////////////////////////////////////////////////////////////////////////
//Â StgyÂ â„–3:ðŸ‘‰Â MACDÂ +Â CLOSEÂ CONDITIONÂ ///////////////////////////////////////////
macd_close_buyÂ Â Â Â Â Â Â =Â macd_crsovrÂ andÂ (Â (Â closeÂ >Â MA_signalÂ orÂ (close[1]Â >Â MA_signal[1])Â orÂ (close[2]Â >Â MA_signal[2])Â orÂ (close[3]Â >Â MA_signal[3])Â )Â Â Â Â orÂ Â Â Â (Â closeÂ >Â demaÂ Â orÂ (close[1]Â >Â dema[1])Â orÂ (close[2]Â >Â dema[2])Â orÂ (close[3]Â >Â dema[3])Â )Â Â Â Â orÂ Â Â Â (Â closeÂ >Â temaÂ Â orÂ (close[1]Â >Â tema[1])Â orÂ (close[2]Â >Â tema[2])Â orÂ (close[3]Â >Â tema[3])Â )Â )Â 
macd_close_sellÂ Â Â Â Â Â =Â macd_crsndrÂ andÂ (Â (Â closeÂ >Â MA_signalÂ orÂ (close[1]Â <Â MA_signal[1])Â orÂ (close[2]Â <Â MA_signal[2])Â orÂ (close[3]Â <Â MA_signal[3])Â )Â Â Â Â orÂ Â Â Â (Â closeÂ <Â demaÂ Â orÂ (close[1]Â <Â dema[1])Â orÂ (close[2]Â <Â dema[2])Â orÂ (close[3]Â <Â dema[3])Â )Â Â Â Â orÂ Â Â Â (Â closeÂ <Â temaÂ Â orÂ (close[1]Â <Â tema[1])Â orÂ (close[2]Â <Â tema[2])Â orÂ (close[3]Â <Â tema[3])Â )Â )Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
////////////////////////////////////////////////////////////////////////////////
//Â ENTRYÂ EXITÂ SECTIONÂ //////////////////////////////////////////////////////////
//Â ((Â MACDÂ +Â CLOSEÂ ))Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
ifÂ macd_close_buyÂ andÂ MACD_closeÂ andÂ inDateRangeÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
Â Â Â Â strategy.entry("BUY3",Â strategy.long,Â comment="S#3",Â alert_message=enter_msg)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
ifÂ macd_close_sellÂ andÂ MACD_closeÂ andÂ inDateRangeÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
Â Â Â Â strategy.close("BUY3",Â comment="x",Â alert_message=exit_msg)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
////////////////////////////////////////////////////////////////////////////////
//Â //Â StgyÂ â„–3Â PlotingÂ 
//Â plotshape(MACD_closeÂ ?Â macd_close_buyÂ :Â na,Â title="StgyÂ Sign",Â color=color.blue,Â style=shape.labelup,Â text="MACD",Â textcolor=color.white,Â location=location.bottom)
//Â plotshape(MACD_closeÂ ?Â macd_close_sellÂ :Â na,Â title="StgyÂ Sign",Â color=color.maroon,Â style=shape.labeldown,Â text="MACD-x",Â textcolor=color.white,Â location=location.top)
//Â ////////////////////////////////////////////////////////////////////////////////
//Â StgyÂ â„–3:ðŸ‘‰Â MACDÂ +Â MA-ZONEÂ MACDÂ +Â ZONEÂ CONDITIONÂ /////////////////////////////
macd_zone_buyÂ Â Â Â Â Â Â =Â macd_crsovrÂ andÂ (Â (Â closeÂ >Â MA_zone_srcHiÂ orÂ (close[1]Â >Â MA_zone_srcHi[1])Â orÂ (close[2]Â >Â MA_zone_srcHi[2])Â orÂ (close[3]Â >Â MA_zone_srcHi[3])Â )Â Â Â Â orÂ Â Â Â Â Â (Â closeÂ >Â dema2Â orÂ (close[1]Â >Â dema2[1])Â orÂ (close[2]Â >Â dema2[2])Â orÂ (close[3]Â >Â dema2[3])Â )Â Â Â Â orÂ Â Â Â Â Â (Â closeÂ >Â tema2Â orÂ (close[1]Â >Â tema2[1])Â orÂ (close[2]Â >Â tema2[2])Â orÂ (close[3]Â >Â tema2[3])Â )Â Â Â )Â Â Â Â Â Â Â Â Â Â Â Â ////
macd_zone_sellÂ Â Â Â Â Â =Â macd_crsndrÂ andÂ (Â (Â closeÂ <Â MA_zone_srcHiÂ orÂ (close[1]Â <Â MA_zone_srcHi[1])Â orÂ (close[2]Â <Â MA_zone_srcHi[2])Â orÂ (close[3]Â <Â MA_zone_srcHi[3])Â )Â Â Â Â orÂ Â Â Â Â Â (Â closeÂ <Â dema2Â orÂ (close[1]Â <Â dema2[1])Â orÂ (close[2]Â <Â dema2[2])Â orÂ (close[3]Â <Â dema2[3])Â )Â Â Â Â orÂ Â Â Â Â Â (Â closeÂ <Â tema2Â orÂ (close[1]Â <Â tema2[1])Â orÂ (close[2]Â <Â tema2[2])Â orÂ (close[3]Â <Â tema2[3])Â )Â Â Â )Â Â Â Â Â Â Â Â Â Â Â ////
////////////////////////////////////////////////////////////////////////////////
//Â ENTRYÂ EXITÂ SECTIONÂ //////////////////////////////////////////////////////////
//Â ((Â MACDÂ +Â ZONEÂ ))Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
ifÂ macd_zone_buyÂ andÂ MACD_ZONEÂ andÂ inDateRangeÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
Â Â Â Â strategy.entry("BUY4",Â strategy.long,Â comment="S#4",Â alert_message=enter_msg)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
ifÂ macd_zone_sellÂ andÂ MACD_ZONEÂ andÂ inDateRangeÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
Â Â Â Â strategy.close("BUY4",Â comment="x",Â alert_message=exit_msg)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
////////////////////////////////////////////////////////////////////////////////
//Â StgyÂ â„–5:ðŸ‘‰Â MACDÂ +Â RSI-OBÂ CONDITIONÂ //////////////////////////////////////////
MACD_rsi_EnBuyÂ Â Â Â Â Â Â Â Â =Â RSIÂ >Â rsi_ent_valueÂ andÂ RSIÂ <Â rsi_ob_valueÂ Â Â Â Â Â Â Â Â ////
MACD_rsi_EnSellÂ Â Â Â Â Â Â Â Â =Â RSIÂ <Â rsi_ent_valueÂ Â Â Â Â Â Â Â Â Â Â ////
MACD_rsi_ExÂ Â Â Â Â Â Â =Â crossunder(RSIÂ ,Â rsi_ob_value)Â orÂ crossunder(RSI[1]Â ,Â rsi_ob_value[1])Â orÂ crossunder(RSI[2]Â ,Â rsi_ob_value[2])Â orÂ crossunder(RSI[3]Â ,Â rsi_ob_value[3])Â orÂ crossunder(RSI[4]Â ,Â rsi_ob_value[4])Â orÂ crossunder(RSI[5]Â ,Â rsi_ob_value[5])Â orÂ crossunder(RSI[6]Â ,Â rsi_ob_value[6])Â Â Â Â Â Â Â Â Â ////
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
////////////////////////////////////////////////////////////////////////////////
//Â ENTRYÂ EXITÂ SECTIONÂ //////////////////////////////////////////////////////////
//Â ((MACDÂ +Â RSI-OBÂ ))Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
ifÂ macd_crsovrÂ andÂ MACD_rsi_EnBuyÂ andÂ MACD_wid_rsiOBÂ andÂ inDateRangeÂ Â Â Â Â Â Â Â ////
Â Â Â Â strategy.entry("BUY5",Â strategy.long,Â comment="S#5",Â alert_message=enter_msg)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
ifÂ macd_crsndrÂ andÂ MACD_wid_rsiOBÂ andÂ inDateRangeÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
Â Â Â Â strategy.close("BUY5",Â comment="x",Â alert_message=exit_msg)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ////
////////////////////////////////////////////////////////////////////////////////
ifÂ (notÂ inDateRange)Â Â Â Â Â Â Â Â Â Â Â ///
Â Â Â Â strategy.close_all()Â Â Â Â Â Â Â ///
//////////////////////////////////
//Â MACDÂ COLORSÂ SECTIONÂ /////////////////////////////////////////////////////////
//Â (Â ColorsÂ ofÂ [MACDÂ andÂ Signal-Line]Â )
MACD_widthÂ Â Â Â Â Â Â Â Â Â =Â input(title="MACDÂ Lineâ€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€…",Â defval=2,Â minval=1,Â type=input.integer,Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦",Â inline="macdColor")
MACD_color_HighÂ Â Â Â Â =Â input(#11ff00,Â title="",Â type=input.color,Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦",Â inline="macdColor")
MACD_color_LowÂ Â Â Â Â Â =Â input(#e91e63,Â title="",Â type=input.color,Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦",Â inline="macdColor")
signal_widthÂ Â Â Â Â Â Â Â =Â input(title="SignalÂ Lineâ€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€…",Â defval=2,Â minval=1,Â type=input.integer,Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦",Â inline="signal")
signalLine_col_hiÂ Â Â =Â input(#ffeb3b,Â title="",Â type=input.color,Â inline="signal",Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦")
signalLine_col_loÂ Â Â =Â input(#ffeb3b,Â title="",Â type=input.color,Â inline="signal",Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦")
//Â ((HistogramÂ Color))Â /////////////////////////////////////////////////////////
macd_hist_onÂ Â Â Â Â Â Â Â =Â input(true,Â "Histogramâ€„â€„â€„â€„â€„â€„â€„â€„",Â inline="hist",Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦")
BuyStrongHistÂ Â Â Â Â Â Â =Â input(#26A69A,Â title="",Â type=input.color,Â inline="hist",Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦")
BuyWeakHistÂ Â Â Â Â Â Â Â Â =Â input(#B2DFDB,Â title="",Â type=input.color,Â inline="hist",Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦")
SellWeakHistÂ Â Â Â Â Â Â Â =Â input(#FFCDD2,Â title="âœ¨",Â type=input.color,Â inline="hist",Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦")
SellStrongHistÂ Â Â Â Â Â =Â input(#FF5252,Â title="",Â type=input.color,Â inline="hist",Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦")
//Â ((FORÂ HISTOGRAMÂ COLORÂ CONDITION))
hist_colÂ Â Â Â Â Â Â Â Â Â Â Â =Â (histogramÂ >=Â 0Â ?Â (histogram[1]Â <Â histogramÂ ?Â BuyStrongHistÂ :Â BuyWeakHist)Â :Â histogram[1]Â <Â histogramÂ ?Â SellWeakHistÂ :Â SellStrongHist)
//Â ((Â CROSSOVERÂ DOT)Â ///////////////////////////////////////////////////////////
macd_crsovr_dot_onÂ Â =Â input(true,Â "Crossâ€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„â€„",Â inline="dot",Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦")
macd_cross_widthÂ Â Â Â =Â input(defval=5,Â title="",Â inline="dot",Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦")
dot_crsovr_colÂ Â Â Â Â Â =Â input(#ffffff,Â title="",Â type=input.color,Â inline="dot",Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦")
dot_crsndr_colÂ Â Â Â Â Â =Â input(color.new(#e91e63,Â 0),Â title="",Â type=input.color,Â inline="dot",Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦")
//Â ((Â MACDÂ ZONEÂ COLORÂ ))
zone_onÂ Â Â Â Â Â Â Â Â Â Â Â Â =Â input(true,Â "ZoneÂ Colorâ€„â€„â€„â€„â€„â€„â€„â€„",Â inline="zone",Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦")
zone_crsovr_colÂ Â Â Â Â =Â input(color.new(color.lime,Â 70),Â title="",Â type=input.color,Â inline="zone",Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦")
zone_crsndr_colÂ Â Â Â Â =Â input(color.new(#e91e63,Â 70),Â title="",Â type=input.color,Â inline="zone",Â group="ðŸš¦ðŸš¦macdÂ WidthÂ &Â ColorsÂ settingðŸš¦ðŸš¦")
/////////////////////////////////////////Â ((FORÂ MACDÂ LINEÂ COLORÂ CONDITION))
MACD_line_colÂ =Â ifÂ macd_grtr_signalÂ Â Â Â //
Â Â Â Â MACD_color_HighÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
elseÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
Â Â Â Â ifÂ macd_less_signalÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
Â Â Â Â Â Â Â Â MACD_color_LowÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
/////////////////////////////////////////Â ((FORÂ SIGNALÂ LINEÂ COLORÂ CONDITION))
signal_line_colÂ =Â ifÂ macd_grtr_signalÂ Â //
Â Â Â Â signalLine_col_hiÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
elseÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
Â Â Â Â ifÂ macd_less_signalÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
Â Â Â Â Â Â Â Â signalLine_col_loÂ Â Â Â Â Â Â Â Â Â Â Â Â Â //
/////////////////////////////////////////Â ((FORÂ MACDÂ CROSSÂ DOTsÂ COLORÂ CONDITION))
MACD_Dot_colÂ =Â ifÂ macd_crsovr_signalÂ Â Â //
Â Â Â Â dot_crsovr_colÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
elseÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
Â Â Â Â ifÂ macd_crsndr_signalÂ Â Â Â Â Â Â Â Â Â Â Â Â Â //
Â Â Â Â Â Â Â Â dot_crsndr_colÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
/////////////////////////////////////////////////////////////////////////////////////////////////
zone_crsovr_plotÂ =Â ifÂ macd_grtr_signalÂ Â andÂ zone_onÂ //Â ((ForÂ ZoneÂ ColorÂ ComditionÂ +Â On/Off))Â ///
Â Â Â Â zone_crsovr_colÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ///////////////////////////////////////////
elseÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
Â Â Â Â ifÂ macd_less_signalÂ andÂ zone_onÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
Â Â Â Â Â Â Â Â zone_crsndr_colÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //
//////////////////////////////////////////////////////
//Â MACDÂ PLOTINGÂ //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
histplotÂ Â Â Â =Â plot(macd_hist_onÂ ?Â histogramÂ :Â na,Â title="Histogram",Â color=hist_col,Â style=plot.style_columns)
macdplotÂ Â Â Â =Â plot(MACD,Â title="MACD",Â color=MACD_line_col,Â linewidth=MACD_width)
signalplotÂ Â =Â plot(Signal,Â title="Signal",Â color=signal_line_col,Â linewidth=signal_width)
fill(macdplotÂ ,Â signalplot,Â color=zone_crsovr_plot)
plot(macd_crsovr_dot_onÂ ?Â macd_crsovr_signalÂ :Â na,Â Â title="c-over",Â style=plot.style_circles,Â color=MACD_Dot_col,Â linewidth=macd_cross_width)
plot(macd_crsovr_dot_onÂ ?Â macd_crsndr_signalÂ :Â na,Â Â title="c-under",Â style=plot.style_circles,Â color=MACD_Dot_col,Â linewidth=macd_cross_width)
///////////////////////////////////////////////////////////////////////////////
donttouchzeroÂ =Â input(title="WantÂ DVGÂ whenÂ lineÂ belowÂ 0Â Â ?â€„â€„â€„â€„â€„â€„â€„â€„",Â defval=true,Â inline="line",Â group="Â â–â–‚â–ƒâ–„â–…â–†â–‡â–‰Â MACDÂ DIVERGENCEÂ â–‰â–‡â–†â–…â–„â–ƒâ–‚â–")
lbRÂ =Â input(title="PivotÂ LookbackÂ Right",Â defval=5,Â group="Â â–â–‚â–ƒâ–„â–…â–†â–‡â–‰Â MACDÂ DIVERGENCEÂ â–‰â–‡â–†â–…â–„â–ƒâ–‚â–")
lbLÂ =Â input(title="PivotÂ LookbackÂ Left",Â defval=5,Â group="Â â–â–‚â–ƒâ–„â–…â–†â–‡â–‰Â MACDÂ DIVERGENCEÂ â–‰â–‡â–†â–…â–„â–ƒâ–‚â–")
rangeUpperÂ =Â input(title="MaxÂ ofÂ LookbackÂ Range",Â defval=60,Â group="Â â–â–‚â–ƒâ–„â–…â–†â–‡â–‰Â MACDÂ DIVERGENCEÂ â–‰â–‡â–†â–…â–„â–ƒâ–‚â–")
rangeLowerÂ =Â input(title="MinÂ ofÂ LookbackÂ Range",Â defval=5,Â group="Â â–â–‚â–ƒâ–„â–…â–†â–‡â–‰Â MACDÂ DIVERGENCEÂ â–‰â–‡â–†â–…â–„â–ƒâ–‚â–")
plotBullÂ =Â input(title="ON/OFFÂ BullishÂ DVG",Â defval=true,Â group="Â â–â–‚â–ƒâ–„â–…â–†â–‡â–‰Â MACDÂ DIVERGENCEÂ â–‰â–‡â–†â–…â–„â–ƒâ–‚â–")
plotHiddenBullÂ =Â false
plotBearÂ =Â input(title="ON/OFFÂ BearishÂ DVG",Â defval=true,Â group="Â â–â–‚â–ƒâ–„â–…â–†â–‡â–‰Â MACDÂ DIVERGENCEÂ â–‰â–‡â–†â–…â–„â–ƒâ–‚â–")
plotHiddenBearÂ =Â false
bearColorÂ =Â color.red
bullColorÂ =Â color.green
hiddenBullColorÂ =Â color.new(color.green,Â 80)
hiddenBearColorÂ =Â color.new(color.red,Â 80)
textColorÂ =Â color.white
noneColorÂ =Â color.new(color.white,Â 100)
oscÂ =Â MACD
plFoundÂ =Â na(pivotlow(osc,Â lbL,Â lbR))Â ?Â falseÂ :Â true
phFoundÂ =Â na(pivothigh(osc,Â lbL,Â lbR))Â ?Â falseÂ :Â true
_inRange(cond)Â =>
Â Â Â Â barsÂ =Â barssince(condÂ ==Â true)
Â Â Â Â rangeLowerÂ <=Â barsÂ andÂ barsÂ <=Â rangeUpper
//------------------------------------------------------------------------------
//Â RegularÂ Bullish
//Â Osc:Â HigherÂ Low
oscHLÂ =Â osc[lbR]Â >Â valuewhen(plFound,Â osc[lbR],Â 1)Â andÂ _inRange(plFound[1])Â andÂ Â osc[lbR]Â <Â 0
//Â Price:Â LowerÂ Low
priceLLÂ Â Â Â Â Â Â Â Â =Â low[lbR]Â <Â valuewhen(plFound,Â low[lbR],Â 1)
priceHHZeroÂ Â Â Â Â =Â highest(osc,Â lbL+lbR+5)
LineDisplayÂ Â Â Â Â =Â input(false,Â "LineÂ Display",Â inline="line",Â group="Â â–â–‚â–ƒâ–„â–…â–†â–‡â–‰Â MACDÂ DIVERGENCEÂ â–‰â–‡â–†â–…â–„â–ƒâ–‚â–")
plot(LineDisplayÂ ?Â priceHHZeroÂ :Â na,Â title="priceHHZero",Â color=color.lime)
blowzeroÂ =Â donttouchzeroÂ ?Â priceHHZeroÂ <Â 0Â :Â true
bullCondÂ =Â plotBullÂ andÂ priceLLÂ andÂ oscHLÂ andÂ plFoundÂ andÂ blowzero
plot(
Â Â Â Â Â plFoundÂ ?Â osc[lbR]Â :Â na,
Â Â Â Â Â offset=-lbR,
Â Â Â Â Â title="RegularÂ Bullish",
Â Â Â Â Â linewidth=2,
Â Â Â Â Â color=(bullCondÂ ?Â bullColorÂ :Â noneColor),
Â Â Â Â Â transp=0
Â Â Â Â Â )
plotshape(
Â Â Â Â Â bullCondÂ ?Â osc[lbR]Â :Â na,
Â Â Â Â Â offset=-lbR,
Â Â Â Â Â title="RegularÂ BullishÂ Label",
Â Â Â Â Â text="Â BullÂ ",
Â Â Â Â Â style=shape.labelup,
Â Â Â Â Â location=location.absolute,
Â Â Â Â Â color=bullColor,
Â Â Â Â Â textcolor=textColor,
Â Â Â Â Â transp=0
Â Â Â Â Â )
//------------------------------------------------------------------------------
//Â HiddenÂ Bullish
//Â Osc:Â LowerÂ Low
oscLLÂ =Â osc[lbR]Â <Â valuewhen(plFound,Â osc[lbR],Â 1)Â andÂ _inRange(plFound[1])
//Â Price:Â HigherÂ Low
priceHLÂ =Â low[lbR]Â >Â valuewhen(plFound,Â low[lbR],Â 1)
hiddenBullCondÂ =Â plotHiddenBullÂ andÂ priceHLÂ andÂ oscLLÂ andÂ plFound
plot(
Â Â Â Â Â plFoundÂ ?Â osc[lbR]Â :Â na,
Â Â Â Â Â offset=-lbR,
Â Â Â Â Â title="HiddenÂ Bullish",
Â Â Â Â Â linewidth=2,
Â Â Â Â Â color=(hiddenBullCondÂ ?Â hiddenBullColorÂ :Â noneColor),
Â Â Â Â Â transp=0
Â Â Â Â Â )
plotshape(
Â Â Â Â Â hiddenBullCondÂ ?Â osc[lbR]Â :Â na,
Â Â Â Â Â offset=-lbR,
Â Â Â Â Â title="HiddenÂ BullishÂ Label",
Â Â Â Â Â text="Â HÂ BullÂ ",
Â Â Â Â Â style=shape.labelup,
Â Â Â Â Â location=location.absolute,
Â Â Â Â Â color=bullColor,
Â Â Â Â Â textcolor=textColor,
Â Â Â Â Â transp=0
Â Â Â Â Â )
//------------------------------------------------------------------------------
//Â RegularÂ Bearish
//Â Osc:Â LowerÂ High
oscLHÂ =Â osc[lbR]Â <Â valuewhen(phFound,Â osc[lbR],Â 1)Â andÂ _inRange(phFound[1])Â Â andÂ osc[lbR]Â >Â 0
priceLLZeroÂ =Â Â lowest(osc,Â lbL+lbR+5)Â 
//plot(priceLLZero,title="priceLLZero",Â color=color.red)
bearzeroÂ =Â donttouchzeroÂ ?Â priceLLZeroÂ >Â 0Â :Â true
//Â Price:Â HigherÂ High
priceHHÂ =Â high[lbR]Â >Â valuewhen(phFound,Â high[lbR],Â 1)
bearCondÂ =Â plotBearÂ andÂ priceHHÂ andÂ oscLHÂ andÂ phFoundÂ andÂ bearzero
plot(
Â Â Â Â Â phFoundÂ ?Â osc[lbR]Â :Â na,
Â Â Â Â Â offset=-lbR,
Â Â Â Â Â title="RegularÂ Bearish",
Â Â Â Â Â linewidth=2,
Â Â Â Â Â color=(bearCondÂ ?Â bearColorÂ :Â noneColor),
Â Â Â Â Â transp=0
Â Â Â Â Â )
plotshape(
Â Â Â Â Â bearCondÂ ?Â osc[lbR]Â :Â na,
Â Â Â Â Â offset=-lbR,
Â Â Â Â Â title="RegularÂ BearishÂ Label",
Â Â Â Â Â text="Â BearÂ ",
Â Â Â Â Â style=shape.labeldown,
Â Â Â Â Â location=location.absolute,
Â Â Â Â Â color=bearColor,
Â Â Â Â Â textcolor=textColor,
Â Â Â Â Â transp=0
Â Â Â Â Â )
//------------------------------------------------------------------------------
//Â HiddenÂ Bearish
//Â Osc:Â HigherÂ High
oscHHÂ =Â osc[lbR]Â >Â valuewhen(phFound,Â osc[lbR],Â 1)Â andÂ _inRange(phFound[1])
//Â Price:Â LowerÂ High
priceLHÂ =Â high[lbR]Â <Â valuewhen(phFound,Â high[lbR],Â 1)
hiddenBearCondÂ =Â plotHiddenBearÂ andÂ priceLHÂ andÂ oscHHÂ andÂ phFound
plot(
Â Â Â Â Â phFoundÂ ?Â osc[lbR]Â :Â na,
Â Â Â Â Â offset=-lbR,
Â Â Â Â Â title="HiddenÂ Bearish",
Â Â Â Â Â linewidth=2,
Â Â Â Â Â color=(hiddenBearCondÂ ?Â hiddenBearColorÂ :Â noneColor),
Â Â Â Â Â transp=0
Â Â Â Â Â )
plotshape(
Â Â Â Â Â hiddenBearCondÂ ?Â osc[lbR]Â :Â na,
Â Â Â Â Â offset=-lbR,
Â Â Â Â Â title="HiddenÂ BearishÂ Label",
Â Â Â Â Â text="Â HÂ BearÂ ",
Â Â Â Â Â style=shape.labeldown,
Â Â Â Â Â location=location.absolute,
Â Â Â Â Â color=bearColor,
Â Â Â Â Â textcolor=textColor,
Â Â Â Â Â transp=0
Â Â Â Â Â )
Expand (443 lines)