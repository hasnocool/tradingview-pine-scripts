Script Name: CoGrid Management
Author: UnknownUnicorn2151907
Description: This strategy uses grid levels determined by pivot points based on the selected time period.
It's useful for swing trading without leverage, spot trading or for Hold management.
If the price goes down we buy and if it continues to go down we keep buying improving the average price.
When the price rises above the average entry price, we sell and if it continues to...
PineScript code:

Pine Scriptâ„¢ strategy
CoGrid Management
Copy code
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
//Â ThisÂ sourceÂ codeÂ isÂ subjectÂ toÂ theÂ termsÂ ofÂ theÂ MozillaÂ PublicÂ LicenseÂ 2.0Â atÂ https://mozilla.org/MPL/2.0/
//Â Â©Â XaviZ
//@version=4
strategy(titleÂ =Â "CoGridÂ Management",Â shorttitleÂ =Â "CoGridðŸ’¹",Â overlayÂ =Â true,Â pyramidingÂ =Â 1000,Â default_qty_valueÂ =Â 0)
//Â â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”Â Inputs
WOptionÂ Â Â Â Â Â Â Â Â Â Â Â Â =Â input('PRICE',Â Â Â Â Â Â Â Â "â€ƒã€‹Â WIDTHÂ TYPE",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â optionsÂ =Â ['PRICE','%Â PP'])
WidthÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â input(500,Â Â Â Â Â Â Â Â Â Â Â Â "â€ƒã€‹Â WIDTH",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â typeÂ =Â input.float,Â Â Â Â Â minvalÂ =Â 0)
ppPeriodÂ Â Â Â Â Â Â Â Â Â Â Â =Â input('Month',Â Â Â Â Â Â Â Â "â€ƒã€‹Â PPÂ PERIOD",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â optionsÂ =Â ['Day','Week','15D','Month'])
BuyTypeÂ Â Â Â Â Â Â Â Â Â Â Â Â =Â input("CASH",Â Â Â Â Â Â Â Â Â "â€ƒã€‹Â BUYÂ TYPE",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â optionsÂ =Â ["CONTRACTS","CASH","%Â EQUITY"])
BuyQÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â input(10000,Â Â Â Â Â Â Â Â Â Â "â€ƒã€‹Â QUANTITYÂ TOÂ BUY",Â Â Â Â Â Â typeÂ =Â input.float,Â Â Â Â Â minvalÂ =Â 0)
SellTypeÂ Â Â Â Â Â Â Â Â Â Â Â =Â input('CONTRACTS',Â Â Â Â "â€ƒã€‹Â SELLÂ TYPE",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â optionsÂ =Â ["CONTRACTS","CASH","%Â EQUITY"])
SellQÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â input(2,Â Â Â Â Â Â Â Â Â Â Â Â Â Â "â€ƒã€‹Â QUANTITYÂ TOÂ SELL",Â Â Â Â Â typeÂ =Â input.float,Â Â Â Â Â minvalÂ =Â 0)
//Â â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”Â Vars
//Â â€”â€”â€”â€”â€”Â FinalÂ BuyÂ PriceÂ &Â FinalÂ SellÂ Price
varÂ floatÂ FinalBuyPriceÂ =Â na
varÂ floatÂ FinalSellPriceÂ =Â na
varÂ floatÂ FinalOpenPriceÂ =Â na
//Â â€”â€”â€”â€”â€”Â AverageÂ Price
varÂ intÂ nBuysÂ =Â na
nBuysÂ :=Â nz(nBuys[1])
varÂ intÂ nSellsÂ =Â na
nSellsÂ :=Â nz(nSells[1])
varÂ floatÂ sumBuyÂ =Â na
sumBuyÂ :=Â nz(sumBuy[1])
varÂ floatÂ sumSellÂ =Â na
sumSellÂ :=Â nz(sumSell[1])
varÂ floatÂ sumQtyBuyÂ =Â na
sumQtyBuyÂ :=Â nz(sumQtyBuy[1])
varÂ floatÂ sumQtySellÂ =Â na
sumQtySellÂ :=Â nz(sumQtySell[1])
varÂ floatÂ AveragePriceÂ =Â na
colorÂ ColorÂ =Â na
//Â â€”â€”â€”â€”â€”Â FibonacciÂ PivotsÂ LevelÂ Calculation
varÂ floatÂ PPÂ =Â na
//Â â€”â€”â€”â€”â€”Â Backtest
BuyFactorÂ Â Â Â Â Â Â Â Â Â Â =Â BuyTypeÂ Â ==Â "CONTRACTS"Â Â Â ?Â 1Â :Â BuyTypeÂ ==Â "%Â EQUITY"Â ?Â (100Â /Â (strategy.equityÂ /Â close))Â :Â close
SellFactorÂ Â Â Â Â Â Â Â Â Â =Â SellTypeÂ ==Â "CASH"Â Â Â Â Â Â Â Â ?Â closeÂ :Â 1
BuyQuanTityÂ Â Â Â Â Â Â Â Â =Â BuyQÂ Â /Â BuyFactor
SellQuanTityÂ Â Â Â Â Â Â Â =Â SellQÂ /Â SellFactor
//Â â€”â€”â€”â€”â€”Â WidthÂ betweenÂ levels
floatÂ GridWidthÂ Â Â Â Â =Â WOptionÂ ==Â 'PRICE'Â ?Â WidthÂ :Â PPÂ *Â (Width/100)
//Â â€”â€”â€”â€”â€”Â OriginÂ fromÂ RoundedÂ PivotÂ PointsÂ orÂ lastÂ Sell
varÂ floatÂ PPdownOriginÂ =Â na
PPdownOriginÂ Â Â Â Â Â Â Â :=Â floor(PPÂ /Â GridWidth)Â *Â GridWidth
PPdownOriginÂ Â Â Â Â Â Â Â :=Â (fixnan(FinalSellPrice[1])Â <=Â PPÂ ?Â (floor(fixnan(FinalSellPrice[1])Â /Â GridWidth)Â *Â GridWidth)Â -Â GridWidthÂ :Â floor(PPÂ /Â GridWidth)Â *Â GridWidth)
//Â â€”â€”â€”â€”â€”Â OriginÂ fromÂ RoundedÂ PositionÂ Price
varÂ floatÂ PPupOriginÂ =Â na
PPupOriginÂ Â Â Â Â Â Â Â Â Â :=Â nz(PPupOrigin[1])
PPupOriginÂ Â Â Â Â Â Â Â Â Â :=Â (ceil(fixnan(AveragePrice[1])Â /Â GridWidth)Â *Â GridWidth)Â +Â GridWidth
//Â â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”Â PivotÂ Points
//Â â€”â€”â€”â€”â€”Â PivotÂ PointsÂ Period
resÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â ppPeriodÂ ==Â '15D'Â ?Â '15D'Â :Â ppPeriodÂ ==Â 'Week'Â ?Â 'W'Â :Â ppPeriodÂ ==Â 'Day'Â ?Â 'D'Â :Â 'M'
//Â â€”â€”â€”â€”â€”Â High,Â Low,Â CloseÂ Calc.Â 
//Â "FunctionÂ toÂ securelyÂ andÂ simplyÂ callÂ `security()`Â soÂ thatÂ itÂ neverÂ repaintsÂ andÂ neverÂ looksÂ ahead"Â (@PineCoders)
f_secureSecurity(_symbol,Â _res,Â _src)Â =>Â security(_symbol,Â _res,Â _src[1],Â lookaheadÂ =Â barmerge.lookahead_on)
phighÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â f_secureSecurity(syminfo.tickerid,Â res,Â high)
plowÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â f_secureSecurity(syminfo.tickerid,Â res,Â low)
pcloseÂ Â Â Â Â Â Â Â Â Â Â Â Â Â =Â f_secureSecurity(syminfo.tickerid,Â res,Â close)
//Â â€”â€”â€”â€”â€”Â FibonacciÂ PivotsÂ LevelÂ Calculation
PPÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â :=Â (phighÂ +Â plowÂ +Â pclose)Â /Â 3
//Â â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”Â GridÂ Strategy
//Â â€”â€”â€”â€”â€”Â GridÂ Calculation
fGrid(_1,Â _2,Â _n)Â =>
Â Â Â Â _aÂ =Â _1,Â _bÂ =Â _2,Â _cÂ =Â 0.0
Â Â Â Â forÂ _iÂ =Â 1Â toÂ _n
Â Â Â Â Â Â Â Â ifÂ _iÂ ==Â 1
Â Â Â Â Â Â Â Â Â Â Â Â _cÂ :=Â _a
Â Â Â Â Â Â Â Â else
Â Â Â Â Â Â Â Â Â Â Â Â _cÂ :=Â _aÂ +Â _b
Â Â Â Â Â Â Â Â _aÂ :=Â _c
//Â â€”â€”â€”â€”â€”Â BuyÂ atÂ betterÂ Price
fBuyCondition(_n)Â =>
Â Â Â Â varÂ floatÂ _ldownÂ =Â na
Â Â Â Â _ldownÂ :=Â nz(_ldown[1])
Â Â Â Â varÂ boolÂ _pbÂ =Â na
Â Â Â Â _pbÂ :=Â nz(_pb[1])
Â Â Â Â varÂ boolÂ _BuyConditionÂ =Â na
Â Â Â Â _BuyConditionÂ :=Â nz(_BuyCondition[1])
Â Â Â Â forÂ _iÂ =Â 1Â toÂ _n
Â Â Â Â Â Â Â Â _ldownÂ :=Â fGrid(PPdownOrigin,Â -GridWidth,Â _i)
Â Â Â Â Â Â Â Â _pbÂ Â Â Â :=Â crossunder(low,Â _ldown)Â andÂ highÂ >=Â _ldown
Â Â Â Â Â Â Â Â _BuyConditionÂ :=Â na(FinalOpenPrice)Â ?Â _pbÂ :Â _pbÂ andÂ _ldownÂ <Â (FinalOpenPrice[1]Â -Â GridWidthÂ /Â 4)
Â Â Â Â _BuyCondition
//Â â€”â€”â€”â€”â€”Â SellÂ atÂ betterÂ Price
fSellCondition(_n)Â =>
Â Â Â Â varÂ floatÂ _lupÂ =Â na
Â Â Â Â _lupÂ :=Â nz(_lup[1])
Â Â Â Â varÂ boolÂ Â _psÂ =Â na
Â Â Â Â _psÂ :=Â nz(_ps[1])
Â Â Â Â varÂ boolÂ _SellConditionÂ =Â na
Â Â Â Â _SellConditionÂ :=Â nz(_SellCondition[1])
Â Â Â Â forÂ _iÂ =Â 1Â toÂ _n
Â Â Â Â Â Â Â Â _lupÂ :=Â fGrid(PPupOrigin,Â GridWidth,Â _i)
Â Â Â Â Â Â Â Â _psÂ Â :=Â crossover(high,Â _lup)Â andÂ lowÂ <=Â _lup
Â Â Â Â Â Â Â Â _SellConditionÂ :=Â na(FinalOpenPrice)Â ?Â _psÂ :Â _psÂ andÂ _lupÂ >Â (FinalOpenPrice[1]Â +Â GridWidthÂ /Â 4)
Â Â Â Â _SellCondition
//Â â€”â€”â€”â€”â€”Â FinalÂ TradeÂ Price,Â AverageÂ PriceÂ &Â Backtest
forÂ _iÂ =Â 1Â toÂ 15
Â Â Â Â 
Â Â Â Â //Â Buys
Â Â Â Â ifÂ fBuyCondition(_i)
Â Â Â Â Â Â Â Â FinalBuyPriceÂ Â Â Â Â Â Â :=Â fGrid(PPdownOrigin,Â -GridWidth,Â _i)
Â Â Â Â Â Â Â Â FinalSellPriceÂ Â Â Â Â Â :=Â na
Â Â Â Â Â Â Â Â FinalOpenPriceÂ Â Â Â Â Â :=Â fGrid(PPdownOrigin,Â -GridWidth,Â _i)
Â Â Â Â Â Â Â Â nBuysÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â :=Â nBuysÂ +Â 1
Â Â Â Â Â Â Â Â nSellsÂ Â Â Â Â Â Â Â Â Â Â Â Â Â :=Â na
Â Â Â Â Â Â Â Â sumBuyÂ Â Â Â Â Â Â Â Â Â Â Â Â Â :=Â FinalOpenPriceÂ *Â BuyQuanTityÂ +Â nz(sumBuy[1])
Â Â Â Â Â Â Â Â sumQtyBuyÂ Â Â Â Â Â Â Â Â Â Â :=Â BuyQuanTityÂ +Â nz(sumQtyBuy[1])
Â Â Â Â Â Â Â Â AveragePriceÂ Â Â Â Â Â Â Â :=Â sumBuyÂ /Â sumQtyBuy
Â Â Â Â Â Â Â Â ColorÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â :=Â color.lime
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â //Â NumberingÂ Â Â Â 
Â Â Â Â Â Â Â Â label.new(xÂ Â Â Â Â Â Â Â Â =Â time,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â yÂ Â Â Â Â Â Â Â Â =Â FinalOpenPrice,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â textÂ Â Â Â Â Â =Â 'Â Â Â Â 'Â +Â tostring(nBuys),Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â textcolorÂ =Â color.lime,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â styleÂ Â Â Â Â =Â label.style_none,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â xlocÂ Â Â Â Â Â =Â xloc.bar_time,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ylocÂ Â Â Â Â Â =Â yloc.price,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â sizeÂ Â Â Â Â Â =Â size.small)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â //Â BacktestÂ Buys
Â Â Â Â Â Â Â Â strategy.entry("BUY",Â strategy.long,Â qtyÂ =Â BuyQuanTity)
Â Â Â Â 
Â Â Â Â else
Â Â Â Â 
Â Â Â Â Â Â Â Â //Â SellsÂ Â Â Â 
Â Â Â Â Â Â Â Â ifÂ fSellCondition(_i)
Â Â Â Â Â Â Â Â Â Â Â Â FinalBuyPriceÂ Â Â Â Â Â Â :=Â na
Â Â Â Â Â Â Â Â Â Â Â Â FinalSellPriceÂ Â Â Â Â Â :=Â fGrid(PPupOrigin,Â GridWidth,Â _i)
Â Â Â Â Â Â Â Â Â Â Â Â FinalOpenPriceÂ Â Â Â Â Â :=Â fGrid(PPupOrigin,Â GridWidth,Â _i)
Â Â Â Â Â Â Â Â Â Â Â Â nBuysÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â :=Â na
Â Â Â Â Â Â Â Â Â Â Â Â nSellsÂ Â Â Â Â Â Â Â Â Â Â Â Â Â :=Â nSellsÂ +Â 1
Â Â Â Â Â Â Â Â Â Â Â Â sumBuyÂ Â Â Â Â Â Â Â Â Â Â Â Â Â :=Â na
Â Â Â Â Â Â Â Â Â Â Â Â sumQtyBuyÂ Â Â Â Â Â Â Â Â Â Â :=Â na
Â Â Â Â Â Â Â Â Â Â Â Â ColorÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â :=Â color.orange
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â //Â NumberingÂ Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â label.new(xÂ Â Â Â Â Â Â Â Â =Â time,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â yÂ Â Â Â Â Â Â Â Â =Â FinalOpenPrice,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â textÂ Â Â Â Â Â =Â 'Â Â Â Â 'Â +Â tostring(nSells),Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â textcolorÂ =Â color.orange,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â styleÂ Â Â Â Â =Â label.style_none,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â xlocÂ Â Â Â Â Â =Â xloc.bar_time,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ylocÂ Â Â Â Â Â =Â yloc.price,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â sizeÂ Â Â Â Â Â =Â size.small)
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â //Â BacktestÂ Sells
Â Â Â Â Â Â Â Â Â Â Â Â strategy.close("BUY",Â qtyÂ =Â SellTypeÂ !=Â "%Â EQUITY"Â ?Â SellQuanTityÂ :Â na,Â qty_percentÂ =Â (SellTypeÂ ==Â "%Â EQUITY"Â ?Â SellQuanTityÂ :Â na),Â commentÂ =Â "SELL")
//Â â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”Â Plotting
//Â â€”â€”â€”â€”â€”Â PlottingÂ PivotÂ Points
plot(PP,Â titleÂ Â =Â "PP",Â styleÂ =Â plot.style_circles,Â colorÂ =Â color.aqua,Â linewidthÂ =Â 2)
//Â â€”â€”â€”â€”â€”Â PlottingÂ theÂ averageÂ price
plot(nBuysÂ >Â 1Â ?Â AveragePrice[1]Â :Â na,Â titleÂ =Â "AverageÂ Price",Â styleÂ =Â plot.style_circles,Â colorÂ =Â color.fuchsia,Â linewidthÂ =Â 2)
//Â â€”â€”â€”â€”â€”Â BuyÂ Shapes
fPlotBuySell(_n)Â =>
Â Â Â Â ifÂ fBuyCondition(_n)
Â Â Â Â Â Â Â Â fGrid(PPdownOrigin,Â -GridWidth,Â _n)
Â Â Â Â else
Â Â Â Â Â Â Â Â ifÂ fSellCondition(_n)
Â Â Â Â Â Â Â Â Â Â Â Â fGrid(PPupOrigin,Â GridWidth,Â _n)
Â Â Â Â Â Â Â Â 
plotshape(fPlotBuySell(1),Â Â titleÂ =Â "Buy/SellÂ 1",Â Â styleÂ =Â shape.diamond,Â locationÂ =Â location.absolute,Â colorÂ =Â Color,Â sizeÂ =Â size.tiny)
plotshape(fPlotBuySell(2),Â Â titleÂ =Â "Buy/SellÂ 2",Â Â styleÂ =Â shape.diamond,Â locationÂ =Â location.absolute,Â colorÂ =Â Color,Â sizeÂ =Â size.tiny)
plotshape(fPlotBuySell(3),Â Â titleÂ =Â "Buy/SellÂ 3",Â Â styleÂ =Â shape.diamond,Â locationÂ =Â location.absolute,Â colorÂ =Â Color,Â sizeÂ =Â size.tiny)
plotshape(fPlotBuySell(4),Â Â titleÂ =Â "Buy/SellÂ 4",Â Â styleÂ =Â shape.diamond,Â locationÂ =Â location.absolute,Â colorÂ =Â Color,Â sizeÂ =Â size.tiny)
plotshape(fPlotBuySell(5),Â Â titleÂ =Â "Buy/SellÂ 5",Â Â styleÂ =Â shape.diamond,Â locationÂ =Â location.absolute,Â colorÂ =Â Color,Â sizeÂ =Â size.tiny)
plotshape(fPlotBuySell(6),Â Â titleÂ =Â "Buy/SellÂ 6",Â Â styleÂ =Â shape.diamond,Â locationÂ =Â location.absolute,Â colorÂ =Â Color,Â sizeÂ =Â size.tiny)
plotshape(fPlotBuySell(7),Â Â titleÂ =Â "Buy/SellÂ 7",Â Â styleÂ =Â shape.diamond,Â locationÂ =Â location.absolute,Â colorÂ =Â Color,Â sizeÂ =Â size.tiny)
plotshape(fPlotBuySell(8),Â Â titleÂ =Â "Buy/SellÂ 8",Â Â styleÂ =Â shape.diamond,Â locationÂ =Â location.absolute,Â colorÂ =Â Color,Â sizeÂ =Â size.tiny)
plotshape(fPlotBuySell(9),Â Â titleÂ =Â "Buy/SellÂ 9",Â Â styleÂ =Â shape.diamond,Â locationÂ =Â location.absolute,Â colorÂ =Â Color,Â sizeÂ =Â size.tiny)
plotshape(fPlotBuySell(10),Â titleÂ =Â "Buy/SellÂ 10",Â styleÂ =Â shape.diamond,Â locationÂ =Â location.absolute,Â colorÂ =Â Color,Â sizeÂ =Â size.tiny)
plotshape(fPlotBuySell(11),Â titleÂ =Â "Buy/SellÂ 11",Â styleÂ =Â shape.diamond,Â locationÂ =Â location.absolute,Â colorÂ =Â Color,Â sizeÂ =Â size.tiny)
plotshape(fPlotBuySell(12),Â titleÂ =Â "Buy/SellÂ 12",Â styleÂ =Â shape.diamond,Â locationÂ =Â location.absolute,Â colorÂ =Â Color,Â sizeÂ =Â size.tiny)
plotshape(fPlotBuySell(13),Â titleÂ =Â "Buy/SellÂ 13",Â styleÂ =Â shape.diamond,Â locationÂ =Â location.absolute,Â colorÂ =Â Color,Â sizeÂ =Â size.tiny)
plotshape(fPlotBuySell(14),Â titleÂ =Â "Buy/SellÂ 14",Â styleÂ =Â shape.diamond,Â locationÂ =Â location.absolute,Â colorÂ =Â Color,Â sizeÂ =Â size.tiny)
plotshape(fPlotBuySell(15),Â titleÂ =Â "Buy/SellÂ 15",Â styleÂ =Â shape.diamond,Â locationÂ =Â location.absolute,Â colorÂ =Â Color,Â sizeÂ =Â size.tiny)
//Â â€”â€”â€”â€”â€”Â PlottingÂ LinesÂ underÂ PP
fBuySellLevel(_n)Â =>
Â Â Â Â ifÂ lowÂ <Â fGrid(PPdownOrigin,Â -GridWidth,Â _n)Â andÂ PPÂ >Â fGrid(PPdownOrigin,Â -GridWidth,Â _n)
Â Â Â Â Â Â Â Â fGrid(PPdownOrigin,Â -GridWidth,Â _n)
Â Â Â Â else
Â Â Â Â Â Â Â Â ifÂ highÂ >Â fGrid(PPupOrigin,Â GridWidth,Â _n)Â andÂ PPÂ <Â fGrid(PPupOrigin,Â GridWidth,Â _n)
Â Â Â Â Â Â Â Â Â Â Â Â fGrid(PPupOrigin,Â GridWidth,Â _n)
Â Â Â Â Â Â Â Â 
plot(fBuySellLevel(1),Â Â titleÂ =Â "LevelÂ down/upÂ 1",Â Â styleÂ =Â plot.style_circles,Â colorÂ =Â highÂ >Â PPÂ ?Â color.greenÂ :Â color.red)
plot(fBuySellLevel(2),Â Â titleÂ =Â "LevelÂ down/upÂ 2",Â Â styleÂ =Â plot.style_circles,Â colorÂ =Â highÂ >Â PPÂ ?Â color.greenÂ :Â color.red)
plot(fBuySellLevel(3),Â Â titleÂ =Â "LevelÂ down/upÂ 3",Â Â styleÂ =Â plot.style_circles,Â colorÂ =Â highÂ >Â PPÂ ?Â color.greenÂ :Â color.red)
plot(fBuySellLevel(4),Â Â titleÂ =Â "LevelÂ down/upÂ 4",Â Â styleÂ =Â plot.style_circles,Â colorÂ =Â highÂ >Â PPÂ ?Â color.greenÂ :Â color.red)
plot(fBuySellLevel(5),Â Â titleÂ =Â "LevelÂ down/upÂ 5",Â Â styleÂ =Â plot.style_circles,Â colorÂ =Â highÂ >Â PPÂ ?Â color.greenÂ :Â color.red)
plot(fBuySellLevel(6),Â Â titleÂ =Â "LevelÂ down/upÂ 6",Â Â styleÂ =Â plot.style_circles,Â colorÂ =Â highÂ >Â PPÂ ?Â color.greenÂ :Â color.red)
plot(fBuySellLevel(7),Â Â titleÂ =Â "LevelÂ down/upÂ 7",Â Â styleÂ =Â plot.style_circles,Â colorÂ =Â highÂ >Â PPÂ ?Â color.greenÂ :Â color.red)
plot(fBuySellLevel(8),Â Â titleÂ =Â "LevelÂ down/upÂ 8",Â Â styleÂ =Â plot.style_circles,Â colorÂ =Â highÂ >Â PPÂ ?Â color.greenÂ :Â color.red)
plot(fBuySellLevel(9),Â Â titleÂ =Â "LevelÂ down/upÂ 9",Â Â styleÂ =Â plot.style_circles,Â colorÂ =Â highÂ >Â PPÂ ?Â color.greenÂ :Â color.red)
plot(fBuySellLevel(10),Â titleÂ =Â "LevelÂ down/upÂ 10",Â styleÂ =Â plot.style_circles,Â colorÂ =Â highÂ >Â PPÂ ?Â color.greenÂ :Â color.red)
plot(fBuySellLevel(11),Â titleÂ =Â "LevelÂ down/upÂ 11",Â styleÂ =Â plot.style_circles,Â colorÂ =Â highÂ >Â PPÂ ?Â color.greenÂ :Â color.red)
plot(fBuySellLevel(12),Â titleÂ =Â "LevelÂ down/upÂ 12",Â styleÂ =Â plot.style_circles,Â colorÂ =Â highÂ >Â PPÂ ?Â color.greenÂ :Â color.red)
plot(fBuySellLevel(13),Â titleÂ =Â "LevelÂ down/upÂ 13",Â styleÂ =Â plot.style_circles,Â colorÂ =Â highÂ >Â PPÂ ?Â color.greenÂ :Â color.red)
plot(fBuySellLevel(14),Â titleÂ =Â "LevelÂ down/upÂ 14",Â styleÂ =Â plot.style_circles,Â colorÂ =Â highÂ >Â PPÂ ?Â color.greenÂ :Â color.red)
plot(fBuySellLevel(15),Â titleÂ =Â "LevelÂ down/upÂ 15",Â styleÂ =Â plot.style_circles,Â colorÂ =Â highÂ >Â PPÂ ?Â color.greenÂ :Â color.red)
//Â byÂ XaviZðŸ’¤
Expand (228 lines)