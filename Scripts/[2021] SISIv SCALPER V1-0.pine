Script Name: [2021] SISIv SCALPER V1-0
Author: SiSiFX
Description: script of a scalping crypto strategy
aim to capture very short reversal on low timeframe
PineScript code:

Pine Scriptâ„¢ strategy
[2021] SISIv SCALPER V1/0
Copy code
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
//@version=5
strategy('[2021]Â SISIvÂ SCALPERÂ V1/0',Â shorttitle='SISI',Â overlay=true)
importÂ algomojo/automation/7â€ŠasÂ automation
//
ATRÂ =Â ta.atr(14)Â 
lenÂ =Â input.int(15,Â minval=1,Â title='LengthÂ forÂ MainÂ Stochastic')
smoothKÂ =Â input.int(3,Â minval=1,Â title='SmoothKÂ forÂ MainÂ Stochastic')
smoothDÂ =Â input.int(9,Â minval=1,Â title='SmoothDÂ forÂ MainÂ Stochastic')
upLineÂ =Â input.int(90,Â minval=50,Â maxval=90,Â title='UpperÂ LineÂ Value?')
lowLineÂ =Â input.int(10,Â minval=10,Â maxval=50,Â title='LowerÂ LineÂ Value?')
useCurrentResÂ =Â input(true,Â title='UseÂ CurrentÂ ChartÂ Resolution?')
resCustomÂ =Â input.timeframe(title='UseÂ DifferentÂ Timeframe?Â UncheckÂ BoxÂ Above',Â defval='60')
toggleBreaksÂ =Â input(true,Â title='ShowÂ Breaks')
leftBarsÂ =Â input(15,Â title='LeftÂ BarsÂ ')
rightBarsÂ =Â input(15,Â title='RightÂ Bars')
volumeThreshÂ =Â input(20,Â title='VolumeÂ Threshold')
highUsePivotÂ =Â fixnan(ta.pivothigh(leftBars,Â rightBars)[1])
lowUsePivotÂ =Â fixnan(ta.pivotlow(leftBars,Â rightBars)[1])
r1Â =Â plot(highUsePivot,Â color=ta.change(highUsePivot)Â ?Â naÂ :Â #FF0000,Â linewidth=3,Â offset=-(rightBarsÂ +Â 1),Â title='Resistance')
s1Â =Â plot(lowUsePivot,Â color=ta.change(lowUsePivot)Â ?Â naÂ :Â #233dee,Â linewidth=3,Â offset=-(rightBarsÂ +Â 1),Â title='Support')
stopPerÂ =Â input(5.0,Â title='StopÂ LossÂ %')Â /Â 100
takePerÂ =Â input(10.0,Â title='TakeÂ ProfitÂ %')Â /Â 100
//VolumeÂ %
shortÂ =Â ta.ema(volume,Â 5)
longÂ =Â ta.ema(volume,Â 10)
oscÂ =Â 100Â *Â (shortÂ -Â long)Â /Â long
//Â ==============================Â CALCULATEÂ ATRÂ ==================================
f_ma(_source,Â _length,Â _atrSmoothingMode)Â =>
Â Â Â Â ifÂ _atrSmoothingModeÂ ==Â 'RMA'
Â Â Â Â Â Â Â Â ta.rma(_source,Â _length)
Â Â Â Â else
Â Â Â Â Â Â Â Â ifÂ _atrSmoothingModeÂ ==Â 'SMA'
Â Â Â Â Â Â Â Â Â Â Â Â ta.sma(_source,Â _length)
Â Â Â Â Â Â Â Â else
Â Â Â Â Â Â Â Â Â Â Â Â ifÂ _atrSmoothingModeÂ ==Â 'EMA'
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ta.ema(_source,Â _length)
Â Â Â Â Â Â Â Â Â Â Â Â else
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ta.wma(_source,Â _length)
//ResolutioonÂ forÂ MTF
resÂ =Â useCurrentResÂ ?Â timeframe.periodÂ :Â resCustom
//StochÂ formula
kÂ =Â ta.sma(ta.stoch(close,Â high,Â low,Â len),Â smoothK)
dÂ =Â ta.sma(k,Â smoothD)
outKÂ =Â request.security(syminfo.tickerid,Â res,Â k)
outDÂ =Â request.security(syminfo.tickerid,Â res,Â d)
//definitionsÂ forÂ Cross
aboveLineÂ =Â outKÂ >Â upLineÂ ?Â 1Â :Â 0
belowLineÂ =Â outKÂ <Â lowLineÂ ?Â 1Â :Â 0
crossUpÂ =Â outK[1]Â <Â outD[1]Â andÂ outK[1]Â <Â lowLine[1]Â andÂ outKÂ >Â outDÂ ?Â 1Â :Â 0
crossDnÂ =Â outK[1]Â >Â outD[1]Â andÂ outK[1]Â >Â upLine[1]Â andÂ outKÂ <Â outDÂ ?Â 1Â :Â 0
//defÂ secondÂ indi
c1Â =Â close[1]Â <Â open[1]Â andÂ closeÂ >Â open
c2Â =Â closeÂ >Â open[1]
c3Â =Â ta.lowest(low,Â 3)Â <Â ta.lowest(low,Â 50)[1]Â orÂ ta.lowest(low,Â 3)Â <Â ta.lowest(low,Â 50)[2]Â orÂ ta.lowest(low,Â 3)Â <Â ta.lowest(low,Â 50)[3]
c9Â =Â outK[1]Â <Â outD[1]Â andÂ outK[1]Â <Â lowLine[1]Â andÂ outKÂ >Â outDÂ ?Â 1Â :Â 0
buyÂ =Â c1Â andÂ c2Â andÂ c3Â andÂ c9Â 
//
c4Â =Â close[1]Â >Â open[1]Â andÂ closeÂ <Â open
c5Â =Â closeÂ <Â open[1]
c6Â =Â ta.highest(high,Â 3)Â >Â ta.highest(high,Â 50)[1]Â orÂ ta.highest(high,Â 3)Â >Â ta.highest(high,Â 50)[2]Â orÂ ta.highest(high,Â 3)Â >Â ta.highest(high,Â 50)[3]
c7Â =Â outK[1]Â >Â outD[1]Â andÂ outK[1]Â >Â upLine[1]Â andÂ outKÂ <Â outDÂ ?Â 1Â :Â 0
sellÂ =Â c4Â andÂ c5Â andÂ c6Â andÂ c7Â 
//
longConditionÂ =Â c1Â andÂ c2Â andÂ c3Â andÂ c9Â 
shortConditionÂ =Â c4Â andÂ c5Â andÂ c6Â andÂ c7Â 
plotshape(buyÂ ==Â 1,Â text='ğŸš€',Â style=shape.arrowup,Â location=location.belowbar,Â color=color.new(#32CD32,Â 0),Â textcolor=color.new(color.white,Â 0),Â offset=0,Â size=size.auto)
plotshape(sellÂ ==Â 1,Â text='ğŸ”¨',Â style=shape.arrowdown,Â location=location.abovebar,Â color=color.new(#FF0000,Â 0),Â textcolor=color.new(color.white,Â 0),Â offset=0,Â size=size.auto)
//
plotshape(buyÂ ==Â 1,Â title='BuyÂ Signal',Â text='BUY',Â textcolor=color.new(#FFFFFF,Â 0),Â style=shape.labelup,Â size=size.normal,Â location=location.belowbar,Â color=color.new(#1B8112,Â 0))
plotshape(sellÂ ==Â 1,Â title='SellÂ Signal',Â text='SELL',Â textcolor=color.new(#FFFFFF,Â 0),Â style=shape.labeldown,Â size=size.normal,Â location=location.abovebar,Â color=color.new(#FF5733,Â 0))
//
//Â ==============================Â ALERTSÂ ==================================
//alertcondition(sellÂ ==Â 1,Â title='Sell',Â message='Sell')
//alertcondition(buyÂ ==1,Â title='Buy',Â message='Buy')
longStopÂ =Â strategy.position_avg_priceÂ *Â (1Â -Â stopPer)
shortStopÂ =Â strategy.position_avg_priceÂ *Â (1Â +Â stopPer)
shortTakeÂ =Â strategy.position_avg_priceÂ *Â (1Â -Â takePer)
longTakeÂ =Â strategy.position_avg_priceÂ *Â (1Â +Â takePer)
strategy.entry("buy",Â strategy.long,Â when=longCondition)
strategy.entry("sell",Â strategy.short,Â when=shortCondition)
ifÂ strategy.position_sizeÂ >Â 0Â 
Â Â Â Â strategy.exit(id="CloseÂ Long",Â stop=longStop,Â limit=longTake)
ifÂ strategy.position_sizeÂ <Â 0Â 
Â Â Â Â strategy.exit(id="CloseÂ Short",Â stop=shortStop,Â limit=shortTake)
Â Â //alertcondition(longCondition,Â title='BuyÂ Signal',Â message="SISIBOTÂ SCALPÂ BuyÂ signal")
Â //alertcondition(CloseÂ Long,Â title='closeÂ long',Â message="SCALPÂ closeÂ long")
//Â alertcondition(sell,Â title="SellÂ Signal"Â ,message="SISIBOTÂ SCALPÂ SellÂ signal")
Â //alertcondition(CloseÂ Short,Â title="closeÂ short",Â message="SISIBOTÂ SCALPÂ closeÂ short")
Expand (113 lines)