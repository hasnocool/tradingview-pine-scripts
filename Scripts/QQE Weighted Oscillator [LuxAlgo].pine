Script Name: QQE Weighted Oscillator [LuxAlgo]
Author: LuxAlgo
Description: The QQE (Quantitative Qualitative Estimation) Weighted Oscillator improves on its original version by weighting the RSI based on the indications given by the trailing stop, requiring more effort in order for a cross with the trailing stop to occur.

ðŸ”¶  USAGE 

  

The QQE Weighted Oscillator is comprised of a smoothed RSI oscillator and a trailing stop derived...
PineScript code:

Pine Scriptâ„¢ indicator
QQE Weighted Oscillator [LuxAlgo]
Copy code
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
//Â ThisÂ workÂ isÂ licensedÂ underÂ aÂ Attribution-NonCommercial-ShareAlikeÂ 4.0Â InternationalÂ (CCÂ BY-NC-SAÂ 4.0)Â https://creativecommons.org/licenses/by-nc-sa/4.0/
//Â Â©Â LuxAlgo
//@version=5
indicator("QQEÂ WeightedÂ OscillatorÂ [LuxAlgo]",Â "LuxAlgoÂ -Â QQEÂ WeightedÂ Oscillator")
//------------------------------------------------------------------------------
//Settings
//-----------------------------------------------------------------------------{
lengthÂ =Â input.int(14,Â minvalÂ =Â 1)
factorÂ =Â input.float(4.236,Â minvalÂ =Â 0)
smoothÂ =Â input.int(5,Â minvalÂ =Â 1)
weightÂ =Â input.float(2)
srcÂ Â Â Â =Â input(close)
//Style
rsiCssÂ =Â input(#3179f5,Â 'RSI',Â groupÂ =Â 'Style')
tsBearCssÂ =Â input(color.red,Â 'TrailingÂ Stop',Â groupÂ =Â 'Style',Â inlineÂ =Â 'inline1')
tsBullCssÂ =Â input(color.teal,Â '',Â groupÂ =Â 'Style',Â inlineÂ =Â 'inline1')
//-----------------------------------------------------------------------------}
//WeightedÂ QQE
//-----------------------------------------------------------------------------{
varÂ tsÂ =Â 0.
varÂ rsiÂ =Â 0.
deltaÂ =Â srcÂ -Â src[1]
wÂ =Â nz(deltaÂ *Â (rsiÂ -Â ts)Â >Â 0Â ?Â weightÂ :Â 1,Â 1)
//Rsi
numÂ =Â ta.rma(deltaÂ *Â w,Â length)
denÂ =Â ta.rma(math.abs(deltaÂ *Â w),Â length)
rsiÂ :=Â 50Â *Â ta.ema(numÂ /Â den,Â smooth)Â +Â 50
//TrailingÂ stop
diffÂ =Â ta.rma(math.abs(rsiÂ -Â rsi[1]),Â length)
crossoverÂ =Â ta.crossover(rsi,Â ts)
crossunderÂ =Â ta.crossunder(rsi,Â ts)
tsÂ :=Â nz(crossoverÂ ?Â rsiÂ -Â diffÂ *Â factor
Â Â :Â crossunderÂ ?Â rsiÂ +Â diffÂ *Â factor
Â Â :Â rsiÂ >Â tsÂ ?Â math.max(rsiÂ -Â diffÂ *Â factor,Â ts)
Â Â :Â math.min(rsiÂ +Â diffÂ *Â factor,Â ts),Â rsi)
//-----------------------------------------------------------------------------}
//Plots
//-----------------------------------------------------------------------------{
cssÂ =Â rsiÂ >Â tsÂ ?Â tsBullCssÂ :Â tsBearCss
plot_rsiÂ =Â plot(rsi,Â 'RSI',Â rsiCss)
plot_tsÂ Â =Â plot(ts,Â 'TralingÂ Stop',Â css)
fill(plot_rsi,Â plot_ts,Â rsi,Â ts,Â color.new(rsiCss,Â 50),Â color.new(css,Â 50))
hline(70)
hline(30)
//-----------------------------------------------------------------------------}
Expand (60 lines)