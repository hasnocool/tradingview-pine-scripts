Script Name: Percentage Change strategy w-BG color
Author: BlitzTrade8
Description: The Percentage Change Method has historically been very effectively used by analysts on very long time horizons and very extreme percentage changes, for example a -6% or more drop in any index doesn't happen very often but it has very large implications and that much selling pressure typically leads to more selling at least for a while as a consequence of it....
PineScript code:

Pine Scriptâ„¢ strategy
Percentage Change strategy w/BG color
Copy code
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
//@version=4
//Â createdÂ byÂ Oliver
strategy("PercentageÂ ChangeÂ strategyÂ w/BGÂ color",Â overlay=true,Â scale=scale.none,Â precision=2)
xÂ =Â input(5,Â titleÂ =Â 'xÂ candlesÂ difference',Â minvalÂ =Â 1)
trueChange1Â =Â (closeÂ -Â close[x])Â /Â close[x]Â *Â 100
percentChangePosÂ =Â input(0.4,Â title="PercentÂ Change")
//ifÂ (percentChangeÂ >Â trueChange)Â thenÂ SignalÂ Â 
plotChar1Â =Â ifÂ percentChangePosÂ >Â trueChange1
Â Â Â Â false
else
Â Â Â Â true
plotchar(series=plotChar1,Â char='ðŸ¥¶',Â color=color.green,Â location=location.top,Â sizeÂ =Â size.tinyÂ )
trueChange2Â =Â (closeÂ -Â close[x])Â /Â close[x]Â *Â 100
percentChangeNegÂ =Â input(-0.4,Â title="PercentÂ Change")
plotChar2Â =Â ifÂ percentChangeNegÂ <Â trueChange2
Â Â Â Â false
else
Â Â Â Â true
plotchar(series=plotChar2,Â char='ðŸ¥µ',Â color=color.red,Â location=location.top,Â sizeÂ =Â size.tiny)
//------------------------------------------------------------------------
UpColor()Â =>Â percentChangePosÂ <Â trueChange1
DownColor()Â =>Â percentChangeNegÂ >Â trueChange2
//UpÂ =Â percentChangePosÂ <Â trueChange1
//DownÂ =Â percentChangeNegÂ >Â trueChange2
colÂ =Â percentChangePosÂ <Â trueChange1Â ?Â color.limeÂ :Â percentChangeNegÂ >Â trueChange2Â ?Â color.redÂ :Â color.white
//--------
condColorÂ =Â percentChangePosÂ <Â trueChange1Â ?Â color.new(color.lime,50)Â :Â percentChangeNegÂ >Â trueChange2Â ?Â color.new(color.red,50)Â :Â na
//c_lineColorÂ =Â condUpÂ ?Â color.new(color.green,Â 97)Â :Â condDnÂ ?Â color.new(color.maroon,Â 97)Â :Â na
//barcolor(UpÂ ?Â color.blueÂ :Â DownÂ ?Â color.yellowÂ :Â color.gray,Â transp=70)
//BackgroundÂ Highlights
//bgcolor(condColor,Â transp=70)
//---------
barcolor(UpColor()Â ?Â color.lime:Â DownColor()Â ?Â color.redÂ :Â na)
bgcolor(UpColor()Â ?Â color.lime:Â DownColor()Â ?Â color.redÂ :Â na)
//------------------------------------------------------------------------
buyÂ =Â percentChangePosÂ <Â trueChange1
sellÂ =Â percentChangeNegÂ >Â trueChange2
//------------------------------------------------------------------------
///////////////Â AlertsÂ ///////////////Â 
alertcondition(buy,Â title='buy',Â message='Buy')
alertcondition(sell,Â title='sell',Â message='Sell')
//-------------------------------------------------
ifÂ (buy)
Â Â Â Â strategy.entry("MyÂ LongÂ EntryÂ Id",Â strategy.long)
ifÂ (sell)
Â Â Â Â strategy.entry("MyÂ ShortÂ EntryÂ Id",Â strategy.short)
///////////////////Â PlottingÂ ////////////////////////Â 
plotshape(buy,Â title="buy",Â text="Buy",Â color=color.green,Â style=shape.labelup,Â location=location.belowbar,Â size=size.small,Â textcolor=color.white,Â transp=0)Â Â //plotÂ forÂ buyÂ icon
plotshape(sell,Â title="sell",Â text="Sell",Â color=color.red,Â style=shape.labeldown,Â location=location.abovebar,Â size=size.small,Â textcolor=color.white,Â transp=0)
Expand (73 lines)