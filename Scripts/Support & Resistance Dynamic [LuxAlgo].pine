Script Name: Support & Resistance Dynamic [LuxAlgo]
Author: LuxAlgo
Description: The Support & Resistance Dynamic indicator aims to return real-time predictive support and resistance zones that are relevant to a detected trend. This makes this indicator similar to our previously published Predictive Ranges indicator.

Users can additionally extend the most recent historical support and resistance zones.

ğŸ”¶  USAGE 

  

Hypothetical resistance...
PineScript code:

Pine Scriptâ„¢ indicator
Support & Resistance Dynamic [LuxAlgo]
Copy code
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
//Â ThisÂ workÂ isÂ licensedÂ underÂ aÂ Attribution-NonCommercial-ShareAlikeÂ 4.0Â InternationalÂ (CCÂ BY-NC-SAÂ 4.0)Â https://creativecommons.org/licenses/by-nc-sa/4.0/
//Â Â©Â LuxAlgo
//@version=5
indicator("SupportÂ &Â ResistanceÂ DynamicÂ [LuxAlgo]",Â "LuxAlgoÂ -Â SupportÂ &Â ResistanceÂ Dynamic",Â overlayÂ =Â true)
//------------------------------------------------------------------------------
//Settings
//-----------------------------------------------------------------------------{
multÂ =Â input.float(8.,Â 'MultiplicativeÂ Factor',Â minvalÂ =Â 0,Â stepÂ =Â .5)
atrLenÂ =Â input.int(50,Â 'ATRÂ Length',Â minvalÂ =Â 0)
extLastÂ =Â input.int(4,Â 'ExtendÂ Last',Â minvalÂ =Â 0)
//Style
supCssÂ =Â input.color(#089981,Â 'Supportâ€„â€„â€„â€„',Â inlineÂ =Â 'sup',Â groupÂ =Â 'Style')
supAreaCssÂ =Â input(color.new(#089981,Â 80),Â 'Areas',Â inlineÂ =Â 'sup',Â groupÂ =Â 'Style')
resCssÂ =Â input.color(#f23645,Â 'Resistance',Â inlineÂ =Â 'res',Â groupÂ =Â 'Style')
resAreaCssÂ =Â input(color.new(#f23645,Â 80),Â 'Areas',Â inlineÂ =Â 'res',Â groupÂ =Â 'Style')
extLvlsÂ =Â input(true,Â 'ExtendÂ Levels',Â groupÂ =Â 'Style')
extAreaÂ =Â input(true,Â 'ExtendÂ Areas',Â groupÂ =Â 'Style')
//-----------------------------------------------------------------------------}
//UDT
//-----------------------------------------------------------------------------{
typeÂ sr
Â Â Â Â floatÂ y
Â Â Â Â floatÂ area
Â Â Â Â intÂ x
Â Â Â Â boolÂ support
//-----------------------------------------------------------------------------}
//Calculation
//-----------------------------------------------------------------------------{
varÂ recordsÂ =Â array.new<sr>(0)Â Â 
varÂ floatÂ avgÂ =Â close
varÂ hold_atrÂ =Â 0.
varÂ osÂ =Â 0
nÂ =Â bar_index
breakout_atrÂ =Â nz(ta.atr(atrLen))Â *Â mult
avgÂ :=Â math.abs(closeÂ -Â avg)Â >Â breakout_atrÂ ?Â closeÂ :Â avg
hold_atrÂ :=Â avgÂ ==Â closeÂ ?Â breakout_atrÂ :Â hold_atr
osÂ :=Â avgÂ >Â avg[1]Â ?Â 1Â :Â avgÂ <Â avg[1]Â ?Â 0Â :Â os
upper_resÂ =Â osÂ ==Â 0Â ?Â avgÂ +Â hold_atrÂ /Â multÂ :Â na
lower_resÂ =Â osÂ ==Â 0Â ?Â avgÂ +Â hold_atrÂ /Â multÂ /Â 2Â :Â na
upper_supÂ =Â osÂ ==Â 1Â ?Â avgÂ -Â hold_atrÂ /Â multÂ /Â 2:Â na
lower_supÂ =Â osÂ ==Â 1Â ?Â avgÂ -Â hold_atrÂ /Â multÂ :Â na
ifÂ closeÂ ==Â avg
Â Â Â Â ifÂ osÂ ==Â 1
Â Â Â Â Â Â Â Â records.unshift(sr.new(lower_sup,Â upper_sup,Â time,Â true))
Â Â Â Â else
Â Â Â Â Â Â Â Â records.unshift(sr.new(upper_res,Â lower_res,Â time,Â false))
//-----------------------------------------------------------------------------}
//Extensions
//-----------------------------------------------------------------------------{
varÂ linesÂ =Â array.new<line>(0)
varÂ boxesÂ =Â array.new<box>(0)
ifÂ barstate.isfirstÂ andÂ extLastÂ >Â 0
Â Â Â Â forÂ iÂ =Â 0Â toÂ extLast-1
Â Â Â Â Â Â Â Â ifÂ extLvls
Â Â Â Â Â Â Â Â Â Â Â Â lines.push(line.new(na,na,na,na,Â xloc.bar_time,Â styleÂ =Â line.style_dashed))
Â Â Â Â Â Â Â Â ifÂ extArea
Â Â Â Â Â Â Â Â Â Â Â Â boxes.push(box.new(na,na,na,na,na,Â xlocÂ =Â xloc.bar_time))
ifÂ barstate.islastÂ andÂ extLastÂ >Â 0
Â Â Â Â forÂ iÂ =Â 0Â toÂ extLast-1
Â Â Â Â Â Â Â Â get_srÂ =Â records.get(i)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â ifÂ extLvls
Â Â Â Â Â Â Â Â Â Â Â Â get_lineÂ =Â lines.get(i)
Â Â Â Â Â Â Â Â Â Â Â Â get_line.set_xy1(get_sr.x,Â get_sr.y)
Â Â Â Â Â Â Â Â Â Â Â Â get_line.set_xy2(time,Â get_sr.y)
Â Â Â Â Â Â Â Â Â Â Â Â get_line.set_color(get_sr.supportÂ ?Â supCssÂ :Â resCss)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â ifÂ extArea
Â Â Â Â Â Â Â Â Â Â Â Â get_boxÂ =Â boxes.get(i)
Â Â Â Â Â Â Â Â Â Â Â Â get_box.set_lefttop(get_sr.x,Â get_sr.area)
Â Â Â Â Â Â Â Â Â Â Â Â get_box.set_rightbottom(time,Â get_sr.y)
Â Â Â Â Â Â Â Â Â Â Â Â get_box.set_bgcolor(get_sr.supportÂ ?Â supAreaCssÂ :Â resAreaCss)
//-----------------------------------------------------------------------------}
//Plots
//-----------------------------------------------------------------------------{
//PlotÂ supports
plot_upper_supÂ =Â plot(upper_sup,Â 'UpperÂ Support',Â na
Â Â ,Â styleÂ =Â plot.style_linebr)
plot_lower_supÂ =Â plot(lower_sup,Â 'LowerÂ Support',Â closeÂ ==Â avgÂ ?Â naÂ :Â supCss
Â Â ,Â styleÂ =Â plot.style_linebr)
//PlotÂ resistances
plot_upper_resÂ =Â plot(upper_res,Â 'UpperÂ Resistance',Â closeÂ ==Â avgÂ ?Â naÂ :Â resCss
Â Â ,Â styleÂ =Â plot.style_linebr)
plot_lower_resÂ =Â plot(lower_res,Â 'LowerÂ Resistance',Â na
Â Â ,Â styleÂ =Â plot.style_linebr)
//Fills
fill(plot_upper_sup,Â plot_lower_sup,Â supAreaCss,Â 'SupportÂ Area')
fill(plot_upper_res,Â plot_lower_res,Â resAreaCss,Â 'ResistanceÂ Area')
//-----------------------------------------------------------------------------}
Expand (107 lines)