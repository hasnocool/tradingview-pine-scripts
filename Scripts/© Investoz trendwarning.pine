Script Name: Â© Investoz trendwarning
Author: Investoz
Description: The indicator is built as an educational purpose and is therefore not a recommendation for buying/selling shares. 

The idea is to create a visual form in a graph that shows if there is any trend, both positive and negative. A dialog box with a warning tells you what trend prevails. 

In the code, there is an opportunity to take a position or go out of position if...
PineScript code:

Pine Scriptâ„¢ strategy
Â© Investoz trendwarning
Copy code
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
//Â ThisÂ sourceÂ codeÂ isÂ subjectÂ toÂ theÂ termsÂ ofÂ theÂ MozillaÂ PublicÂ LicenseÂ 2.0Â atÂ https://mozilla.org/MPL/2.0/
//Â Â©Â Investoz
//Â IndikatornÂ Ã¤rÂ byggdÂ somÂ ettÂ utbildningsyfteÂ ochÂ Ã¤rÂ dÃ¤rfÃ¶rÂ ingenÂ rekommendationÂ fÃ¶rÂ kÃ¶p/sÃ¤ljÂ avÂ aktier.Â TankenÂ Ã¤rÂ attÂ skapaÂ enÂ visuellÂ formÂ iÂ enÂ graf
//Â somÂ visarÂ omÂ detÂ finnsÂ nÃ¥gonÂ trendÂ sÃ¥vÃ¤lÂ positivÂ somÂ negativ.Â EnÂ dialogrutaÂ medÂ enÂ varningÂ talarÂ omÂ vilkenÂ trendÂ somÂ rÃ¥der.Â IÂ kodenÂ finnsÂ enÂ mÃ¶jlighet
//Â attÂ taÂ positionÂ ellerÂ gÃ¥Â urÂ positionÂ omÂ manÂ villÂ skapaÂ enÂ startegiÂ kringÂ dennaÂ trendindikator.Â RekommenderarÂ dockÂ starktÂ attÂ inteÂ enbartÂ fÃ¶rlitaÂ sigÂ pÃ¥Â denna
//Â indikatorÂ somÂ beslutÂ fÃ¶rÂ kÃ¶p/sÃ¤ljÂ dÃ¥Â resultatenÂ blirÂ negativaÂ omÂ manÂ kÃ¶perÂ pÃ¥Â psoitivÂ trendÂ ochÂ sÃ¤ljerÂ pÃ¥Â negativÂ trend.Â DetÂ mÃ¥steÂ kombinerasÂ medÂ andraÂ idÃ©er
//Â ochÂ dÃ¤rfÃ¶rÂ fungerarÂ dennaÂ skriptÂ merÂ somÂ ettÂ komplementÂ tillÂ sinÂ egenÂ strategi.
//Â DetÂ Ã¤rÂ frittÂ framÂ fÃ¶rÂ vemÂ somÂ helstÂ attÂ anvÃ¤ndaÂ sigÂ avÂ dennaÂ indikator.Â Â 
//@version=4
//SkaparÂ enÂ strategiskriptÂ medÂ 1Â %Â avÂ egetÂ kapitalÂ somÂ ettÂ exempel.Â DettaÂ gÃ¥rÂ attÂ Ã¤ndraÂ iÂ skriptetsÂ instÃ¤llningar,Â vÃ¤ljÂ egenskaperÂ ochÂ sedanÂ Ã¤ndraÂ orderstorlek
//tillÂ ettÂ annatÂ vÃ¤rdeÂ avÂ %Â pÃ¥Â egetÂ kapital.
strategy("Â©Â InvestozÂ TrendÂ Warning",Â overlay=true,Â initial_capital=100000,Â default_qty_typeÂ =Â strategy.percent_of_equity,Â default_qty_valueÂ =Â 10,Â pyramidingÂ =Â 0,Â margin_longÂ =Â 0.5)
//LÃ¤ggerÂ tillÂ inmatningarÂ tillÂ skriptindikatorn.Â AnvÃ¤ndarenÂ kanÂ seÂ ochÂ redigeraÂ inmatningarÂ iÂ objektdialogenÂ efterÂ egetÂ val.
ema1Â =Â input(21,Â minval=1,Â maxval=500,Â title="LilaÂ linje")
valema1=input(true,Â title="VisaÂ lilaÂ linje")
ema2Â =Â input(34,Â minval=1,Â maxval=500,Â title="BlÃ¥Â linje")
valema2=input(true,Â title="VisaÂ blÃ¥Â linje")
ema3Â =Â input(55,Â minval=1,Â maxval=500,Â title="GrÃ¶nÂ linje")
valema3=input(true,Â title="VisaÂ grÃ¶nÂ linje")
ema4Â =Â input(89,Â minval=1,Â maxval=500,Â title="GulÂ linje")
valema4=input(true,Â title="VisaÂ gulÂ linje")
ema5Â =Â input(141,Â minval=1,Â maxval=500,Â title="OrangeÂ linje")
valema5=input(true,Â title="VisaÂ orangeÂ linje")
ema6Â =Â input(230,Â minval=1,Â maxval=500,Â title="RÃ¶dÂ linje")
valema6=input(true,Â title="VisaÂ rÃ¶dÂ linje")
ema7Â =Â input(371,Â minval=1,Â maxval=500,Â title="RÃ¶dÂ linje")
valema7=input(true,Â title="VisaÂ rÃ¶dÂ linje")
//InmatningarÂ fÃ¶rÂ antalÂ staplar
startbarÂ =Â input(1,Â minval=1,Â title="FirstÂ Bar")
EndbarÂ =Â bar_indexÂ +Â 1
//KÃ¤llaÂ input,Â stÃ¤ngning.Â AnvÃ¤ndarenÂ kanÂ sjÃ¤lvÂ bytaÂ tillÂ vilkenÂ kÃ¤llaÂ somÂ Ã¶nskas.
srcÂ =Â input(close,Â title="Source")
//AntalÂ staplarÂ sedanÂ denÂ lÃ¤ngstaÂ emaÂ bÃ¶rjadeÂ ochÂ framÃ¥t.Â 
tid=EndbarÂ +Â startbarÂ -Â 1
//EMA
aema1Â =Â ema(src,Â ema1)
bema2Â =Â ema(src,Â ema2)
cema3Â =Â ema(src,Â ema3)
dema4Â =Â ema(src,Â ema4)
eema5Â =Â ema(src,Â ema5)
fema6Â =Â ema(src,Â ema6)
gema7Â =Â ema(src,Â ema7)
//SkriverÂ utÂ linjerÂ iÂ diagrammetÂ omÂ fÃ¶rhÃ¥llandetÂ Ã¤rÂ sant,Â annarsÂ falskt.
h=plot(valema1Â ?Â aema1Â :Â na,Â title="LilaÂ linje",Â style=plot.style_line,Â linewidth=1,Â color=#7b9b97)
i=plot(valema2Â ?Â bema2Â :Â na,Â title="BlÃ¥Â linje",Â style=plot.style_line,Â linewidth=1,Â color=#a2b6b3)
j=plot(valema3Â ?Â cema3Â :Â na,Â title="GrÃ¶nÂ linje",Â style=plot.style_line,Â linewidth=1,Â color=#d9e5e3)
k=plot(valema4Â ?Â dema4Â :Â na,Â title="GulÂ linje",Â style=plot.style_line,Â linewidth=1,Â color=#ff8383)
l=plot(valema5Â ?Â eema5Â :Â na,Â title="OrangeÂ linje",Â style=plot.style_line,Â linewidth=1,Â color=#dc6262)
m=plot(valema6Â ?Â fema6Â :Â na,Â title="RÃ¶dÂ linje",Â style=plot.style_line,Â linewidth=1,Â color=#b71c1c)
n=plot(valema7Â ?Â gema7Â :Â na,Â title="BrunÂ linje",Â style=plot.style_line,Â linewidth=1,Â color=color.maroon)
//FyllerÂ bakgrundenÂ mellanÂ tvÃ¥Â linjerÂ medÂ enÂ vissÂ fÃ¤rg.
fill(h,Â i,Â colorÂ =Â color.new(#7b9b97,34))
fill(i,Â j,Â colorÂ =Â color.new(#a2b6b3,34))
fill(j,Â k,Â colorÂ =Â color.new(#d9e5e3,34))
fill(k,Â l,Â colorÂ =Â color.new(#ff8383,34))
fill(l,Â m,Â colorÂ =Â color.new(#dc6262,34))
fill(m,Â n,Â colorÂ =Â color.new(#b71c1c,34))
//SkapaÂ enÂ algoritmÂ fÃ¶rÂ positivÂ trend
PositivTrendÂ =Â crossover(aema1,gema7)?1:0
TrendPositivÂ =Â ema(close,1)Â >Â aema1Â andÂ aema1Â >Â bema2?1:0
//SkapaÂ enÂ algoritmÂ fÃ¶rÂ negativÂ trend
NegativTrendÂ =Â crossunder(aema1,gema7)?1:0
TrendNegativÂ =Â ema(close,1)Â <Â aema1Â andÂ aema1Â <Â bema2?1:0
//SkaparÂ enÂ textrutaÂ medÂ varningstextÂ fÃ¶rÂ positivÂ trend
varningtextpositivÂ =Â "PositiveÂ Trend."+"\n"Â +Â "TakeÂ position"
ifÂ PositivTrend
Â Â Â Â varningpositiv=label.new(
Â Â Â Â Â bar_index,Â 
Â Â Â Â Â low,Â Â 
Â Â Â Â Â xloc=xloc.bar_index,Â 
Â Â Â Â Â yloc=yloc.price,
Â Â Â Â Â color=#7b9b97,Â 
Â Â Â Â Â textcolor=color.white,
Â Â Â Â Â text=varningtextpositiv,
Â Â Â Â Â style=label.style_label_down,
Â Â Â Â Â textalign=text.align_left)
//SkaparÂ enÂ textrutaÂ medÂ varningstextÂ fÃ¶rÂ negativÂ trend
varningtextnegativÂ =Â "NegativeÂ Trend."+"\n"Â +Â "CoverÂ theÂ positions"
ifÂ NegativTrend
Â Â Â Â varningnegativ=label.new(
Â Â Â Â Â bar_index,Â 
Â Â Â Â Â low,Â Â 
Â Â Â Â Â xloc=xloc.bar_index,Â 
Â Â Â Â Â yloc=yloc.price,
Â Â Â Â Â color=#b71c1c,Â 
Â Â Â Â Â textcolor=color.white,
Â Â Â Â Â text=varningtextnegativ,
Â Â Â Â Â style=label.style_label_up,
Â Â Â Â Â textalign=text.align_left)
//KÃ¶pÂ omÂ positivÂ trend
ifÂ (PositivTrend)Â 
Â Â Â Â strategy.entry("TakeÂ position",Â strategy.long,Â whenÂ =Â PositivTrend)
//SÃ¤ljÂ omÂ negativÂ trend
ifÂ (NegativTrend)
Â Â Â Â strategy.close("TakeÂ position",Â whenÂ =Â NegativTrend,Â comment="CloseÂ position")
//BerÃ¤kningÂ avÂ positivÂ trend
vspositiv(positiv)=>valuewhen(Endbar==startbar,positiv,0)
vepositiv(positiv)=>valuewhen(Endbar==Endbar,positiv,0)
positivmean(TrendPositiv)=>
Â Â Â Â csumpositivÂ =Â cum(TrendPositiv)
//Slut//Â Â Â 
Â Â Â Â aÂ =Â vepositiv(csumpositiv)
//Start//
Â Â Â Â bÂ =Â vspositiv(csumpositiv)
//SlutÂ -Â Start//Â 
Â Â Â Â (aÂ -Â b)/(tid)
positivmeanpositivÂ =Â positivmean(TrendPositiv)Â 
//BerÃ¤kningÂ avÂ negativÂ trend
vsnegativ(negativ)=>valuewhen(Endbar==startbar,negativ,0)
venegativ(negativ)=>valuewhen(Endbar==Endbar,negativ,0)
negativmean(TrendNegativ)=>
Â Â Â Â csumnegativÂ =Â cum(TrendNegativ)
//Slut//Â Â Â 
Â Â Â Â aÂ =Â venegativ(csumnegativ)
//Start//
Â Â Â Â bÂ =Â vsnegativ(csumnegativ)
//SlutÂ -Â Start//Â 
Â Â Â Â (aÂ -Â b)/(tid)
negativmeannegativÂ =Â negativmean(TrendNegativ)Â 
//InmatningÂ avÂ textÂ somÂ skaÂ inÂ iÂ texrutaÂ somÂ visarÂ antalÂ staplarÂ iÂ trend
loggaÂ =Â "\n"+"Â©Â Investoz:Â TrendÂ Warning"+Â "\n"
streckÂ =Â "==============================================="
totalastaplarÂ =Â "\n"Â +Â "TotalÂ numberÂ ofÂ days:Â "Â +Â tostring(tid)+Â "Â daysÂ "+"\n"+Â streckÂ +Â "\n"
totalpositivÂ =Â "TotalÂ numberÂ ofÂ daysÂ inÂ positiveÂ trendÂ "+"Â ğŸ“ˆÂ :Â "Â Â +tostring(positivmeanpositiv*tid,Â "##.##")Â +"Â daysÂ "Â +Â "\n"
totalnegativÂ =Â "\n"Â +Â "TotalÂ numberÂ ofÂ daysÂ inÂ negativeÂ trend"Â +Â "Â ğŸ“‰Â :Â "Â Â +tostring(negativmeannegativ*tid,Â "##.##")Â +"Â daysÂ "Â +"\n"
//TextrutaÂ fÃ¶rÂ antalÂ staplarÂ iÂ trend
ifÂ barstate.ishistory
Â Â Â Â barcountlbl=label.new(
Â Â Â Â Â bar_index,Â 
Â Â Â Â Â low,Â Â 
Â Â Â Â Â xloc=xloc.bar_index,Â 
Â Â Â Â Â yloc=yloc.price,
Â Â Â Â Â color=color.white,Â 
Â Â Â Â Â textcolor=color.black,
Â Â Â Â Â text=streck+logga+streck+totalastaplar+totalpositiv+streck+totalnegativ+streck,
Â Â Â Â Â style=label.style_label_lower_left,
Â Â Â Â Â textalign=text.align_left)
Â Â Â Â label.delete(barcountlbl[1])
//////////////////////////////////Â 
Expand (139 lines)