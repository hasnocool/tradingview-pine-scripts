Script Name: Instrument-Z (3Commas Bot)
Author: UnknownUnicorn28067390
Description: Instrument-Z is what I am currently using as my 3Commas Bot.

It allows you to customize signals from 3 indicators; Crossing MA's, Stochastic RSI, and WaveTrend.
Better yet, it allows you to setup these signals separately depending on whether the Trend MA is going up or down.
So there are 2 sets of inputs for everything, Uptrend inputs and Downtrend inputs.
I have...
PineScript code:

Pine Scriptâ„¢ strategy
Instrument-Z (3Commas Bot)
Copy code
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
////////////////////////////////////////////////////////////////////////////////
//STARTâ–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
c="â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—Â â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—Â Â â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—Â Â Â â–ˆâ–ˆâ•—Â Â Â â–ˆâ–ˆâ•—Â â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—Â â–ˆâ–ˆâ•—Â Â Â â–ˆâ–ˆâ•—Â â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—Â â–ˆâ–ˆâ•—Â Â â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—Â Â â–ˆâ–ˆâ•—"
o="â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—Â Â â–ˆâ–ˆâ•‘Â Â Â â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘Â Â Â â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•Â â–ˆâ–ˆâ•‘Â Â â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•—Â â–ˆâ–ˆâ•‘"
d="Â Â â–ˆâ–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘Â Â â•šâ•â•Â Â â•šâ–ˆâ–ˆâ•—Â â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘Â Â Â â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘Â Â â–ˆâ–ˆâ•—Â â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘"
e="â–ˆâ–ˆâ•”â•â•â•Â Â â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘Â Â â–ˆâ–ˆâ•—Â Â Â â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•Â â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘Â Â Â â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘Â Â â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘"
r="â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘Â Â â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•Â Â Â Â â•šâ–ˆâ–ˆâ•”â•Â Â â–ˆâ–ˆâ•‘Â Â â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘Â Â â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘Â â•šâ–ˆâ–ˆâ–ˆâ•‘"
s="â•šâ•â•â•â•â•â•â•â•šâ•â•Â Â â•šâ•â•Â â•šâ•â•â•â•â•Â Â Â Â Â Â â•šâ•â•Â Â Â â•šâ•â•Â Â â•šâ•â•Â â•šâ•â•â•â•â•â•Â Â â•šâ•â•â•â•â•â•Â â•šâ•â•Â Â â•šâ•â•â•šâ•â•Â Â â•šâ•â•â•"
//@version=5
strategy("Instrument-Z",Â overlay=true,Â initial_capital=1600,Â default_qty_type=strategy.percent_of_equity,Â default_qty_value=30,Â commission_value=0.075)
//ENDâ–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
////////////////////////////////////////////////////////////////////////////////
//BARÂ COLORÂ ANDÂ EMAÂ AREAâ–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
//BARÂ COLOR
bullCcolorÂ =Â closeÂ >Â openÂ ?Â #80cbc4Â :Â na
bearCcolorÂ =Â closeÂ <Â openÂ ?Â #ef9a9aÂ :Â na
bullCÂ =Â closeÂ >Â open
bearCÂ =Â closeÂ <Â open
bullEÂ =Â bullCÂ andÂ bearC[1]Â andÂ closeÂ >Â open[1]Â ?Â color.new(#ffffff,Â 100)Â :Â bullCcolor
bearEÂ =Â bearCÂ andÂ bullC[1]Â andÂ closeÂ <Â open[1]Â ?Â color.new(#ffffff,Â 100)Â :Â bearCcolor
barcolor(bullE)
barcolor(bearE)
//EMAÂ 1
len1Â =Â 10
ema1Â =Â ta.ema(close,Â len1)
//EMAÂ 2
len2Â =Â 100
ema2Â =Â ta.ema(close,Â len2)
//EMAÂ COLORS
emacolorÂ =Â ema1Â >Â ema2Â ?Â #26a69aÂ :Â #ef5350
//EMAÂ PLOTS
ema1lineÂ =Â plot(ema1,Â title="EMAÂ 1",Â color=color.new(#ffffff,Â 100),Â editable=false)
ema2lineÂ =Â plot(ema2,Â title="EMAÂ 2",Â color=color.new(#ffffff,Â 100),Â editable=false)
fill(ema1line,Â ema2line,Â title="EMAÂ Area",Â color=color.new(emacolor,Â 90))
//ENDâ–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
////////////////////////////////////////////////////////////////////////////////
//INITIALÂ OPTIONSâ–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
srcÂ =Â input.source(defval=close,Â title="Source",Â group="SETUPÂ GUIDEÂ ATÂ YouTube.com/c/OscillateMatrix")
//tfrÂ =Â input.timeframe("",Â title="Resolution")
//request.security(syminfo.tickerid,Â tfr,Â expression,Â barmerge.gaps_on)
//POSITIONS
TradeDirÂ =Â input.string("LONG",Â title="TradeÂ Direction",Â options=["LONG",Â "SHORT"],Â group="POSITIONS")
TrendTradeÂ =Â input(false,Â "OnlyÂ TradeÂ withÂ Trend",Â group="POSITIONS")
//UPTRENDÂ PROFITÂ ANDÂ LOSS
UTsellProfÂ =Â input(true,Â title="OnlyÂ ExitÂ inÂ Profit",Â group="UPTRENDÂ ðŸ •Â PROFITÂ &Â LOSS")
UTminProfÂ =Â input.float(title="MinimumÂ ProfitÂ (%)",Â defval=1.1,Â minval=0,Â maxval=100,Â Â step=.1,Â group="UPTRENDÂ ðŸ •Â PROFITÂ &Â LOSS")Â /Â 100
UTuseTPÂ =Â input(true,Â Â title="UseÂ TakeÂ Profit",Â group="UPTRENDÂ ðŸ •Â PROFITÂ &Â LOSS")
UTTPpercÂ =Â input.float(title="TakeÂ ProfitÂ (%)",Â defval=11.1,Â minval=0,Â maxval=1000,Â step=.1,Â group="UPTRENDÂ ðŸ •Â PROFITÂ &Â LOSS")Â /Â 100
UTuseSLÂ =Â input(true,Â Â title="UseÂ StopÂ Loss",Â group="UPTRENDÂ ðŸ •Â PROFITÂ &Â LOSS")
UTSLpercÂ =Â input.float(title="StopÂ LossÂ (%)",Â defval=-3.7,Â minval=-50,Â maxval=0,Â step=.1,Â group="UPTRENDÂ ðŸ •Â PROFITÂ &Â LOSS")Â /Â 100
UTuseTEÂ =Â input(true,Â title="UseÂ TradeÂ Expiration",Â group="UPTRENDÂ ðŸ •Â PROFITÂ &Â LOSS")
UTTEbarsÂ =Â input.int(title="ExpireÂ AfterÂ (bars)",Â defval=92,Â minval=1,Â maxval=10000,Â group="UPTRENDÂ ðŸ •Â PROFITÂ &Â LOSS")
//DOWNTRENDÂ PROFITÂ ANDÂ LOSS
DTsellProfÂ =Â input(true,Â title="OnlyÂ ExitÂ inÂ Profit",Â group="DOWNTRENDÂ ðŸ —Â PROFITÂ &Â LOSS")
DTminProfÂ =Â input.float(title="MinimumÂ ProfitÂ (%)",Â defval=0.3,Â minval=0,Â maxval=100,Â Â step=.1,Â group="DOWNTRENDÂ ðŸ —Â PROFITÂ &Â LOSS")Â /Â 100
DTuseTPÂ =Â input(true,Â Â title="UseÂ TakeÂ Profit",Â group="DOWNTRENDÂ ðŸ —Â PROFITÂ &Â LOSS")
DTTPpercÂ =Â input.float(title="TakeÂ ProfitÂ (%)",Â defval=7.7,Â minval=0,Â maxval=1000,Â step=.1,Â group="DOWNTRENDÂ ðŸ —Â PROFITÂ &Â LOSS")Â /Â 100
DTuseSLÂ =Â input(true,Â Â title="UseÂ StopÂ Loss",Â group="DOWNTRENDÂ ðŸ —Â PROFITÂ &Â LOSS")
DTSLpercÂ =Â input.float(title="StopÂ LossÂ (%)",Â defval=-3.9,Â minval=-50,Â maxval=0,Â step=.1,Â group="DOWNTRENDÂ ðŸ —Â PROFITÂ &Â LOSS")Â /Â 100
DTuseTEÂ =Â input(false,Â title="UseÂ TradeÂ Expiration",Â group="DOWNTRENDÂ ðŸ —Â PROFITÂ &Â LOSS")
DTTEbarsÂ =Â input.int(title="ExpireÂ AfterÂ (bars)",Â defval=200,Â minval=1,Â maxval=10000,Â group="DOWNTRENDÂ ðŸ —Â PROFITÂ &Â LOSS")
//ENDâ–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
////////////////////////////////////////////////////////////////////////////////
//TRENDÂ MOVINGÂ AVERAGEâ–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
//TRENDÂ MA
ma(source,Â length,Â type)Â =>
Â Â Â Â Â typeÂ ==Â "SMA"Â Â ?Â ta.sma(source,Â length)Â :
Â Â Â Â Â typeÂ ==Â "EMA"Â Â ?Â ta.ema(source,Â length)Â :
Â Â Â Â Â typeÂ ==Â "RMA"Â Â ?Â ta.rma(source,Â length)Â :
Â Â Â Â Â typeÂ ==Â "HMA"Â Â ?Â ta.wma(2*ta.wma(source,Â length/2)-ta.wma(source,Â length),Â math.floor(math.sqrt(length)))Â :
Â Â Â Â Â typeÂ ==Â "WMA"Â Â ?Â ta.wma(source,Â length)Â :
Â Â Â Â Â typeÂ ==Â "VWMA"Â ?Â ta.vwma(source,Â length)Â :
Â Â Â Â Â na
mat_typeÂ Â Â =Â input.string("EMA",Â "TrendÂ MA",Â inline="TrendÂ MA",Â options=["SMA",Â "EMA",Â "RMA",Â "HMA",Â "WMA",Â "VWMA"],Â group="POSITIONS")
mat_lengthÂ =Â input.int(255,Â "",Â inline="TrendÂ MA",Â minval=1,Â step=5,Â group="POSITIONS")
matÂ =Â ma(src,Â mat_length,Â mat_type)
matcolorÂ =Â matÂ >Â mat[1]Â ?Â #26a69aÂ :Â #ef5350
matlineÂ =Â plot(mat,Â color=color.new(matcolor,Â 50),Â linewidth=2,Â title="TrendÂ MA")
matRevÂ =Â input(false,Â title="ExitÂ AfterÂ TrendÂ Reverses",Â group="POSITIONS")
matRevbarsÂ =Â input.int(10,Â "ExitÂ AfterÂ (bars)",Â group="POSITIONS")
OOTexitLÂ =Â matRevÂ andÂ matÂ <Â mat[matRevbars]
OOTexitSÂ =Â matRevÂ andÂ matÂ >Â mat[matRevbars]
//ENDâ–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
////////////////////////////////////////////////////////////////////////////////
//CROSSINGÂ MOVINGÂ AVERAGESâ–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
//UPTRENDÂ OPTIONS
//Cross
UTUsemaXÂ =Â input(false,Â "MovingÂ AverageÂ Cross",Â group="UPTRENDÂ ðŸ •Â MOVINGÂ AVERAGEÂ SIGNALS")
UTReqmaXscoreÂ =Â UTUsemaXÂ ?Â 1Â :Â 0
//Position
UTUsemaPÂ =Â input(true,Â "MovingÂ AverageÂ Position",Â group="UPTRENDÂ ðŸ •Â MOVINGÂ AVERAGEÂ SIGNALS")
UTReqmaPscoreÂ =Â UTUsemaPÂ ?Â 1Â :Â 0
//Histogram
UTUsemaHÂ =Â input(false,Â "MAÂ HistogramÂ Reverse",Â group="UPTRENDÂ ðŸ •Â MOVINGÂ AVERAGEÂ SIGNALS")
UTReqmaHscoreÂ =Â UTUsemaHÂ ?Â 1Â :Â 0
//DOWNTRENDÂ OPTIONS
//Cross
DTUsemaXÂ =Â input(false,Â "MovingÂ AverageÂ Cross",Â group="DOWNTRENDÂ ðŸ —Â MOVINGÂ AVERAGEÂ SIGNALS")
DTReqmaXscoreÂ =Â DTUsemaXÂ ?Â 1Â :Â 0
//Position
DTUsemaPÂ =Â input(true,Â "MovingÂ AverageÂ Position",Â group="DOWNTRENDÂ ðŸ —Â MOVINGÂ AVERAGEÂ SIGNALS")
DTReqmaPscoreÂ =Â DTUsemaPÂ ?Â 1Â :Â 0
//Histogram
DTUsemaHÂ =Â input(false,Â "MAÂ HistogramÂ Reverse",Â group="DOWNTRENDÂ ðŸ —Â MOVINGÂ AVERAGEÂ SIGNALS")
DTReqmaHscoreÂ =Â DTUsemaHÂ ?Â 1Â :Â 0
//UPTRENDÂ INPUTS
//MA1
UTma1_typeÂ Â Â =Â input.string("RMA",Â "MAÂ 1",Â inline="UTÂ MAÂ 1",Â options=["SMA",Â "EMA",Â "RMA",Â "HMA",Â "WMA",Â "VWMA"],Â group="UPTRENDÂ ðŸ •Â MOVINGÂ AVERAGEÂ SIGNALS")
UTma1_lengthÂ =Â input.int(5,Â "",Â inline="UTÂ MAÂ 1",Â minval=1,Â group="UPTRENDÂ ðŸ •Â MOVINGÂ AVERAGEÂ SIGNALS")
UTma1Â =Â ma(src,Â UTma1_length,Â UTma1_type)
UTma1ColorÂ =Â matÂ >Â mat[1]Â ?Â color.new(color.blue,Â 35)Â :Â color.new(color.blue,Â 100)
UTma1lineÂ =Â plot(UTma1,Â color=UTma1Color,Â title="UTÂ MAÂ 1")
//MA2
UTma2_typeÂ Â Â =Â input.string("HMA",Â "MAÂ 2",Â inline="UTÂ MAÂ 2",Â options=["SMA",Â "EMA",Â "RMA",Â "HMA",Â "WMA",Â "VWMA"],Â group="UPTRENDÂ ðŸ •Â MOVINGÂ AVERAGEÂ SIGNALS")
UTma2_lengthÂ =Â input.int(52,Â "",Â inline="UTÂ MAÂ 2",Â minval=1,Â group="UPTRENDÂ ðŸ •Â MOVINGÂ AVERAGEÂ SIGNALS")
UTma2Â =Â ma(src,Â UTma2_length,Â UTma2_type)
UTma2ColorÂ =Â matÂ >Â mat[1]Â ?Â color.new(color.purple,Â 35)Â :Â color.new(color.purple,Â 100)
UTma2lineÂ =Â plot(UTma2,Â color=UTma2Color,Â title="UTÂ MAÂ 2")
UTmahistÂ =Â UTma1Â -Â UTma2
//DOWNTRENDÂ INPUTS
//MA1
DTma1_typeÂ Â Â =Â input.string("RMA",Â "MAÂ 1",Â inline="DTÂ MAÂ 1",Â options=["SMA",Â "EMA",Â "RMA",Â "HMA",Â "WMA",Â "VWMA"],Â group="DOWNTRENDÂ ðŸ —Â MOVINGÂ AVERAGEÂ SIGNALS")
DTma1_lengthÂ =Â input.int(7,Â "",Â inline="DTÂ MAÂ 1",Â minval=1,Â group="DOWNTRENDÂ ðŸ —Â MOVINGÂ AVERAGEÂ SIGNALS")
DTma1Â =Â ma(src,Â DTma1_length,Â DTma1_type)
DTma1ColorÂ =Â matÂ >Â mat[1]Â ?Â color.new(color.blue,Â 100)Â :Â color.new(color.blue,Â 35)
DTma1lineÂ =Â plot(DTma1,Â color=DTma1Color,Â title="DTÂ MAÂ 1")
//MA2
DTma2_typeÂ Â Â =Â input.string("HMA",Â "MAÂ 2",Â inline="DTÂ MAÂ 2",Â options=["SMA",Â "EMA",Â "RMA",Â "HMA",Â "WMA",Â "VWMA"],Â group="DOWNTRENDÂ ðŸ —Â MOVINGÂ AVERAGEÂ SIGNALS")
DTma2_lengthÂ =Â input.int(54,Â "",Â inline="DTÂ MAÂ 2",Â minval=1,Â group="DOWNTRENDÂ ðŸ —Â MOVINGÂ AVERAGEÂ SIGNALS")
DTma2Â =Â ma(src,Â DTma2_length,Â DTma2_type)
DTma2ColorÂ =Â matÂ >Â mat[1]Â ?Â color.new(color.purple,Â 100)Â :Â color.new(color.purple,Â 35)
DTma2lineÂ =Â plot(DTma2,Â color=DTma2Color,Â title="DTÂ MAÂ 2")
DTmahistÂ =Â DTma1Â -Â DTma2
//UPTRENDÂ SIGNALS
UTmaXupÂ =Â UTUsemaXÂ andÂ UTma1Â >Â UTma2Â andÂ UTma1[1]Â <Â UTma2[1]Â ?Â 1Â :Â 0
UTmaXdnÂ =Â UTUsemaXÂ andÂ UTma1Â <Â UTma2Â andÂ UTma1[1]Â >Â UTma2[1]Â ?Â 1Â :Â 0
UTmaPupÂ =Â UTUsemaPÂ andÂ UTma1Â >Â UTma2Â ?Â 1Â :Â 0
UTmaPdnÂ =Â UTUsemaPÂ andÂ UTma1Â <Â UTma2Â ?Â 1Â :Â 0
UTmaHupÂ =Â UTUsemaHÂ andÂ UTmahistÂ >Â UTmahist[1]Â andÂ UTmahist[1]Â <Â UTmahist[2]Â ?Â 1Â :Â 0
UTmaHdnÂ =Â UTUsemaHÂ andÂ UTmahistÂ <Â UTmahist[1]Â andÂ UTmahist[1]Â >Â UTmahist[2]Â ?Â 1Â :Â 0
//DOWNTRENDÂ SIGNALS
DTmaXupÂ =Â DTUsemaXÂ andÂ DTma1Â >Â DTma2Â andÂ DTma1[1]Â <Â DTma2[1]Â ?Â 1Â :Â 0
DTmaXdnÂ =Â DTUsemaXÂ andÂ DTma1Â <Â DTma2Â andÂ DTma1[1]Â >Â DTma2[1]Â ?Â 1Â :Â 0
DTmaPupÂ =Â DTUsemaPÂ andÂ DTma1Â >Â DTma2Â ?Â 1Â :Â 0
DTmaPdnÂ =Â DTUsemaPÂ andÂ DTma1Â <Â DTma2Â ?Â 1Â :Â 0
DTmaHupÂ =Â DTUsemaHÂ andÂ DTmahistÂ >Â DTmahist[1]Â andÂ DTmahist[1]Â <Â DTmahist[2]Â ?Â 1Â :Â 0
DTmaHdnÂ =Â DTUsemaHÂ andÂ DTmahistÂ <Â DTmahist[1]Â andÂ DTmahist[1]Â >Â DTmahist[2]Â ?Â 1Â :Â 0
//ENDâ–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
////////////////////////////////////////////////////////////////////////////////
//STOCHASTICÂ RSIâ–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
//UPTRENDÂ OPTIONS
//Cross
UTUseSrsiXÂ =Â input(false,Â "StochÂ RSIÂ CrossÂ Signal",Â group="UPTRENDÂ ðŸ •Â STOCHÂ RSIÂ SIGNALS")
UTReqSrsiXscoreÂ =Â UTUseSrsiXÂ ?Â 1Â :Â 0
//Level
UTUseSrsiLÂ =Â input(true,Â "UseÂ Buy/SellÂ Levels",Â group="UPTRENDÂ ðŸ •Â STOCHÂ RSIÂ SIGNALS")
UTsablevelbÂ =Â input.int(55,Â "BuyÂ BelowÂ Level",Â group="UPTRENDÂ ðŸ •Â STOCHÂ RSIÂ SIGNALS")
UTsablevelsÂ =Â input.int(25,Â "SellÂ AboveÂ Level",Â group="UPTRENDÂ ðŸ •Â STOCHÂ RSIÂ SIGNALS")
UTReqSrsiLscoreÂ =Â UTUseSrsiLÂ ?Â 1Â :Â 0
//Position
UTUseSrsiPÂ =Â input(false,Â "UseÂ StochÂ RSIÂ Position",Â group="UPTRENDÂ ðŸ •Â STOCHÂ RSIÂ SIGNALS")
UTReqSrsiPscoreÂ =Â UTUseSrsiPÂ ?Â 1Â :Â 0
//Divergence
UTUseSrsiDÂ =Â input(false,Â "StochÂ RSIÂ Divergence",Â group="UPTRENDÂ ðŸ •Â STOCHÂ RSIÂ SIGNALS")
UTReqSrsiDscoreÂ =Â UTUseSrsiDÂ ?Â 1Â :Â 0
//DOWNTRENDÂ OPTIONS
//Cross
DTUseSrsiXÂ =Â input(false,Â "StochÂ RSIÂ CrossÂ Signal",Â group="DOWNTRENDÂ ðŸ —Â STOCHÂ RSIÂ SIGNALS")
DTReqSrsiXscoreÂ =Â DTUseSrsiXÂ ?Â 1Â :Â 0
//Level
DTUseSrsiLÂ =Â input(false,Â "UseÂ Buy/SellÂ Levels",Â group="DOWNTRENDÂ ðŸ —Â STOCHÂ RSIÂ SIGNALS")
DTsablevelbÂ =Â input.int(61,Â "BuyÂ BelowÂ Level",Â group="DOWNTRENDÂ ðŸ —Â STOCHÂ RSIÂ SIGNALS")
DTsablevelsÂ =Â input.int(13,Â "SellÂ AboveÂ Level",Â group="DOWNTRENDÂ ðŸ —Â STOCHÂ RSIÂ SIGNALS")
DTReqSrsiLscoreÂ =Â DTUseSrsiLÂ ?Â 1Â :Â 0
//Position
DTUseSrsiPÂ =Â input(false,Â "UseÂ StochÂ RSIÂ Position",Â group="DOWNTRENDÂ ðŸ —Â STOCHÂ RSIÂ SIGNALS")
DTReqSrsiPscoreÂ =Â DTUseSrsiPÂ ?Â 1Â :Â 0
//Divergence
DTUseSrsiDÂ =Â input(false,Â "StochÂ RSIÂ Divergence",Â group="DOWNTRENDÂ ðŸ —Â STOCHÂ RSIÂ SIGNALS")
DTReqSrsiDscoreÂ =Â DTUseSrsiDÂ ?Â 1Â :Â 0
//UPTRENDÂ INPUTS
//STOCHÂ RSI
UTlengthRSIÂ =Â input.int(12,Â "RSIÂ Length",Â minval=1,Â group="UPTRENDÂ ðŸ •Â STOCHÂ RSIÂ SIGNALS")
UTlengthStochÂ =Â input.int(19,Â "StochasticÂ Length",Â minval=1,Â group="UPTRENDÂ ðŸ •Â STOCHÂ RSIÂ SIGNALS")
UTrsi1Â =Â ta.rsi(src,Â UTlengthRSI)
UTrkÂ =Â ta.sma(ta.stoch(UTrsi1,Â UTrsi1,Â UTrsi1,Â UTlengthStoch),Â 3)
UTrdÂ =Â ta.sma(UTrk,Â 3)
//DOWNTRENDÂ INPUTS
//STOCHÂ RSI
DTlengthRSIÂ =Â input.int(12,Â "RSIÂ Length",Â minval=1,Â group="DOWNTRENDÂ ðŸ —Â STOCHÂ RSIÂ SIGNALS")
DTlengthStochÂ =Â input.int(20,Â "StochasticÂ Length",Â minval=1,Â group="DOWNTRENDÂ ðŸ —Â STOCHÂ RSIÂ SIGNALS")
DTrsi1Â =Â ta.rsi(src,Â DTlengthRSI)
DTrkÂ =Â ta.sma(ta.stoch(DTrsi1,Â DTrsi1,Â DTrsi1,Â DTlengthStoch),Â 3)
DTrdÂ =Â ta.sma(DTrk,Â 3)
//UPTRENDÂ DIVERGENCE
inRange(cond)Â =>
Â Â Â Â barsÂ =Â ta.barssince(condÂ ==Â true)
Â Â Â Â 5Â <=Â barsÂ andÂ barsÂ <=Â 60
osc2Â =Â UTrk
//Pivots
plFound2Â =Â na(ta.pivotlow(osc2,Â 5,Â 2))Â ?Â falseÂ :Â true
phFound2Â =Â na(ta.pivothigh(osc2,Â 5,Â 2))Â ?Â falseÂ :Â true
//RegularÂ Bullish
oscHL2Â =Â osc2[2]Â >Â ta.valuewhen(plFound2,Â osc2[2],Â 1)Â andÂ inRange(plFound2[1])
priceLL2Â =Â low[2]Â <Â ta.valuewhen(plFound2,Â low[2],Â 1)
bullCond2Â =Â priceLL2Â andÂ oscHL2Â andÂ plFound2
//HiddenÂ Bullish
oscLL2Â =Â osc2[2]Â <Â ta.valuewhen(plFound2,Â osc2[2],Â 1)Â andÂ inRange(plFound2[1])
priceHL2Â =Â low[2]Â >Â ta.valuewhen(plFound2,Â low[2],Â 1)
hiddenBullCond2Â =Â priceHL2Â andÂ oscLL2Â andÂ plFound2
//RegularÂ Bearish
oscLH2Â =Â osc2[2]Â <Â ta.valuewhen(phFound2,Â osc2[2],Â 1)Â andÂ inRange(phFound2[1])
priceHH2Â =Â high[2]Â >Â ta.valuewhen(phFound2,Â high[2],Â 1)
bearCond2Â =Â priceHH2Â andÂ oscLH2Â andÂ phFound2
//HiddenÂ Bearish
oscHH2Â =Â osc2[2]Â >Â ta.valuewhen(phFound2,Â osc2[2],Â 1)Â andÂ inRange(phFound2[1])
priceLH2Â =Â high[2]Â <Â ta.valuewhen(phFound2,Â high[2],Â 1)
hiddenBearCond2Â =Â priceLH2Â andÂ oscHH2Â andÂ phFound2
//DOWNTRENDÂ DIVERGENCE
osc3Â =Â DTrk
//Pivots
plFound3Â =Â na(ta.pivotlow(osc3,Â 5,Â 2))Â ?Â falseÂ :Â true
phFound3Â =Â na(ta.pivothigh(osc3,Â 5,Â 2))Â ?Â falseÂ :Â true
//RegularÂ Bullish
oscHL3Â =Â osc3[2]Â >Â ta.valuewhen(plFound3,Â osc3[2],Â 1)Â andÂ inRange(plFound3[1])
priceLL3Â =Â low[2]Â <Â ta.valuewhen(plFound3,Â low[2],Â 1)
bullCond3Â =Â priceLL3Â andÂ oscHL3Â andÂ plFound3
//HiddenÂ Bullish
oscLL3Â =Â osc3[2]Â <Â ta.valuewhen(plFound3,Â osc3[2],Â 1)Â andÂ inRange(plFound3[1])
priceHL3Â =Â low[2]Â >Â ta.valuewhen(plFound3,Â low[2],Â 1)
hiddenBullCond3Â =Â priceHL3Â andÂ oscLL3Â andÂ plFound3
//RegularÂ Bearish
oscLH3Â =Â osc3[2]Â <Â ta.valuewhen(phFound3,Â osc3[2],Â 1)Â andÂ inRange(phFound3[1])
priceHH3Â =Â high[2]Â >Â ta.valuewhen(phFound3,Â high[2],Â 1)
bearCond3Â =Â priceHH3Â andÂ oscLH3Â andÂ phFound3
//HiddenÂ Bearish
oscHH3Â =Â osc3[2]Â >Â ta.valuewhen(phFound3,Â osc3[2],Â 1)Â andÂ inRange(phFound3[1])
priceLH3Â =Â high[2]Â <Â ta.valuewhen(phFound3,Â high[2],Â 1)
hiddenBearCond3Â =Â priceLH3Â andÂ oscHH3Â andÂ phFound3
//UPTRENDÂ SIGNALS
UTSrsiXupÂ =Â UTUseSrsiXÂ andÂ UTrkÂ >Â UTrdÂ andÂ UTrk[1]Â <Â UTrd[1]Â ?Â 1Â :Â 0
UTSrsiXdnÂ =Â UTUseSrsiXÂ andÂ UTrkÂ <Â UTrdÂ andÂ UTrk[1]Â >Â UTrd[1]Â ?Â 1Â :Â 0
UTSrsiLupÂ =Â UTUseSrsiLÂ andÂ UTrkÂ <Â UTsablevelbÂ ?Â 1Â :Â 0
UTSrsiLdnÂ =Â UTUseSrsiLÂ andÂ UTrkÂ >Â UTsablevelsÂ ?Â 1Â :Â 0
UTSrsiPupÂ =Â UTUseSrsiPÂ andÂ UTrkÂ >Â UTrdÂ ?Â 1Â :Â 0
UTSrsiPdnÂ =Â UTUseSrsiPÂ andÂ UTrkÂ <Â UTrdÂ ?Â 1Â :Â 0
UTSrsiDupÂ =Â UTUseSrsiDÂ andÂ bullCond2Â ?Â 1Â :Â 0
UTSrsiDdnÂ =Â UTUseSrsiDÂ andÂ bearCond2Â ?Â 1Â :Â 0
//DOWNTRENDÂ SIGNALS
DTSrsiXupÂ =Â DTUseSrsiXÂ andÂ DTrkÂ >Â DTrdÂ andÂ DTrk[1]Â <Â DTrd[1]Â ?Â 1Â :Â 0
DTSrsiXdnÂ =Â DTUseSrsiXÂ andÂ DTrkÂ <Â DTrdÂ andÂ DTrk[1]Â >Â DTrd[1]Â ?Â 1Â :Â 0
DTSrsiLupÂ =Â DTUseSrsiLÂ andÂ DTrkÂ <Â DTsablevelbÂ ?Â 1Â :Â 0
DTSrsiLdnÂ =Â DTUseSrsiLÂ andÂ DTrkÂ >Â DTsablevelsÂ ?Â 1Â :Â 0
DTSrsiPupÂ =Â DTUseSrsiPÂ andÂ DTrkÂ >Â DTrdÂ ?Â 1Â :Â 0
DTSrsiPdnÂ =Â DTUseSrsiPÂ andÂ DTrkÂ <Â DTrdÂ ?Â 1Â :Â 0
DTSrsiDupÂ =Â DTUseSrsiDÂ andÂ bullCond3Â ?Â 1Â :Â 0
DTSrsiDdnÂ =Â DTUseSrsiDÂ andÂ bearCond3Â ?Â 1Â :Â 0
//ENDâ–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
////////////////////////////////////////////////////////////////////////////////
//WAVETRENDâ–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
//UPTRENDÂ OPTIONS
//Cross
UTUsewtXÂ =Â input(false,Â "TCIÂ WaveTrendÂ Cross",Â group="UPTRENDÂ ðŸ •Â TCIÂ WAVETRENDÂ SIGNALS")
UTReqwtXscoreÂ =Â UTUsewtXÂ ?Â 1Â :Â 0
//Level
UTUsewtLÂ =Â input(true,Â "TCIÂ WaveTrendÂ Level",Â group="UPTRENDÂ ðŸ •Â TCIÂ WAVETRENDÂ SIGNALS")
UTwablevelbÂ =Â input.int(73,Â "BuyÂ BelowÂ Level",Â group="UPTRENDÂ ðŸ •Â TCIÂ WAVETRENDÂ SIGNALS")
UTwablevelsÂ =Â input.int(39,Â "SellÂ AboveÂ Level",Â group="UPTRENDÂ ðŸ •Â TCIÂ WAVETRENDÂ SIGNALS")
UTReqwtLscoreÂ =Â UTUsewtLÂ ?Â 1Â :Â 0
//Position
UTUsewtPÂ =Â input(false,Â "TCIÂ WaveTrendÂ Position",Â group="UPTRENDÂ ðŸ •Â TCIÂ WAVETRENDÂ SIGNALS")
UTReqwtPscoreÂ =Â UTUsewtPÂ ?Â 1Â :Â 0
//Divergence
UTUsewtDÂ =Â input(false,Â "TCIÂ WaveTrendÂ Divergence",Â group="UPTRENDÂ ðŸ •Â TCIÂ WAVETRENDÂ SIGNALS")
UTReqwtDscoreÂ =Â UTUsewtDÂ ?Â 1Â :Â 0
//DOWNTRENDÂ OPTIONS
//Cross
DTUsewtXÂ =Â input(false,Â "TCIÂ WaveTrendÂ Cross",Â group="DOWNTRENDÂ ðŸ —Â TCIÂ WAVETRENDÂ SIGNALS")
DTReqwtXscoreÂ =Â DTUsewtXÂ ?Â 1Â :Â 0
//Level
DTUsewtLÂ =Â input(false,Â "TCIÂ WaveTrendÂ Level",Â group="DOWNTRENDÂ ðŸ —Â TCIÂ WAVETRENDÂ SIGNALS")
DTwablevelbÂ =Â input.int(0,Â "BuyÂ BelowÂ Level",Â group="DOWNTRENDÂ ðŸ —Â TCIÂ WAVETRENDÂ SIGNALS")
DTwablevelsÂ =Â input.int(0,Â "SellÂ AboveÂ Level",Â group="DOWNTRENDÂ ðŸ —Â TCIÂ WAVETRENDÂ SIGNALS")
DTReqwtLscoreÂ =Â DTUsewtLÂ ?Â 1Â :Â 0
//Position
DTUsewtPÂ =Â input(false,Â "TCIÂ WaveTrendÂ Position",Â group="DOWNTRENDÂ ðŸ —Â TCIÂ WAVETRENDÂ SIGNALS")
DTReqwtPscoreÂ =Â DTUsewtPÂ ?Â 1Â :Â 0
//Divergence
DTUsewtDÂ =Â input(false,Â "TCIÂ WaveTrendÂ Divergence",Â group="DOWNTRENDÂ ðŸ —Â TCIÂ WAVETRENDÂ SIGNALS")
DTReqwtDscoreÂ =Â DTUsewtDÂ ?Â 1Â :Â 0
//UPTRENDÂ INPUTS
//WT
UTlenCÂ =Â input.int(9,Â title="ChannelÂ Length",Â group="UPTRENDÂ ðŸ •Â TCIÂ WAVETRENDÂ SIGNALS")
UTlenAÂ =Â input.int(12,Â title="AverageÂ Length",Â group="UPTRENDÂ ðŸ •Â TCIÂ WAVETRENDÂ SIGNALS")
UTapÂ =Â hlc3Â 
UTesaÂ =Â ta.ema(UTap,Â UTlenC)
UTd1Â =Â ta.ema(math.abs(UTapÂ -Â UTesa),Â UTlenC)
UTciÂ =Â (UTapÂ -Â UTesa)Â /Â (0.015Â *Â UTd1)
UTtciÂ =Â ta.ema(UTci,Â UTlenA)
UTwt1Â =Â UTtci
UTwt2Â =Â ta.sma(UTwt1,Â 4)
UTwthistÂ =Â UTwt2Â -Â UTwt1
//DOWNTRENDÂ INPUTS
//WT
DTlenCÂ =Â input.int(9,Â title="ChannelÂ Length",Â group="DOWNTRENDÂ ðŸ —Â TCIÂ WAVETRENDÂ SIGNALS")
DTlenAÂ =Â input.int(12,Â title="AverageÂ Length",Â group="DOWNTRENDÂ ðŸ —Â TCIÂ WAVETRENDÂ SIGNALS")
DTapÂ =Â hlc3Â 
DTesaÂ =Â ta.ema(DTap,Â DTlenC)
DTd1Â =Â ta.ema(math.abs(DTapÂ -Â DTesa),Â DTlenC)
DTciÂ =Â (DTapÂ -Â DTesa)Â /Â (0.015Â *Â DTd1)
DTtciÂ =Â ta.ema(DTci,Â DTlenA)
DTwt1Â =Â DTtci
DTwt2Â =Â ta.sma(DTwt1,Â 4)
DTwthistÂ =Â DTwt2Â -Â DTwt1
//UPTRENDÂ DIVERGENCE
osc4Â =Â UTwt1
//Pivots
plFound4Â =Â na(ta.pivotlow(osc4,Â 5,Â 2))Â ?Â falseÂ :Â true
phFound4Â =Â na(ta.pivothigh(osc4,Â 5,Â 2))Â ?Â falseÂ :Â true
//RegularÂ Bullish
oscHL4Â =Â osc4[2]Â >Â ta.valuewhen(plFound4,Â osc4[2],Â 1)Â andÂ inRange(plFound4[1])
priceLL4Â =Â low[2]Â <Â ta.valuewhen(plFound4,Â low[2],Â 1)
bullCond4Â =Â priceLL4Â andÂ oscHL4Â andÂ plFound4
//HiddenÂ Bullish
oscLL4Â =Â osc4[2]Â <Â ta.valuewhen(plFound4,Â osc4[2],Â 1)Â andÂ inRange(plFound4[1])
priceHL4Â =Â low[2]Â >Â ta.valuewhen(plFound4,Â low[2],Â 1)
hiddenBullCond4Â =Â priceHL4Â andÂ oscLL4Â andÂ plFound4
//RegularÂ Bearish
oscLH4Â =Â osc4[2]Â <Â ta.valuewhen(phFound4,Â osc4[2],Â 1)Â andÂ inRange(phFound4[1])
priceHH4Â =Â high[2]Â >Â ta.valuewhen(phFound4,Â high[2],Â 1)
bearCond4Â =Â priceHH4Â andÂ oscLH4Â andÂ phFound4
//HiddenÂ Bearish
oscHH4Â =Â osc4[2]Â >Â ta.valuewhen(phFound4,Â osc4[2],Â 1)Â andÂ inRange(phFound4[1])
priceLH4Â =Â high[2]Â <Â ta.valuewhen(phFound4,Â high[2],Â 1)
hiddenBearCond4Â =Â priceLH4Â andÂ oscHH4Â andÂ phFound4
//DOWNTRENDÂ DIVERGENCE
osc5Â =Â DTwt1
//Pivots
plFound5Â =Â na(ta.pivotlow(osc5,Â 5,Â 2))Â ?Â falseÂ :Â true
phFound5Â =Â na(ta.pivothigh(osc5,Â 5,Â 2))Â ?Â falseÂ :Â true
//RegularÂ Bullish
oscHL5Â =Â osc5[2]Â >Â ta.valuewhen(plFound5,Â osc5[2],Â 1)Â andÂ inRange(plFound5[1])
priceLL5Â =Â low[2]Â <Â ta.valuewhen(plFound5,Â low[2],Â 1)
bullCond5Â =Â priceLL5Â andÂ oscHL5Â andÂ plFound5
//HiddenÂ Bullish
oscLL5Â =Â osc5[2]Â <Â ta.valuewhen(plFound5,Â osc5[2],Â 1)Â andÂ inRange(plFound5[1])
priceHL5Â =Â low[2]Â >Â ta.valuewhen(plFound5,Â low[2],Â 1)
hiddenBullCond5Â =Â priceHL5Â andÂ oscLL5Â andÂ plFound5
//RegularÂ Bearish
oscLH5Â =Â osc5[2]Â <Â ta.valuewhen(phFound5,Â osc5[2],Â 1)Â andÂ inRange(phFound5[1])
priceHH5Â =Â high[2]Â >Â ta.valuewhen(phFound5,Â high[2],Â 1)
bearCond5Â =Â priceHH5Â andÂ oscLH5Â andÂ phFound5
//HiddenÂ Bearish
oscHH5Â =Â osc5[2]Â >Â ta.valuewhen(phFound5,Â osc5[2],Â 1)Â andÂ inRange(phFound5[1])
priceLH5Â =Â high[2]Â <Â ta.valuewhen(phFound5,Â high[2],Â 1)
hiddenBearCond5Â =Â priceLH5Â andÂ oscHH5Â andÂ phFound5
//UPTRENDÂ SIGNALS
UTwtXupÂ =Â UTUsewtXÂ andÂ UTwt1Â >Â UTwt2Â andÂ UTwt1[1]Â <Â UTwt2[1]Â andÂ UTwt1Â <Â 0Â ?Â 1Â :Â 0
UTwtXdnÂ =Â UTUsewtXÂ andÂ UTwt1Â <Â UTwt2Â andÂ UTwt1[1]Â >Â UTwt2[1]Â andÂ UTwt1Â >Â 0Â ?Â 1Â :Â 0
UTwtLupÂ =Â UTUsewtLÂ andÂ UTwt1Â <Â UTwablevelbÂ ?Â 1Â :Â 0
UTwtLdnÂ =Â UTUsewtLÂ andÂ UTwt1Â >Â UTwablevelsÂ ?Â 1Â :Â 0
UTwtPupÂ =Â UTUsewtPÂ andÂ UTwt1Â >Â UTwt2Â ?Â 1Â :Â 0
UTwtPdnÂ =Â UTUsewtPÂ andÂ UTwt1Â <Â UTwt2Â ?Â 1Â :Â 0
UTwtDupÂ =Â UTUsewtDÂ andÂ bullCond4Â ?Â 1Â :Â 0
UTwtDdnÂ =Â UTUsewtDÂ andÂ bearCond4Â ?Â 1Â :Â 0
//DOWNTRENDÂ SIGNALS
DTwtXupÂ =Â DTUsewtXÂ andÂ DTwt1Â >Â DTwt2Â andÂ DTwt1[1]Â <Â DTwt2[1]Â andÂ DTwt1Â <Â 0Â ?Â 1Â :Â 0
DTwtXdnÂ =Â DTUsewtXÂ andÂ DTwt1Â <Â DTwt2Â andÂ DTwt1[1]Â >Â DTwt2[1]Â andÂ DTwt1Â >Â 0Â ?Â 1Â :Â 0
DTwtLupÂ =Â DTUsewtLÂ andÂ DTwt1Â <Â DTwablevelbÂ ?Â 1Â :Â 0
DTwtLdnÂ =Â DTUsewtLÂ andÂ DTwt1Â >Â DTwablevelsÂ ?Â 1Â :Â 0
DTwtPupÂ =Â DTUsewtPÂ andÂ DTwt1Â >Â DTwt2Â ?Â 1Â :Â 0
DTwtPdnÂ =Â DTUsewtPÂ andÂ DTwt1Â <Â DTwt2Â ?Â 1Â :Â 0
DTwtDupÂ =Â DTUsewtDÂ andÂ bullCond5Â ?Â 1Â :Â 0
DTwtDdnÂ =Â DTUsewtDÂ andÂ bearCond5Â ?Â 1Â :Â 0
//ENDâ–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
////////////////////////////////////////////////////////////////////////////////
//COLLECTÂ SIGNALSâ–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
//UTÂ REQUIREDÂ SCORES
UTReqScoreÂ =Â UTReqmaXscoreÂ +Â UTReqmaPscoreÂ +Â UTReqmaHscoreÂ +Â UTReqSrsiXscoreÂ +Â UTReqSrsiLscoreÂ +Â UTReqSrsiPscoreÂ +Â UTReqSrsiDscoreÂ +Â UTReqwtXscoreÂ +Â UTReqwtLscoreÂ +Â UTReqwtPscoreÂ +Â UTReqwtDscore
//DTÂ REQUIREDÂ SCORES
DTReqScoreÂ =Â DTReqmaXscoreÂ +Â DTReqmaPscoreÂ +Â DTReqmaHscoreÂ +Â DTReqSrsiXscoreÂ +Â DTReqSrsiLscoreÂ +Â DTReqSrsiPscoreÂ +Â DTReqSrsiDscoreÂ +Â DTReqwtXscoreÂ +Â DTReqwtLscoreÂ +Â DTReqwtPscoreÂ +Â DTReqwtDscore
//UTÂ SIGNALÂ SCORES
UTSigBÂ =Â UTmaXupÂ +Â UTmaPupÂ +Â UTmaHupÂ +Â UTSrsiXupÂ +Â UTSrsiLupÂ +Â UTSrsiPupÂ +Â UTSrsiDupÂ +Â UTwtXupÂ +Â UTwtLupÂ +Â UTwtPupÂ +Â UTwtDup
UTSigSÂ =Â UTmaXdnÂ +Â UTmaPdnÂ +Â UTmaHdnÂ +Â UTSrsiXdnÂ +Â UTSrsiLdnÂ +Â UTSrsiPdnÂ +Â UTSrsiDdnÂ +Â UTwtXdnÂ +Â UTwtLdnÂ +Â UTwtPdnÂ +Â UTwtDdn
//DTÂ SIGNALÂ SCORES
DTSigBÂ =Â DTmaXupÂ +Â DTmaPupÂ +Â DTmaHupÂ +Â DTSrsiXupÂ +Â DTSrsiLupÂ +Â DTSrsiPupÂ +Â DTSrsiDupÂ +Â DTwtXupÂ +Â DTwtLupÂ +Â DTwtPupÂ +Â DTwtDup
DTSigSÂ =Â DTmaXdnÂ +Â DTmaPdnÂ +Â DTmaHdnÂ +Â DTSrsiXdnÂ +Â DTSrsiLdnÂ +Â DTSrsiPdnÂ +Â DTSrsiDdnÂ +Â DTwtXdnÂ +Â DTwtLdnÂ +Â DTwtPdnÂ +Â DTwtDdn
//UTÂ BUYÂ ANDÂ SELL
UTNormBÂ =Â UTSigBÂ ==Â UTReqScoreÂ ?Â 1Â :Â na
UTNormSÂ =Â UTSigSÂ ==Â UTReqScoreÂ ?Â 1Â :Â na
//DTÂ BUYÂ ANDÂ SELL
DTNormBÂ =Â DTSigBÂ ==Â DTReqScoreÂ ?Â 1Â :Â na
DTNormSÂ =Â DTSigSÂ ==Â DTReqScoreÂ ?Â 1Â :Â na
//CHECKÂ TRENDÂ DIRECTION
UpTrendÂ =Â matÂ >Â mat[1]
BCondÂ =Â UpTrendÂ ?Â UTNormBÂ :Â DTNormB
SCondÂ =Â UpTrendÂ ?Â UTNormSÂ :Â DTNormS
//FINALIZE
LongEntryFinalÂ Â =Â TrendTradeÂ ?Â BCondÂ andÂ matÂ >Â mat[1]Â :Â BCond
LongExitFinalÂ Â Â =Â TrendTradeÂ ?Â SCondÂ andÂ matÂ >Â mat[1]Â :Â SCond
ShortEntryFinalÂ =Â TrendTradeÂ ?Â SCondÂ andÂ matÂ <Â mat[1]Â :Â SCond
ShortExitFinalÂ Â =Â TrendTradeÂ ?Â BCondÂ andÂ matÂ <Â mat[1]Â :Â BCond
//ENDâ–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
////////////////////////////////////////////////////////////////////////////////
//STOPÂ LOSSÂ &Â TAKEÂ PROFITâ–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
//UTÂ MINIMUMÂ PROFIT
UTmpconvertLÂ =Â strategy.position_avg_priceÂ *Â (1Â +Â UTminProf)
UTmpconvertSÂ =Â strategy.position_avg_priceÂ *Â (1Â -Â UTminProf)
UTmpdefineLÂ =Â TradeDirÂ ==Â "LONG"Â ?Â (UTmpconvertLÂ <Â closeÂ andÂ strategy.openprofitÂ >Â 0)Â andÂ UTsellProfÂ :Â na
UTmpdefineSÂ =Â TradeDirÂ ==Â "SHORT"Â ?Â (UTmpconvertSÂ >Â closeÂ andÂ strategy.openprofitÂ >Â 0)Â andÂ UTsellProfÂ :Â na
UTSPLÂ =Â LongExitFinalÂ andÂ UTmpdefineL
UTSPSÂ =Â ShortExitFinalÂ andÂ UTmpdefineS
//DTÂ MINIMUMÂ PROFIT
DTmpconvertLÂ =Â strategy.position_avg_priceÂ *Â (1Â +Â DTminProf)
DTmpconvertSÂ =Â strategy.position_avg_priceÂ *Â (1Â -Â DTminProf)
DTmpdefineLÂ =Â TradeDirÂ ==Â "LONG"Â ?Â (DTmpconvertLÂ <Â closeÂ andÂ strategy.openprofitÂ >Â 0)Â andÂ DTsellProfÂ :Â na
DTmpdefineSÂ =Â TradeDirÂ ==Â "SHORT"Â ?Â (DTmpconvertSÂ >Â closeÂ andÂ strategy.openprofitÂ >Â 0)Â andÂ DTsellProfÂ :Â na
DTSPLÂ =Â LongExitFinalÂ andÂ DTmpdefineL
DTSPSÂ =Â ShortExitFinalÂ andÂ DTmpdefineS
//COLLECT
sellProfÂ =Â UpTrendÂ ?Â UTsellProfÂ :Â DTsellProf
SPLÂ =Â UpTrendÂ ?Â UTSPLÂ :Â DTSPL
SPSÂ =Â UpTrendÂ ?Â UTSPSÂ :Â DTSPS
//UTÂ TAKEÂ PROFIT
UTtpconvertLÂ =Â strategy.position_avg_priceÂ *Â (1Â +Â UTTPperc)
UTtpconvertSÂ =Â strategy.position_avg_priceÂ *Â (1Â -Â UTTPperc)
UTTPLÂ =Â TradeDirÂ ==Â "LONG"Â ?Â (UTtpconvertLÂ <Â close)Â andÂ UTuseTPÂ :Â na
UTTPSÂ =Â TradeDirÂ ==Â "SHORT"Â ?Â (UTtpconvertSÂ >Â close)Â andÂ UTuseTPÂ :Â na
//DTÂ TAKEÂ PROFIT
DTtpconvertLÂ =Â strategy.position_avg_priceÂ *Â (1Â +Â DTTPperc)
DTtpconvertSÂ =Â strategy.position_avg_priceÂ *Â (1Â -Â DTTPperc)
DTTPLÂ =Â TradeDirÂ ==Â "LONG"Â ?Â (DTtpconvertLÂ <Â close)Â andÂ DTuseTPÂ :Â na
DTTPSÂ =Â TradeDirÂ ==Â "SHORT"Â ?Â (DTtpconvertSÂ >Â close)Â andÂ DTuseTPÂ :Â na
//COLLECT
TPLÂ =Â UpTrendÂ ?Â UTTPLÂ :Â DTTPL
TPSÂ =Â UpTrendÂ ?Â UTTPSÂ :Â DTTPS
//UTÂ STOPÂ LOSS
UTslconvertLÂ =Â strategy.position_avg_priceÂ *Â (1Â +Â UTSLperc)
UTslconvertSÂ =Â strategy.position_avg_priceÂ *Â (1Â -Â UTSLperc)
UTSLLÂ =Â TradeDirÂ ==Â "LONG"Â ?Â (UTslconvertLÂ >Â close)Â andÂ UTuseSLÂ :Â na
UTSLSÂ =Â TradeDirÂ ==Â "SHORT"Â ?Â (UTslconvertSÂ <Â close)Â andÂ UTuseSLÂ :Â na
//DTÂ STOPÂ LOSS
DTslconvertLÂ =Â strategy.position_avg_priceÂ *Â (1Â +Â DTSLperc)
DTslconvertSÂ =Â strategy.position_avg_priceÂ *Â (1Â -Â DTSLperc)
DTSLLÂ =Â TradeDirÂ ==Â "LONG"Â ?Â (DTslconvertLÂ >Â close)Â andÂ DTuseSLÂ :Â na
DTSLSÂ =Â TradeDirÂ ==Â "SHORT"Â ?Â (DTslconvertSÂ <Â close)Â andÂ DTuseSLÂ :Â na
//COLLECT
SLLÂ =Â UpTrendÂ ?Â UTSLLÂ :Â DTSLL
SLSÂ =Â UpTrendÂ ?Â UTSLSÂ :Â DTSLS
//UTÂ TRADEÂ EXPIRE
entryposÂ =Â strategy.opentradesÂ ==Â 1Â andÂ strategy.opentrades[1]Â <Â 1
UTexpirebarsÂ =Â UTuseTEÂ ?Â UTTEbarsÂ :Â 1000000
UTTEÂ =Â Â ta.barssince(entrypos)Â >=Â UTexpirebars
//DTÂ TRADEÂ EXPIRE
DTexpirebarsÂ =Â DTuseTEÂ ?Â DTTEbarsÂ :Â 1000000
DTTEÂ =Â Â ta.barssince(entrypos)Â >=Â DTexpirebars
//COLLECT
TEÂ =Â UpTrendÂ ?Â UTTEÂ :Â DTTE
//ENDâ–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
////////////////////////////////////////////////////////////////////////////////
//PLOTSHAPESâ–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
//LONG
plotshape((TradeDirÂ ==Â "LONG")Â andÂ LongEntryFinal,Â location=location.belowbar,Â style=shape.arrowup,Â Â Â color=color.new(#26a69a,Â 100),Â text="âŒƒ",Â textcolor=#26a69a,Â size=size.tiny,Â title="LongÂ BUYÂ Label")
plotshape((TradeDirÂ ==Â "LONG")Â andÂ LongExitFinal,Â Â location=location.abovebar,Â style=shape.arrowdown,Â color=color.new(#ef5350,Â 100),Â text="âŒ„",Â textcolor=#ef5350,Â size=size.tiny,Â title="LongÂ SELLÂ Label")
//SHORT
plotshape((TradeDirÂ ==Â "SHORT")Â andÂ ShortEntryFinal,Â location=location.abovebar,Â style=shape.arrowdown,Â color=color.new(#ef5350,Â 100),Â text="âŒ„",Â textcolor=#ef5350,Â size=size.tiny,Â title="ShortÂ SELLÂ Label")
plotshape((TradeDirÂ ==Â "SHORT")Â andÂ ShortExitFinal,Â Â location=location.belowbar,Â style=shape.arrowup,Â Â Â color=color.new(#26a69a,Â 100),Â text="âŒƒ",Â textcolor=#26a69a,Â size=size.tiny,Â title="ShortÂ BUYÂ Label")
//ENDâ–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
////////////////////////////////////////////////////////////////////////////////
//STRATEGYÂ TRADESâ–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
//LONG
ifÂ (TradeDirÂ ==Â "LONG")Â andÂ LongEntryFinal
Â Â Â Â strategy.entry("inLong",Â strategy.long,Â comment="LEn")
ifÂ ((TradeDirÂ ==Â "LONG")Â andÂ sellProfÂ ?Â SPLÂ :Â LongExitFinal)Â orÂ OOTexitL
Â Â Â Â strategy.close("inLong",Â comment="LEx")
//SHORT
ifÂ (TradeDirÂ ==Â "SHORT")Â andÂ ShortEntryFinal
Â Â Â Â strategy.entry("inShort",Â strategy.short,Â comment="SEn")
ifÂ ((TradeDirÂ ==Â "SHORT")Â andÂ sellProfÂ ?Â SPSÂ :Â ShortExitFinal)Â orÂ OOTexitS
Â Â Â Â strategy.close("inShort",Â comment="SEx")
//TAKE
ifÂ TPL
Â Â Â Â strategy.close("inLong",Â comment="TP")
ifÂ TPS
Â Â Â Â strategy.close("inShort",Â comment="TP")
//STOP
ifÂ SLL
Â Â Â Â strategy.close("inLong",Â comment="SL")
ifÂ SLS
Â Â Â Â strategy.close("inShort",Â comment="SL")
//EXPIRE
ifÂ TE
Â Â Â Â strategy.close_all(comment="TE")
Â Â Â Â 
//ENDâ–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
////////////////////////////////////////////////////////////////////////////////
//ALERTSâ–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
useentryalertÂ Â =Â input(defval=true,Â title="UseÂ ENTRYÂ Alert",Â group="CustomÂ AlertÂ Messages")
entrystringÂ Â Â Â =Â input.string(title="EntryÂ AlertÂ Message",Â defval="ENTRY",Â confirm=false,Â group="CustomÂ AlertÂ Messages")
useexitalertÂ Â Â =Â input(defval=true,Â title="UseÂ EXITÂ Alert",Â group="CustomÂ AlertÂ Messages")
exitstringÂ Â Â Â Â =Â input.string(title="ExitÂ AlertÂ Message",Â defval="EXIT",Â confirm=false,Â group="CustomÂ AlertÂ Messages")
usetakealertÂ Â Â =Â input(defval=true,Â title="UseÂ TAKEÂ Alert",Â group="CustomÂ AlertÂ Messages")
takestringÂ Â Â Â Â =Â input.string(title="TakeÂ ProfitÂ AlertÂ Message",Â defval="TAKE",Â confirm=false,Â group="CustomÂ AlertÂ Messages")
usestopalertÂ Â Â =Â input(defval=true,Â title="UseÂ STOPÂ Alert",Â group="CustomÂ AlertÂ Messages")
stopstringÂ Â Â Â Â =Â input.string(title="StopÂ LossÂ AlertÂ Message",Â defval="STOP",Â confirm=false,Â group="CustomÂ AlertÂ Messages")
useexpirealertÂ =Â input(defval=true,Â title="UseÂ EXPIREÂ Alert",Â group="CustomÂ AlertÂ Messages")
expirestringÂ Â Â =Â input.string(title="ExpireÂ TradeÂ AlertÂ Message",Â defval="EXPIRE",Â confirm=false,Â group="CustomÂ AlertÂ Messages")
//LONGÂ (OnlyÂ useÂ thisÂ ifÂ yourÂ BotÂ isÂ setupÂ toÂ tradeÂ Long.)
ifÂ ((TradeDirÂ ==Â "LONG")Â andÂ LongEntryFinal)Â andÂ useentryalert
Â Â Â Â alert(entrystring,Â alert.freq_once_per_bar)
ifÂ (TradeDirÂ ==Â "LONG")Â andÂ (UTsellProfÂ ?Â SPLÂ :Â LongExitFinal)Â andÂ useexitalert
Â Â Â Â alert(exitstring,Â alert.freq_once_per_bar)
//SHORTÂ (OnlyÂ useÂ thisÂ ifÂ yourÂ BotÂ isÂ setupÂ toÂ tradeÂ Short.)
ifÂ ((TradeDirÂ ==Â "SHORT")Â andÂ ShortEntryFinal)Â andÂ useentryalert
Â Â Â Â alert(entrystring,Â alert.freq_once_per_bar)
ifÂ (TradeDirÂ ==Â "SHORT")Â andÂ (UTsellProfÂ ?Â SPLÂ :Â ShortExitFinal)Â andÂ useexitalert
Â Â Â Â alert(exitstring,Â alert.freq_once_per_bar)
//OTHERÂ (TheseÂ areÂ TakeÂ Profit,Â StopÂ loss,Â andÂ TradeÂ Expire.)
ifÂ TPLÂ orÂ TPSÂ andÂ usetakealert
Â Â Â Â alert(takestring,Â alert.freq_once_per_bar)
ifÂ SLLÂ orÂ SLSÂ andÂ usestopalert
Â Â Â Â alert(stopstring,Â alert.freq_once_per_bar)
ifÂ TEÂ andÂ useexpirealert
Â Â Â Â alert(expirestring,Â alert.freq_once_per_bar)
//ENDâ–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
////////////////////////////////////////////////////////////////////////////////
Expand (583 lines)