Script Name: [Advanced] Hilega-Milega Indicator
Author: HamidBox
Description: This Indicator Name is Hilega Milega, and the original Idea given by Nitish Kumar, I just coded it and add some signals for backtesting.

it works on RSI + WMA and EMA plotted.
Default Values Used :
RSI = 9
WMA = 21
EMA = 3

But i added some extra, now everyone can change the Type of WMA and EMA, also SMA for trend confirmation,

How it works ??
Buy : When RSI...
PineScript code:

Pine Scriptâ„¢ strategy
[Advanced] Hilega-Milega Indicator
Copy code
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
//Â ThisÂ sourceÂ codeÂ isÂ subjectÂ toÂ theÂ termsÂ ofÂ theÂ MozillaÂ PublicÂ LicenseÂ 2.0Â atÂ https://mozilla.org/MPL/2.0/
//Â Â©Â HamidBox
//@version=4
strategy("H-MÂ ByÂ HamidBox-YT",Â default_qty_type=strategy.cash,Â default_qty_value=Â 100,Â initial_capital=100,Â currency='USD',Â commission_type=strategy.commission.percent,Â commission_value=0.1)
ma(source,Â length,Â type)Â =>
Â Â Â Â typeÂ ==Â "SMA"Â ?Â sma(sourceÂ ,Â length)Â Â Â Â :
Â Â Â Â Â typeÂ ==Â "EMA"Â ?Â ema(sourceÂ ,Â length)Â Â Â :
Â Â Â Â Â typeÂ ==Â "WMA"Â ?Â wma(sourceÂ ,Â length)Â Â Â :
Â Â Â Â Â typeÂ ==Â "VWMA"Â ?Â vwma(sourceÂ ,Â length)Â :
Â Â Â Â Â na
WMA(source,Â length,Â type)Â =>
Â Â Â Â typeÂ ==Â "SMA"Â ?Â sma(sourceÂ ,Â length)Â Â Â Â :
Â Â Â Â Â typeÂ ==Â "EMA"Â ?Â ema(sourceÂ ,Â length)Â Â Â :
Â Â Â Â Â typeÂ ==Â "WMA"Â ?Â wma(sourceÂ ,Â length)Â Â Â :
Â Â Â Â Â typeÂ ==Â "VWMA"Â ?Â vwma(sourceÂ ,Â length)Â :
Â Â Â Â Â na
WithMA(source,Â length,Â type)Â =>
Â Â Â Â typeÂ ==Â "SMA"Â ?Â sma(sourceÂ ,Â length)Â Â Â Â :
Â Â Â Â Â typeÂ ==Â "EMA"Â ?Â ema(sourceÂ ,Â length)Â Â Â :
Â Â Â Â Â typeÂ ==Â "WMA"Â ?Â wma(sourceÂ ,Â length)Â Â Â :
Â Â Â Â Â typeÂ ==Â "VWMA"Â ?Â vwma(sourceÂ ,Â length)Â :
Â Â Â Â Â na
rsi_inlineÂ Â Â Â Â Â =Â input(trueÂ ,Â title="RSIÂ Value)",Â inline="rsi")
rsiLengthÂ Â Â Â Â Â Â =Â input(title="Length:",Â type=input.integer,Â defval=9,Â minval=1,Â inline="rsi")
rsiLineMÂ Â Â Â Â Â Â Â =Â input(title="Level:",Â type=input.integer,Â defval=50,Â minval=1,Â inline="rsi")
rsi_OSOBinlineÂ Â =Â input(trueÂ ,Â title="RSI)",Â inline="rsiosob")
rsiLineUÂ Â Â Â Â Â Â Â =Â input(title="O-BOUGHT",Â type=input.integer,Â defval=70,Â minval=1,Â inline="rsiosob")
rsiLineDÂ Â Â Â Â Â Â Â =Â input(title="O-SOLD",Â type=input.integer,Â defval=30,Â minval=1,Â inline="rsiosob")
ma_inlineÂ Â Â Â Â Â Â =Â input(trueÂ ,Â title="Price-MA)",Â inline="ma")
ma_typeÂ Â Â Â Â Â Â Â Â =Â input(title="Type",Â defval="EMA",Â options=["EMA","SMA","WMA","VWMA"],Â inline="ma")
emaLengthÂ Â Â Â Â Â Â =Â input(title="Length",Â type=input.integer,Â defval=3,Â inline="ma")
wma_inlineÂ Â Â Â Â Â =Â input(trueÂ ,Â title="Trending-MA)",Â inline="wma")
ma_type2Â Â Â Â Â Â Â Â =Â input(title="",Â defval="WMA",Â options=["EMA","SMA","WMA","VWMA"],Â inline="wma")
wmaLengthÂ Â Â Â Â Â Â =Â input(title="Length",Â type=input.integer,Â defval=21,Â inline="wma")
////////////////////////////////////////////////////////////////////////////////
startTimeÂ Â Â Â Â Â Â =Â input(title="StartÂ Time",Â typeÂ =Â input.time,Â defvalÂ =Â timestamp("01Â JanÂ 2021Â 00:00Â +0000"),Â group="BacktestÂ TimeÂ Period")
endTimeÂ Â Â Â Â Â Â Â Â =Â input(title="EndÂ Time",Â typeÂ =Â input.time,Â defvalÂ =Â timestamp("01Â JanÂ 2200Â 00:00Â +0000"),Â group="BacktestÂ TimeÂ Period")
inDateRangeÂ Â Â Â Â =Â (timeÂ >=Â startTime)Â andÂ (timeÂ <Â endTime)
////////////////////////////////////////////////////////////////////////////////
rsiÂ Â Â Â Â Â Â Â Â =Â rsi(closeÂ ,Â rsiLength)
rÂ Â Â Â Â Â Â Â Â Â Â =Â plot(rsi_inlineÂ ?Â rsiÂ :Â na,Â color=color.yellow,Â linewidth=2)
EMAÂ Â Â Â Â Â Â Â Â =Â ma(rsi,Â emaLength,Â ma_type)
eÂ Â Â Â Â Â Â Â Â Â Â =Â plot(ma_inlineÂ ?Â EMAÂ :Â na,Â color=color.lime)
myWMAÂ Â Â Â Â Â Â =Â ma(rsi,Â wmaLength,Â ma_type2)
wÂ Â Â Â Â Â Â Â Â Â Â =Â plot(wma_inlineÂ ?Â myWMAÂ :Â na,Â color=color.white,Â linewidth=2)
upÂ Â =Â hline(rsiLineU,Â title='UPÂ Level',Â linewidth=1,Â color=color.red,Â linestyle=hline.style_dotted)
midÂ =Â hline(rsiLineM,Â title='MidÂ Level',Â linewidth=2,Â color=color.white,Â linestyle=hline.style_dotted)
dnÂ Â =Â hline(rsiLineD,Â title='DNÂ Level',Â linewidth=1,Â color=color.green,Â linestyle=hline.style_dotted)
col_e_wÂ =Â EMAÂ >Â myWMAÂ Â ?Â color.new(color.greenÂ ,Â 85)Â :Â color.new(color.redÂ ,Â 85)
col_r_wÂ =Â rsiÂ >Â myWMAÂ Â ?Â color.new(color.greenÂ ,Â 85)Â :Â color.new(color.redÂ ,Â 85)
fill(eÂ ,Â w,Â color=col_e_w)
fill(rÂ ,Â w,Â color=col_r_w)
////////////////////////////////////////////////////////////////////////////////
//SignalsÂ Â Â Â Â =Â input(true,group="ğŸ‘‡Â ğŸš¦Â ---Â BacktestingÂ SignalsÂ TypeÂ ---Â ğŸš¦Â ")
///////////////////////////////////////////////////////////////////////////////
RSI_CrossÂ Â Â =Â input(false,Â "RSIÂ xÂ Trending-MA",Â inline="wma_cross",group="ğŸ‘‡Â ğŸš¦Â ---Â BacktestingÂ SignalsÂ TypeÂ ---Â ğŸš¦Â ")Â Â Â Â Â Â //Â INPUT
rsiBuySignalÂ Â Â Â =Â crossover(rsiÂ ,Â myWMA)
plotshape(RSI_CrossÂ ?Â rsiBuySignalÂ :Â na,Â title="RSIÂ Crossover",Â style=shape.labelup,Â location=location.bottom,Â color=color.green)
rsiSellSignalÂ Â Â =Â crossunder(rsiÂ ,Â myWMA)Â 
plotshape(RSI_CrossÂ ?Â rsiSellSignalÂ :Â na,Â title="RSIÂ Crossunder",Â style=shape.labeldown,Â location=location.top,Â color=color.red)
ifÂ rsiBuySignalÂ andÂ RSI_CrossÂ andÂ inDateRange
Â Â Â Â strategy.entry("RSIxWMA",Â strategy.long)
ifÂ rsiSellSignalÂ andÂ RSI_CrossÂ andÂ inDateRange
Â Â Â Â strategy.close("RSIxWMA",Â comment="x")
ifÂ (notÂ inDateRange)
Â Â Â Â strategy.close_all()
Â Â Â Â 
////////////////////////////////////////////////////////////////////////////////
MA_CrossÂ Â Â Â =Â input(false,Â "MAÂ xÂ Trendin-MA",group="ğŸ‘‡Â ğŸš¦Â ---Â BacktestingÂ SignalsÂ TypeÂ ---Â ğŸš¦Â ")Â Â Â Â Â Â Â //Â INPUT
maBuySignalÂ Â Â Â Â =Â crossover(EMA,Â myWMA)
plotshape(MA_CrossÂ ?Â maBuySignalÂ :Â na,Â title="MAÂ Cross",Â style=shape.circle,Â location=location.bottom,Â color=color.lime)
maSellSignalÂ Â Â =Â crossunder(EMAÂ ,Â myWMA)Â 
plotshape(MA_CrossÂ ?Â maSellSignalÂ :Â na,Â title="RSIÂ Crossunder",Â style=shape.circle,Â location=location.top,Â color=color.maroon)
ifÂ maBuySignalÂ andÂ MA_CrossÂ andÂ inDateRange
Â Â Â Â strategy.entry("MAxWMA",Â strategy.long)
ifÂ maSellSignalÂ andÂ MA_CrossÂ andÂ inDateRange
Â Â Â Â strategy.close("MAxWMA",Â comment="x")
ifÂ (notÂ inDateRange)
Â Â Â Â strategy.close_all()
Â Â Â Â 
////////////////////////////////////////////////////////////////////////////////
MixÂ Â Â Â Â Â Â Â Â =Â input(false,Â "RSIÂ +Â EMAÂ xÂ Trending-MA",group="ğŸ‘‡Â ğŸš¦Â ---Â BacktestingÂ SignalsÂ TypeÂ ---Â ğŸš¦Â ")Â Â Â Â Â Â Â //Â INPUT
rsi_ma_buyÂ Â =Â crossover(rsiÂ ,Â myWMA)Â andÂ crossover(EMA,Â myWMA)
rsi_ma_sellÂ =Â crossunder(rsiÂ ,Â myWMA)Â andÂ crossunder(EMA,Â myWMA)
plotshape(MixÂ ?Â rsi_ma_buyÂ :Â na,Â title="RSIÂ Crossunder",Â style=shape.circle,Â location=location.bottom,Â color=color.lime,Â size=size.tiny)
plotshape(MixÂ ?Â rsi_ma_sellÂ :Â na,Â title="RSIÂ Crossunder",Â style=shape.circle,Â location=location.top,Â color=color.yellow,Â size=size.tiny)
ifÂ rsi_ma_buyÂ andÂ MixÂ andÂ inDateRange
Â Â Â Â strategy.entry("RSI+EMAÂ xÂ WMA",Â strategy.long)
ifÂ rsi_ma_sellÂ andÂ MixÂ andÂ inDateRange
Â Â Â Â strategy.close("RSI+EMAÂ xÂ WMA",Â comment="x")
ifÂ (notÂ inDateRange)
Â Â Â Â strategy.close_all()
////////////////////////////////////////////////////////////////////////////////
wma_crossÂ Â Â Â Â Â Â =Â input(false,Â "Trending-MAÂ xÂ 50",group="ğŸ‘‡Â ğŸš¦Â ---Â BacktestingÂ SignalsÂ TypeÂ ---Â ğŸš¦Â ")Â Â Â Â Â Â Â //Â INPUT
wma_buyÂ Â Â Â Â Â Â Â Â =Â crossover(myWMAÂ ,Â rsiLineM)
plotshape(wma_crossÂ ?Â wma_buyÂ :Â na,Â title="WMAÂ Cross",Â style=shape.diamond,Â location=location.bottom,Â color=color.aqua)
wma_sellÂ Â Â Â Â Â Â Â =Â crossunder(myWMAÂ ,Â rsiLineM)
plotshape(wma_crossÂ ?Â wma_sellÂ :Â na,Â title="WMAÂ Cross",Â style=shape.diamond,Â location=location.top,Â color=color.aqua)
ifÂ wma_buyÂ andÂ wma_crossÂ andÂ inDateRange
Â Â Â Â strategy.entry("WMAÂ xÂ 50",Â strategy.long)
ifÂ wma_sellÂ andÂ wma_crossÂ andÂ inDateRange
Â Â Â Â strategy.close("WMAÂ xÂ 50",Â comment="x")
ifÂ (notÂ inDateRange)
Â Â Â Â strategy.close_all()
////////////////////////////////////////////////////////////////////////////////
rsi_50Â Â Â Â Â Â =Â input(false,Â "RSIÂ xÂ 50",group="ğŸ‘‡Â ğŸš¦Â ---Â BacktestingÂ SignalsÂ TypeÂ ---Â ğŸš¦Â ")Â Â Â Â Â Â Â //Â INPUT
rsi_50_buyÂ Â Â Â Â Â =Â crossover(rsiÂ ,Â rsiLineM)
plotshape(rsi_50Â ?Â rsi_50_buyÂ :Â na,Â title="WMAÂ Cross",Â style=shape.cross,Â location=location.bottom,Â color=color.purple)
rsi_50_sellÂ Â Â Â Â =Â crossunder(rsiÂ ,Â rsiLineM)
plotshape(rsi_50Â ?Â rsi_50_sellÂ :Â na,Â title="WMAÂ Cross",Â style=shape.cross,Â location=location.top,Â color=color.purple)
ifÂ rsi_50_buyÂ andÂ rsi_50Â andÂ inDateRange
Â Â Â Â strategy.entry("RSIÂ CrossÂ 50",Â strategy.long)
ifÂ rsi_50_sellÂ andÂ rsi_50Â andÂ inDateRange
Â Â Â Â strategy.close("RSIÂ CrossÂ 50",Â comment="x")
ifÂ (notÂ inDateRange)
Â Â Â Â strategy.close_all()
Â Â Â Â 
////////////////////////////////////////////////////////////////////////////////
RSI_OS_OBÂ Â Â =Â input(false,Â "RSIÂ OS/OBÂ xÂ Trending-MA",group="ğŸ‘‡Â ğŸš¦Â ---Â BacktestingÂ SignalsÂ TypeÂ ---Â ğŸš¦Â ")Â Â Â Â Â Â Â //Â INPUT
rsi_OB_buyÂ Â Â Â Â Â =Â (rsiÂ <Â rsiLineDÂ orÂ rsi[1]Â <Â rsiLineD[1]Â orÂ rsi[2]Â <Â rsiLineD[2]Â orÂ rsi[3]Â <Â rsiLineD[3]Â orÂ rsi[4]Â <Â rsiLineD[4]Â orÂ rsi[5]Â <Â rsiLineD[5])Â andÂ rsiBuySignalÂ 
plotshape(RSI_OS_OBÂ ?Â rsi_OB_buyÂ :Â na,Â title="RSIÂ OBÂ +Â Cross",Â style=shape.circle,Â location=location.bottom,Â color=color.lime,Â size=size.tiny)
rsi_OS_sellÂ Â Â Â Â =Â (rsiÂ >Â rsiLineUÂ orÂ rsi[1]Â >Â rsiLineU[1]Â orÂ rsi[2]Â >Â rsiLineU[2]Â orÂ rsi[3]Â >Â rsiLineU[3]Â orÂ rsi[4]Â >Â rsiLineU[4]Â orÂ rsi[5]Â >Â rsiLineU[5])Â andÂ maSellSignalÂ 
plotshape(RSI_OS_OBÂ ?Â rsi_OS_sellÂ :Â na,Â title="RSIÂ OSÂ +Â Cross",Â style=shape.circle,Â location=location.top,Â color=color.red,Â size=size.tiny)
ifÂ rsi_OB_buyÂ andÂ RSI_OS_OBÂ andÂ inDateRange
Â Â Â Â strategy.entry("RSI-OBOSÂ xÂ WMA",Â strategy.long)
ifÂ rsi_OS_sellÂ andÂ RSI_OS_OBÂ andÂ inDateRange
Â Â Â Â strategy.close("RSI-OBOSÂ xÂ WMA",Â comment="x")
ifÂ (notÂ inDateRange)
Â Â Â Â strategy.close_all()
////////////////////////////////////////////////////////////////////////////////
rsi_OB_OSÂ Â Â Â Â Â Â =Â input(false,Â "RSIÂ OverÂ Sold/Bought",group="ğŸ‘‡Â ğŸš¦Â ---Â BacktestingÂ SignalsÂ TypeÂ ---Â ğŸš¦Â ")Â Â Â Â Â Â Â //Â INPUT
rsiBuyÂ Â Â Â Â Â Â Â Â Â =Â crossover(rsiÂ ,Â rsiLineD)
rsiSellÂ Â Â Â Â Â Â Â Â =Â crossunder(rsi,Â rsiLineU)
rsiExitÂ Â Â Â Â Â Â Â Â =Â crossunder(rsi,Â rsiLineD)
plotshape(rsi_OB_OSÂ ?Â rsiBuyÂ :Â na,Â title="RSIÂ OB",Â style=shape.cross,Â location=location.bottom,Â color=color.purple)
plotshape(rsi_OB_OSÂ ?Â crossunder(rsi,Â rsiLineU)Â :Â na,Â title="RSIÂ OS",Â style=shape.cross,Â location=location.top,Â color=color.purple)
plotshape(rsi_OB_OSÂ ?Â rsiExitÂ :Â na,Â title="RSIÂ OS",Â style=shape.cross,Â location=location.bottom,Â color=color.red)
ifÂ rsiBuyÂ andÂ rsi_OB_OSÂ andÂ inDateRange
Â Â Â Â strategy.entry("RSIÂ OB",Â strategy.long)
ifÂ (rsiSellÂ orÂ rsiExit)Â andÂ rsi_OB_OSÂ andÂ inDateRange
Â Â Â Â strategy.close("RSIÂ OB",Â comment="x")
ifÂ (notÂ inDateRange)
Â Â Â Â strategy.close_all()
Â Â Â Â 
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
With_MA_VisÂ Â Â Â Â =Â input(trueÂ ,Â title="WithÂ MAÂ Signal)",Â inline="WITHÂ MA",Â group="WithÂ MA")
withMA_typeÂ Â Â Â Â =Â input(title="",Â defval="SMA",Â options=["EMA","SMA","WMA","VWMA"],Â inline="WITHÂ MA",Â group="WithÂ MA")
with_MALenÂ Â Â Â Â Â =Â input(title="",Â defval=9,Â type=input.integer,Â inline="WITHÂ MA",Â group="WithÂ MA")
//Â TAKE-PROFITÂ /Â STOP-LOSSÂ 
Stop_Take_VisÂ Â Â =Â input(true,Â "TP-SL")
LongSLValueÂ Â Â Â Â =Â input(title="SLÂ %",Â type=input.float,Â defval=3,Â minval=0.5)Â *Â 0.01
LongTPValueÂ Â Â Â Â =Â input(title="TPÂ %",Â type=input.float,Â defval=15,Â minval=0.5)Â *Â 0.01
LongSLDetermineÂ =Â strategy.position_avg_priceÂ *Â (1Â -Â LongSLValue)
LongTPDetermineÂ =Â strategy.position_avg_priceÂ *Â (1Â +Â LongTPValue)
//////////////////////////
with_maÂ Â Â Â Â =Â WithMA(close,Â with_MALen,Â withMA_type)
Close_buy_MAÂ Â Â Â =Â crossover(closeÂ ,Â with_ma)
Close_sell_MAÂ Â Â =Â crossunder(closeÂ ,Â with_ma)
//Â PLOTÂ OPTION
WithMaSignalÂ Â Â Â =Â input(false,Â "MAÂ +Â RSIÂ xÂ Trending-MA",group="WithÂ MA")Â Â Â Â Â Â Â //Â INPUT
//Â CONDITIONÂ INÂ VARIABLE
withMA_RSI_BUYÂ Â =Â (Close_buy_MAÂ andÂ rsiBuySignal)Â andÂ WithMaSignalÂ andÂ inDateRange
withMA_RSI_SELLÂ =Â (Close_sell_MAÂ andÂ rsiSellSignal)Â andÂ WithMaSignalÂ andÂ inDateRange
//Â PLOTÂ ING
plotshape(WithMaSignalÂ ?Â withMA_RSI_BUYÂ :Â na,Â title="WithÂ MA",Â style=shape.diamond,Â location=location.bottom,Â color=color.aqua)
plotshape(WithMaSignalÂ ?Â withMA_RSI_SELLÂ :Â na,Â title="WithÂ MA",Â style=shape.diamond,Â location=location.top,Â color=color.aqua)
ifÂ withMA_RSI_BUY
Â Â Â Â strategy.entry("MAÂ +Â RSIxWMA",Â strategy.long)
ifÂ withMA_RSI_SELL
Â Â Â Â strategy.close("MAÂ +Â RSIxWMA",Â comment="x")
ifÂ (notÂ inDateRange)
Â Â Â Â strategy.close_all()
//Â FORÂ SLÂ -Â TP
ifÂ (strategy.position_sizeÂ >Â 0)Â andÂ Stop_Take_Vis
Â Â Â Â strategy.exit("BUY",Â stop=LongSLDetermine,Â limit=LongTPDetermine)
Expand (233 lines)