Script Name: The Box Percent Strat
Author: HermanBrummer
Description: Hi guys, 

Version Zero (more work needed) of an idea I've been meaning to out into a strategy for a while. ðŸ¤¯

This uses percent boxesðŸ¤” instead of traditional indicators like RSI, MACD etc. ðŸ¤«

Takes the first close price of the series and creates a Top Band 10% up, buys if price reaches that level, and puts a stop on a Bot Band, 10% down
When the first trade is in...
PineScript code:

Pine Scriptâ„¢ strategy
The Box Percent Strat
Copy code
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
//@version=4
//Â ThisÂ sourceÂ codeÂ isÂ subjectÂ toÂ theÂ termsÂ ofÂ theÂ MozillaÂ PublicÂ LicenseÂ 2.0Â atÂ https://mozilla.org/MPL/2.0/
//Â Â©Â HermanBrummerÂ 4Â AprilÂ 2021
strategyÂ ("TheÂ BoxÂ PercentÂ Strat",Â shorttitle="TheÂ Box",Â overlayÂ =Â true,Â initial_capitalÂ =Â 1000)
///Â Â Â Â Â DesignedÂ forÂ LONGÂ onlyÂ onÂ Daily,Â 2DÂ orÂ 3DÂ Charts
///Â Â Â Â Â UsesÂ fixedÂ investmentÂ riskÂ amount,Â meaningÂ you'reÂ willingÂ toÂ loseÂ thatÂ amountÂ perÂ trade
///Â Â Â Â Â LimitÂ buyÂ toÂ notÂ overpay
RiskPerTradeÂ Â Â Â Â Â Â Â Â Â Â Â =Â input(100,Â "RiskÂ losingÂ thisÂ muchÂ perÂ trade",Â tooltip="ThisÂ calculatesÂ howÂ muchÂ youÂ willÂ loseÂ basedÂ onÂ differenceÂ betweenÂ theÂ entryÂ priceÂ andÂ stopÂ lossÂ price")
TradeAboveMAFilterPerÂ Â Â =Â input(50,Â "TheÂ SystemÂ won'tÂ tradeÂ ifÂ priceÂ isÂ belowÂ thisÂ MA")
UpBoxSizeÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â (input(10,Â "BoxÂ sizeÂ inÂ %")Â *Â 0.01)+1Â //Â 1.1Â ==Â 10%Â up
DnBoxSizeÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â 1-(input(10,Â "BoxÂ sizeÂ inÂ %")Â *Â 0.01)Â //Â 0.9Â ==Â 10%Â dn
varÂ FirstBarÂ Â Â Â Â Â Â Â Â Â Â Â =Â closeÂ >Â 0Â ?Â closeÂ :Â na
varÂ FirstTopÂ Â Â Â Â Â Â Â Â Â Â Â =Â FirstBarÂ *Â UpBoxSize
varÂ FirstBotÂ Â Â Â Â Â Â Â Â Â Â Â =Â FirstBarÂ *Â DnBoxSize
varÂ topÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â sma(FirstTop,Â 1)
varÂ botÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â sma(FirstBot,Â 1)
///Â Â Â Â Â TheÂ BoxÂ Calcs
ifÂ Â high[2]Â >Â top
Â Â Â Â topÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â :=Â topÂ *Â UpBoxSize
Â Â Â Â botÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â :=Â botÂ *Â UpBoxSize
ifÂ Â low[1]Â Â <Â bot
Â Â Â Â topÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â :=Â topÂ *Â DnBoxSize
Â Â Â Â botÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â :=Â botÂ *Â DnBoxSize
Â 
plot(bot,Â Â Â "Bot",Â Â Â Â Â Â #ff0000)Â //Â Green
plot(top,Â Â Â "Top",Â Â Â Â Â Â #00ff00)Â //Â Red
midÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â ((top-bot)/2)+botÂ 
plot(mid,Â Â Â "Mid",Â color.gray)
TradeAboveMAFilterÂ Â Â Â Â Â =Â sma(close,Â TradeAboveMAFilterPer)
plot(TradeAboveMAFilter,Â "TradeÂ AboveMAFÂ Filter",Â color.yellow,Â 3,Â style=plot.style_circles)
//Â colÂ =Â high[1]Â <Â topÂ andÂ highÂ >=Â topÂ ?Â color.whiteÂ :Â na
//Â bgcolor(col)
///Â Â Â Â Â Shares
RiskRangeÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â closeÂ *Â abs(DnBoxSizeÂ -Â 1)Â //Â 0.9Â -Â 1Â ==Â 1.10Â //Â 10%Â absÂ soÂ youÂ don'tÂ getÂ aÂ negÂ numberÂ NBÂ NB
SharesÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â RiskPerTradeÂ /Â RiskRangeÂ 
//plot(close-RiskRange,Â "RiskRange",Â color.fuchsia)
EnterÂ Â Â =Â Â Â highÂ >=Â top
Â Â Â Â Â Â Â Â Â Â Â Â Â andÂ close[1]Â >Â TradeAboveMAFilter
Â Â Â Â Â Â Â Â Â Â Â Â Â andÂ strategy.opentrades[0]Â ==Â strategy.opentrades[1]
Â Â Â Â Â Â Â Â Â Â Â Â Â andÂ strategy.opentrades[1]Â ==Â strategy.opentrades[2]Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â andÂ strategy.opentrades[2]Â ==Â strategy.opentrades[3]
Â Â Â Â Â Â Â Â Â Â Â Â Â andÂ strategy.opentrades[3]Â ==Â strategy.opentrades[4]Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â andÂ strategy.opentrades[4]Â ==Â strategy.opentrades[5]
Â Â Â Â Â Â Â Â Â Â Â Â Â andÂ strategy.opentrades[5]Â ==Â strategy.opentrades[6]
Â Â Â Â Â Â Â Â Â Â Â Â Â //Â won'tÂ enterÂ ifÂ newÂ positonÂ wasÂ takenÂ inÂ theÂ lastÂ 6Â bars
Â Â Â Â Â Â Â Â Â Â Â Â Â //Â needÂ betterÂ codeÂ forÂ this.
///Â Â Â Â Â BuyÂ &Â Sell
//Â Â (newÂ highs)Â Â Â Â andÂ Â (CloseÂ aboveÂ movingÂ averageÂ filter)Â andÂ (NoÂ newÂ tradesÂ wereÂ takenÂ receently)
ifÂ Â EnterÂ //(highÂ >=Â top)Â Â andÂ Â (close[1]Â >Â TradeAboveMAFilter)Â andÂ strategy.opentrades[0]Â ==Â strategy.opentrades[1]Â 
Â Â Â Â strategy.order("En",Â strategy.long,Â qty=Shares,Â limit=top)//,Â stop=top)
Â Â Â Â 
//barcolor(strategy.position_sizeÂ !=Â 0Â ?Â #00ff00Â :Â color.gray)
//Â ///Â Â Â Â Â IfÂ ONEÂ PositionÂ THENÂ thisÂ StopÂ Because:Â 
//Â ifÂ Â strategy.position_sizeÂ ==Â 1
//Â Â Â Â Â strategy.exit("Ex",Â "En",Â stop=bot)
///Â Â Â Â Â IfÂ itÂ hasÂ moreÂ thanÂ oneÂ tradÂ OPEN
ifÂ Â strategy.position_sizeÂ >Â 0
Â Â Â Â strategy.exit("Ex",Â "En",Â stop=bot[2]Â )Â Â Â //Â putsÂ stopÂ onÂ oldÂ bot
//plot(strategy.position_avg_price,Â "AvgÂ Price",Â color.yellow)
Expand (83 lines)